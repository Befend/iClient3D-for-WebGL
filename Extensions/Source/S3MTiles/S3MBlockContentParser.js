const _0x36d9=['layerId','_subTextureManager','materialCode','bTransparentSorting','transparentsorting','1oGzfkp','length','byteOffset','compressOptions','context','groupNode','197957dlXkmc','arrIndexPackage','specularColor','distance','diffuse','add','TextureWrap','vertexAttributes','567659esbRcL','instanceIndex','hasOwnProperty','push','SVC_Vertex','445301InuGwh','ambientColor','pickInfo','BoundingSphere','sphere','295091ZKbnVR','multiplyByScalar','pageLods','matrix','modelMatrix','Cartesian3','defined','transform','fromArray','buffer','texMatrix','minVerticesValue','typedArray','CLAMP_TO_EDGE','_materialManager','shininess','material','wrapS','radius','boundingSphere','Color','fromPoints','componentsPerAttribute','lerp','create','rangeMode','unpack','texmodmatrix','1ccOKgc','keys','Matrix4','rangeList','verticesCount','byteLength','REPEAT','center','edgeGeometry','specular','1090196vsMeSo','textureunitstates','materials','isLeafTile','geoPackage','geodes','5QcpIVc','skeletonNames','boundingVolume','fileType','clone','914334JZnQjx','geoMap','parse','390199aMxIkj','instanceBounds','addressmode','tile','getSingleInstance','textureunitstate'];const _0xb452c6=_0x408a;(function(_0x13f6d3,_0x2413bb){const _0x10b167=_0x408a;while(!![]){try{const _0x147633=parseInt(_0x10b167(0x113))*-parseInt(_0x10b167(0x105))+-parseInt(_0x10b167(0xe2))*-parseInt(_0x10b167(0x118))+-parseInt(_0x10b167(0x10b))+-parseInt(_0x10b167(0xf7))+parseInt(_0x10b167(0xec))+-parseInt(_0x10b167(0xfa))+-parseInt(_0x10b167(0x11d))*-parseInt(_0x10b167(0xf2));if(_0x147633===_0x2413bb)break;else _0x13f6d3['push'](_0x13f6d3['shift']());}catch(_0x3c4613){_0x13f6d3['push'](_0x13f6d3['shift']());}}}(_0x36d9,0xe5b03));import _0x24003a from'./DDSTexture.js';function _0x408a(_0x28164b,_0x5792c9){_0x28164b=_0x28164b-0xde;let _0x36d9c1=_0x36d9[_0x28164b];return _0x36d9c1;}import _0x53ee76 from'./MaterialPass.js';import _0x29a4f2 from'./Factory/S3MContentFactory.js';import _0x469ee6 from'./Enum/VertexCompressOption.js';import _0x3423db from'./MaterialManager.js';import _0x55a754 from'./SubTextureManager.js';function S3MBlockContentParser(){}function parseMaterial(_0x15fd1a,_0xbe990b,_0x2c38ae){const _0x24d743=_0x408a;let _0x46ef3a=_0x15fd1a[_0x24d743(0x109)],_0x5a785e=_0x15fd1a[_0x24d743(0x12b)];!_0x5a785e&&(_0x5a785e=_0x15fd1a['_materialManager']=new _0x3423db());let _0x165908=_0x15fd1a[_0x24d743(0x101)];!_0x15fd1a[_0x24d743(0x101)]&&(_0x15fd1a[_0x24d743(0x101)]=_0x55a754[_0x24d743(0xfe)]());let _0x25b70f=_0xbe990b[_0x24d743(0xee)][_0x24d743(0x12d)];for(let _0x57cce3=0x0,_0x1077b4=_0x25b70f[_0x24d743(0x106)];_0x57cce3<_0x1077b4;_0x57cce3++){let _0x215ca5=_0x25b70f[_0x57cce3][_0x24d743(0x12d)],_0x3ba87b=_0x215ca5['id'],_0x95953e=_0x5a785e[_0x24d743(0xde)](_0x3ba87b);_0x95953e[_0x24d743(0x100)]=_0x15fd1a['id'],_0x95953e[_0x24d743(0xfd)]=_0x2c38ae;let _0x5dec2e=_0x215ca5['ambient'];_0x95953e[_0x24d743(0x119)]=new Cesium[(_0x24d743(0x131))](_0x5dec2e['r'],_0x5dec2e['g'],_0x5dec2e['b'],_0x5dec2e['a']);let _0x235202=_0x215ca5[_0x24d743(0x10f)];_0x95953e['diffuseColor']=new Cesium[(_0x24d743(0x131))](_0x235202['r'],_0x235202['g'],_0x235202['b'],_0x235202['a']);let _0x135318=_0x215ca5[_0x24d743(0xeb)];_0x95953e[_0x24d743(0x10d)]=new Cesium[(_0x24d743(0x131))](_0x135318['r'],_0x135318['g'],_0x135318['b'],_0x135318['a']),_0x95953e[_0x24d743(0x12c)]=_0x215ca5[_0x24d743(0x12c)],_0x95953e[_0x24d743(0x103)]=_0x215ca5[_0x24d743(0x104)],_0x95953e['id']=_0x3ba87b;let _0x557761=_0x215ca5[_0x24d743(0xed)],_0x5dfe2f=_0x557761[_0x24d743(0x106)];for(let _0x47309a=0x0;_0x47309a<0x1;_0x47309a++){let _0x17a63d=_0x557761[_0x47309a][_0x24d743(0xff)],_0x49ca2c=_0x17a63d['id'],_0xfca91=_0x17a63d[_0x24d743(0xfc)]['u']===0x0?Cesium[_0x24d743(0x111)]['REPEAT']:Cesium[_0x24d743(0x111)][_0x24d743(0x12a)],_0x4b6dc1=_0x17a63d[_0x24d743(0xfc)]['v']===0x0?Cesium['TextureWrap'][_0x24d743(0xe8)]:Cesium['TextureWrap'][_0x24d743(0x12a)];_0x95953e[_0x24d743(0x127)]=Cesium['Matrix4'][_0x24d743(0xe0)](_0x17a63d[_0x24d743(0xe1)]);let _0x3c23ee=_0xbe990b['texturePackage'][_0x49ca2c];_0x3c23ee&&(_0x3c23ee[_0x24d743(0x12e)]=_0xfca91,_0x3c23ee['wrapT']=_0x4b6dc1,_0x95953e['createTexture'](_0x15fd1a,_0x2c38ae,_0x3c23ee,_0x47309a,_0xbe990b));}}}function calcBoundingVolumeForNormal(_0x58fd60,_0x4eaf6f){const _0x33cba3=_0x408a;let _0x1ad1fc=new Cesium[(_0x33cba3(0x11b))](),_0x2ed80a=new Cesium[(_0x33cba3(0x122))](),_0x5c3a37=_0x58fd60[_0x33cba3(0x112)][0x0],_0x578e17=_0x5c3a37[_0x33cba3(0x133)],_0x26308b=Cesium[_0x33cba3(0x123)](_0x58fd60[_0x33cba3(0x108)])&&(_0x58fd60[_0x33cba3(0x108)]&_0x469ee6[_0x33cba3(0x117)])===_0x469ee6[_0x33cba3(0x117)],_0x1bdab3=0x1,_0x17aed0,_0x3eb605;_0x26308b?(_0x1bdab3=_0x58fd60['vertCompressConstant'],_0x17aed0=new Cesium['Cartesian3'](_0x58fd60[_0x33cba3(0x128)]['x'],_0x58fd60[_0x33cba3(0x128)]['y'],_0x58fd60[_0x33cba3(0x128)]['z']),_0x3eb605=new Uint16Array(_0x5c3a37[_0x33cba3(0x129)][_0x33cba3(0x126)],_0x5c3a37[_0x33cba3(0x129)][_0x33cba3(0x107)],_0x5c3a37[_0x33cba3(0x129)][_0x33cba3(0xe7)]/0x2)):_0x3eb605=new Float32Array(_0x5c3a37[_0x33cba3(0x129)][_0x33cba3(0x126)],_0x5c3a37[_0x33cba3(0x129)]['byteOffset'],_0x5c3a37['typedArray'][_0x33cba3(0xe7)]/0x4);let _0x5e62d9=[];for(let _0x11ec85=0x0;_0x11ec85<_0x58fd60[_0x33cba3(0xe6)];_0x11ec85++){Cesium[_0x33cba3(0x122)][_0x33cba3(0x125)](_0x3eb605,_0x578e17*_0x11ec85,_0x2ed80a),_0x26308b&&(_0x2ed80a=Cesium[_0x33cba3(0x122)][_0x33cba3(0x11e)](_0x2ed80a,_0x1bdab3,_0x2ed80a),_0x2ed80a=Cesium[_0x33cba3(0x122)][_0x33cba3(0x110)](_0x2ed80a,_0x17aed0,_0x2ed80a)),_0x5e62d9[_0x33cba3(0x116)](Cesium[_0x33cba3(0x122)][_0x33cba3(0xf6)](_0x2ed80a));}return Cesium[_0x33cba3(0x11b)][_0x33cba3(0x132)](_0x5e62d9,_0x1ad1fc),Cesium[_0x33cba3(0x11b)][_0x33cba3(0x124)](_0x1ad1fc,_0x4eaf6f,_0x1ad1fc),_0x5e62d9[_0x33cba3(0x106)]=0x0,_0x1ad1fc;}let scratchCenter=new Cesium[(_0xb452c6(0x122))]();function calcBoundingVolumeForInstance(_0x116abe){const _0x11b804=_0xb452c6;let _0x4642ce=new Cesium[(_0x11b804(0x11b))](),_0x1112cd=_0x116abe[_0x11b804(0xfb)];if(!Cesium[_0x11b804(0x123)](_0x1112cd))return _0x4642ce;let _0x360d86=new Cesium[(_0x11b804(0x122))](_0x1112cd[0x0],_0x1112cd[0x1],_0x1112cd[0x2]),_0x4add04=new Cesium['Carteisan3'](_0x1112cd[0x3],_0x1112cd[0x4],_0x1112cd[0x5]),_0x1452bb=new Cesium[(_0x11b804(0x122))][(_0x11b804(0x134))](_0x360d86,_0x4add04,0.5,scratchCenter),_0x8ea9bb=new Cesium['Cartesian3'][(_0x11b804(0x10e))](_0x1452bb,_0x360d86);return _0x4642ce[_0x11b804(0xe9)]=_0x1452bb,_0x4642ce[_0x11b804(0x12f)]=_0x8ea9bb,_0x4642ce;}function calcBoundingVolume(_0x40ab26,_0xa0594f){const _0x138436=_0xb452c6;if(_0x40ab26[_0x138436(0x114)]>-0x1)return calcBoundingVolumeForInstance(_0x40ab26);return calcBoundingVolumeForNormal(_0x40ab26,_0xa0594f);}function parseGeodes(_0xe832b4,_0x5476d4,_0x55ca9,_0x8cb679){const _0x10044d=_0xb452c6;let _0xb81e23={},_0x41480f=_0x55ca9[_0x10044d(0xf1)];for(let _0x2b5dab=0x0,_0x4c473f=_0x41480f[_0x10044d(0x106)];_0x2b5dab<_0x4c473f;_0x2b5dab++){let _0x3c3516=_0x41480f[_0x2b5dab],_0xb28c6e=_0x3c3516[_0x10044d(0x120)],_0x56c1b9=Cesium[_0x10044d(0xe4)]['multiply'](_0xe832b4[_0x10044d(0x121)],_0xb28c6e,new Cesium[(_0x10044d(0xe4))]()),_0x4b5cab;Cesium[_0x10044d(0x123)](_0x8cb679[_0x10044d(0xf4)])&&(_0x4b5cab=new Cesium['BoundingSphere'](_0x8cb679[_0x10044d(0xf4)][_0x10044d(0x11c)][_0x10044d(0xe9)],_0x8cb679[_0x10044d(0xf4)][_0x10044d(0x11c)][_0x10044d(0x12f)]),Cesium[_0x10044d(0x11b)][_0x10044d(0x124)](_0x4b5cab,_0xe832b4[_0x10044d(0x121)],_0x4b5cab));let _0x159954=_0x3c3516[_0x10044d(0xf3)];for(let _0x3ee968=0x0,_0x50c748=_0x159954[_0x10044d(0x106)];_0x3ee968<_0x50c748;_0x3ee968++){let _0x483e8b=_0x159954[_0x3ee968],_0x17e0a2=_0x5476d4[_0x10044d(0xf0)][_0x483e8b],_0x19c1fd=_0x17e0a2['vertexPackage'],_0x1a0d30=_0x17e0a2[_0x10044d(0x10c)],_0x3bb860=_0x17e0a2[_0x10044d(0x11a)],_0x5a1194;_0x1a0d30[_0x10044d(0x106)]>0x0&&(_0x5a1194=_0xe832b4[_0x10044d(0x12b)][_0x10044d(0xde)](_0x1a0d30[0x0][_0x10044d(0x102)]));let _0xaf856a=Cesium[_0x10044d(0x123)](_0x4b5cab)?_0x4b5cab:calcBoundingVolume(_0x19c1fd,_0x56c1b9);_0xb81e23[_0x483e8b]=_0x29a4f2[_0xe832b4[_0x10044d(0xf5)]]({'layer':_0xe832b4,'vertexPackage':_0x19c1fd,'arrIndexPackage':_0x1a0d30,'pickInfo':_0x3bb860,'modelMatrix':_0x56c1b9,'geoMatrix':_0xb28c6e,'boundingVolume':_0xaf856a,'material':_0x5a1194,'edgeGeometry':_0x17e0a2[_0x10044d(0xea)],'geoName':_0x483e8b});}}if(Object[_0x10044d(0xe3)](_0xb81e23)[_0x10044d(0x106)]<0x1)return;if(!Cesium[_0x10044d(0x123)](_0x8cb679['boundingVolume'])){let _0x3d1941=[];for(let _0x5f2e29 in _0xb81e23){_0xb81e23[_0x10044d(0x115)](_0x5f2e29)&&_0x3d1941[_0x10044d(0x116)](_0xb81e23[_0x5f2e29][_0x10044d(0xf4)]);}let _0x12a24c=Cesium[_0x10044d(0x11b)]['fromBoundingSpheres'](_0x3d1941);_0x8cb679[_0x10044d(0xf4)]={'sphere':_0x12a24c};}_0x8cb679['geoMap']=_0xb81e23;}function parsePagelods(_0x3ccbbd,_0x4ecacd){const _0x2528df=_0xb452c6;let _0x2ff6d3=_0x4ecacd[_0x2528df(0x10a)],_0x1a0f48=[];for(let _0x1c3c1f=0x0,_0x1b3a96=_0x2ff6d3[_0x2528df(0x11f)][_0x2528df(0x106)];_0x1c3c1f<_0x1b3a96;_0x1c3c1f++){let _0x462e21={},_0x4757ea=_0x2ff6d3[_0x2528df(0x11f)][_0x1c3c1f];_0x462e21[_0x2528df(0xdf)]=_0x4757ea[_0x2528df(0xdf)],_0x462e21['rangeDataList']=_0x4757ea['childTile'],_0x462e21[_0x2528df(0xe5)]=_0x4757ea[_0x2528df(0xe5)];let _0x565899=_0x4757ea[_0x2528df(0x130)][_0x2528df(0xe9)],_0x45c7f2=_0x4757ea[_0x2528df(0x130)][_0x2528df(0x12f)];_0x462e21['rangeDataList']!==''?_0x462e21[_0x2528df(0xf4)]={'sphere':{'center':new Cesium[(_0x2528df(0x122))](_0x565899['x'],_0x565899['y'],_0x565899['z']),'radius':_0x45c7f2}}:_0x462e21[_0x2528df(0xef)]=!![],parseGeodes(_0x3ccbbd,_0x4ecacd,_0x4757ea,_0x462e21),Cesium[_0x2528df(0x123)](_0x462e21[_0x2528df(0xf8)])&&_0x1a0f48[_0x2528df(0x116)](_0x462e21);}return _0x1a0f48;}S3MBlockContentParser[_0xb452c6(0xf9)]=function(_0x5b1295,_0x429b49,_0x110693){const _0x37596e=_0xb452c6;if(!Cesium[_0x37596e(0x123)](_0x110693))return;parseMaterial(_0x5b1295,_0x110693,_0x429b49);let _0x1e29c6=parsePagelods(_0x5b1295,_0x110693);return _0x1e29c6;};export default S3MBlockContentParser;