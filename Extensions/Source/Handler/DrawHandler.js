const _0x5e1c=['479413jlBsjD','polylines','activeEvt','Color','add','removeAll','70suZdZL','polyline-','fromType','Space','point','drawEvt','fromCssColorString','PointPrimitiveCollection','defineProperties','slice','primitives','Cartesian3','hierarchy','_drawEvt','1036446SMsvUY','Polygon','57489WzyNuo','clone','defaultValue','length','_clampMode','LEFT_CLICK','push','deactivate','position','Point','pickPosition','ORANGE','mode','MOUSE_MOVE','Cartesian2','pickPositionSupported','103TfiRGw','handler','your\x20browser\x20not\x20supported\x20pickPosition!','viewer','S3mModel','removeInputAction','viewer\x20and\x20mode\x20is\x20required!','active','entities','random','ScreenSpaceEventType','activate','raiseEvent','scene','remove','setInputAction','ScreenSpaceEventHandler','points','isDrawing','prototype','polyline','PolylineCollection','1549563BiHkkq','#51ff00','show','polygon','26iXtqoB','_activeEvt','Line','278122KQqBaK','clampToGroundPolylines','9263QdpypA','WHITE','endPosition','positions','ColorType','4289HJuPLg','Material','clear','RIGHT_CLICK','Event','movingEvt','withAlpha'];const _0x2a9222=_0x1d5a;function _0x1d5a(_0xdf2f7,_0x5b7486){_0xdf2f7=_0xdf2f7-0x1be;let _0x5e1c42=_0x5e1c[_0xdf2f7];return _0x5e1c42;}(function(_0x49a6c2,_0x380353){const _0x4d31c8=_0x1d5a;while(!![]){try{const _0x114831=-parseInt(_0x4d31c8(0x1ed))*parseInt(_0x4d31c8(0x1ff))+parseInt(_0x4d31c8(0x1f9))+parseInt(_0x4d31c8(0x20d))+parseInt(_0x4d31c8(0x1be))*-parseInt(_0x4d31c8(0x1e8))+parseInt(_0x4d31c8(0x1f2))*-parseInt(_0x4d31c8(0x1ce))+parseInt(_0x4d31c8(0x1eb))+parseInt(_0x4d31c8(0x1e4));if(_0x114831===_0x380353)break;else _0x49a6c2['push'](_0x49a6c2['shift']());}catch(_0x2b2396){_0x49a6c2['push'](_0x49a6c2['shift']());}}}(_0x5e1c,0xb937d));import _0x5dbf28 from'./DrawMode.js';import _0xc8ba86 from'./ClampMode.js';let DrawHandler=function(_0x5b7967,_0x441055,_0x59cdd2){const _0x47b7ac=_0x1d5a;if(!_0x5b7967||_0x441055===undefined)throw new Cesium['DeveloperError'](_0x47b7ac(0x1d4));this[_0x47b7ac(0x1cf)]=new Cesium[(_0x47b7ac(0x1de))](_0x5b7967[_0x47b7ac(0x1db)]['canvas']),this[_0x47b7ac(0x1d1)]=_0x5b7967,this[_0x47b7ac(0x1ca)]=_0x441055,this[_0x47b7ac(0x1c2)]=Cesium[_0x47b7ac(0x1c0)](_0x59cdd2,_0xc8ba86['Space']),this['isDrawing']=![],this[_0x47b7ac(0x1d5)]=![],this[_0x47b7ac(0x20c)]=new Cesium['Event'](),this[_0x47b7ac(0x1e9)]=new Cesium[(_0x47b7ac(0x1f6))](),this[_0x47b7ac(0x1f7)]=new Cesium[(_0x47b7ac(0x1f6))](),this[_0x47b7ac(0x1fa)]=undefined,this[_0x47b7ac(0x1e2)]=undefined,this[_0x47b7ac(0x1e7)]=undefined,this['points']=undefined,this[_0x47b7ac(0x203)]=undefined;};Object[_0x2a9222(0x207)](DrawHandler[_0x2a9222(0x1e1)],{'drawEvt':{'get':function(){const _0xd70e15=_0x2a9222;return this[_0xd70e15(0x20c)];}},'activeEvt':{'get':function(){return this['_activeEvt'];}}}),DrawHandler[_0x2a9222(0x1e1)][_0x2a9222(0x1d9)]=function(){const _0x2b7ee2=_0x2a9222;if(this[_0x2b7ee2(0x1d5)]===!![])return;this[_0x2b7ee2(0x1d5)]=!![];let _0x2141ee=this;this[_0x2b7ee2(0x1cf)][_0x2b7ee2(0x1dd)](function(_0x544e82){clickHandler(_0x544e82,_0x2141ee);},Cesium[_0x2b7ee2(0x1d8)][_0x2b7ee2(0x1c3)]),this['handler']['setInputAction'](function(_0x94b486){moveHandler(_0x94b486,_0x2141ee);},Cesium['ScreenSpaceEventType']['MOUSE_MOVE']),this[_0x2b7ee2(0x1cf)][_0x2b7ee2(0x1dd)](function(_0x806754){rclkHandler(_0x806754,_0x2141ee);},Cesium[_0x2b7ee2(0x1d8)][_0x2b7ee2(0x1f5)]),this[_0x2b7ee2(0x1fb)][_0x2b7ee2(0x1da)](!![]);},DrawHandler[_0x2a9222(0x1e1)]['deactivate']=function(){const _0x9d6956=_0x2a9222;this[_0x9d6956(0x1d5)]=![],this['isDrawing']=![],this[_0x9d6956(0x1cf)][_0x9d6956(0x1d3)](Cesium['ScreenSpaceEventType'][_0x9d6956(0x1c3)]),this['handler'][_0x9d6956(0x1d3)](Cesium[_0x9d6956(0x1d8)][_0x9d6956(0x1cb)]),this['handler']['removeInputAction'](Cesium['ScreenSpaceEventType'][_0x9d6956(0x1f5)]),this['activeEvt'][_0x9d6956(0x1da)](![]);},DrawHandler[_0x2a9222(0x1e1)][_0x2a9222(0x1f4)]=function(){const _0x5d0907=_0x2a9222;this['deactivate'](),this[_0x5d0907(0x1fa)]&&(this[_0x5d0907(0x1fa)][_0x5d0907(0x1fe)](),this[_0x5d0907(0x1d1)]['scene']['primitives'][_0x5d0907(0x1dc)](this['polylines']),this[_0x5d0907(0x1fa)]=undefined),this['polygon']&&(this[_0x5d0907(0x1d1)][_0x5d0907(0x1d6)][_0x5d0907(0x1dc)](this[_0x5d0907(0x1e7)]),this[_0x5d0907(0x1e7)]=undefined),this[_0x5d0907(0x1df)]&&(this[_0x5d0907(0x1df)][_0x5d0907(0x1fe)](),this[_0x5d0907(0x1d1)]['scene'][_0x5d0907(0x209)][_0x5d0907(0x1dc)](this[_0x5d0907(0x1df)]),this[_0x5d0907(0x1df)]=undefined);};function clickHandler(_0xa12d7a,_0xac9c71){const _0x1055aa=_0x2a9222;let _0x32d51d=_0xac9c71;if(_0x32d51d&&_0x32d51d[_0x1055aa(0x1d5)]){let _0x48d53a=_0x32d51d['viewer'][_0x1055aa(0x1db)];if(!_0x48d53a[_0x1055aa(0x1cd)]){console['log'](_0x1055aa(0x1d0));return;}let _0x474c55=_0x48d53a['pickPosition'](_0xa12d7a[_0x1055aa(0x1c6)]);if(_0x474c55){if(!_0x32d51d[_0x1055aa(0x1e0)]){_0x32d51d[_0x1055aa(0x1e0)]=!![];switch(_0x32d51d[_0x1055aa(0x1ca)]){case _0x5dbf28[_0x1055aa(0x1c7)]:startDrawPoint(_0x474c55,_0x32d51d);break;case _0x5dbf28[_0x1055aa(0x1ea)]:startDrawLine(_0x474c55,_0x32d51d);break;case _0x5dbf28[_0x1055aa(0x20e)]:startDrawPolygon(_0x474c55,_0x32d51d);break;default:break;}}else{let _0x3e20c4=new Cesium[(_0x1055aa(0x1cc))](_0xa12d7a['position']['x'],_0xa12d7a[_0x1055aa(0x1c6)]['y']);switch(_0x32d51d[_0x1055aa(0x1ca)]){case _0x5dbf28['Line']:processLine(_0x3e20c4,_0x32d51d,!![]);break;case _0x5dbf28['Polygon']:processPolygon(_0x3e20c4,_0x32d51d,!![]);break;default:break;}}}}}function startDrawPoint(_0x46d762,_0x1c4c21){const _0x63b0b0=_0x2a9222;let _0x3b2543=_0x1c4c21;!_0x3b2543[_0x63b0b0(0x1df)]?(_0x3b2543[_0x63b0b0(0x1df)]=new Cesium[(_0x63b0b0(0x206))](),_0x3b2543[_0x63b0b0(0x203)]=_0x3b2543[_0x63b0b0(0x1df)][_0x63b0b0(0x1fd)]({'position':_0x46d762,'pixelSize':0xa,'color':Cesium[_0x63b0b0(0x1fc)][_0x63b0b0(0x1ee)]}),_0x3b2543[_0x63b0b0(0x1d1)]['scene']['primitives'][_0x63b0b0(0x1fd)](_0x3b2543['points'])):_0x3b2543[_0x63b0b0(0x203)]['position']=_0x46d762,_0x3b2543['deactivate'](),_0x3b2543[_0x63b0b0(0x204)][_0x63b0b0(0x1da)]({'object':_0x3b2543[_0x63b0b0(0x203)]});}function startDrawLine(_0x11a1b2,_0x48b19c){const _0x3e1ad1=_0x2a9222;let _0x437111=_0x48b19c;!_0x437111[_0x3e1ad1(0x1fa)]?(_0x437111[_0x3e1ad1(0x1fa)]=new Cesium['PolylineCollection'](),_0x437111[_0x3e1ad1(0x1e2)]=_0x437111[_0x3e1ad1(0x1fa)][_0x3e1ad1(0x1fd)]({'width':0x2,'positions':[_0x11a1b2,_0x11a1b2],'material':Cesium[_0x3e1ad1(0x1f3)][_0x3e1ad1(0x201)](Cesium['Material'][_0x3e1ad1(0x1f1)],{'color':Cesium['Color'][_0x3e1ad1(0x205)](_0x3e1ad1(0x1e5))})}),_0x437111[_0x3e1ad1(0x1d1)][_0x3e1ad1(0x1db)]['primitives'][_0x3e1ad1(0x1fd)](_0x437111[_0x3e1ad1(0x1fa)])):(_0x437111[_0x3e1ad1(0x1e2)][_0x3e1ad1(0x1e6)]=!![],_0x437111['polyline']['positions']=[_0x11a1b2,_0x11a1b2]);}function startDrawPolygon(_0xcb972a,_0x2694e2){const _0x3bdf91=_0x2a9222;let _0x41f506=_0x2694e2;!_0x41f506[_0x3bdf91(0x1fa)]?(_0x41f506[_0x3bdf91(0x1fa)]=new Cesium[(_0x3bdf91(0x1e3))](),_0x41f506[_0x3bdf91(0x1e2)]=_0x41f506[_0x3bdf91(0x1fa)][_0x3bdf91(0x1fd)]({'id':_0x3bdf91(0x200)+Math[_0x3bdf91(0x1d7)](),'width':0x2,'positions':[_0xcb972a,_0xcb972a],'material':Cesium[_0x3bdf91(0x1f3)][_0x3bdf91(0x201)](Cesium[_0x3bdf91(0x1f3)][_0x3bdf91(0x1f1)],{'color':Cesium[_0x3bdf91(0x1fc)][_0x3bdf91(0x205)](_0x3bdf91(0x1e5))}),'loop':!![]}),_0x41f506[_0x3bdf91(0x1d1)][_0x3bdf91(0x1db)][_0x3bdf91(0x209)][_0x3bdf91(0x1fd)](_0x41f506[_0x3bdf91(0x1fa)])):(_0x41f506[_0x3bdf91(0x1e2)][_0x3bdf91(0x1e6)]=!![],_0x41f506[_0x3bdf91(0x1e2)][_0x3bdf91(0x1f0)]=[_0xcb972a,_0xcb972a],_0x41f506[_0x3bdf91(0x1e7)]&&(_0x41f506[_0x3bdf91(0x1e7)][_0x3bdf91(0x1e6)]=![]));}function moveHandler(_0x27c315,_0x4b0e75){const _0x18fa93=_0x2a9222;let _0x4d54de=_0x4b0e75;if(_0x4d54de&&_0x4d54de['active']&&_0x4d54de[_0x18fa93(0x1e0)]){let _0x574fd1=new Cesium[(_0x18fa93(0x1cc))](_0x27c315[_0x18fa93(0x1ef)]['x'],_0x27c315[_0x18fa93(0x1ef)]['y']);switch(_0x4d54de['mode']){case _0x5dbf28['Line']:processLine(_0x574fd1,_0x4d54de,![]);break;case _0x5dbf28[_0x18fa93(0x20e)]:processPolygon(_0x574fd1,_0x4d54de,![]);break;default:break;}}_0x4d54de[_0x18fa93(0x1f7)][_0x18fa93(0x1da)](new Cesium[(_0x18fa93(0x1cc))](_0x27c315['endPosition']['x'],_0x27c315[_0x18fa93(0x1ef)]['y']));}function processLine(_0x2713d1,_0x4f6470,_0x1813ab){const _0x3af633=_0x2a9222;let _0x13461a=_0x4f6470,_0x4f87e1=_0x13461a[_0x3af633(0x1d1)]['scene'],_0x3540a8=_0x4f87e1[_0x3af633(0x1c8)](_0x2713d1);if(!_0x3540a8)return;let _0x4d2be8=_0x13461a['polyline'][_0x3af633(0x1f0)],_0x584065=_0x4d2be8[_0x3af633(0x1c1)];_0x1813ab?_0x4d2be8[_0x584065]=_0x3540a8:_0x4d2be8[_0x584065-0x1]=_0x3540a8,_0x13461a[_0x3af633(0x1e2)][_0x3af633(0x1f0)]=_0x4d2be8;}function processPolygon(_0x1282d3,_0x1c5319,_0x35d0e1){const _0x4a688e=_0x2a9222;let _0x3482ab=_0x1c5319,_0xac7511=_0x3482ab[_0x4a688e(0x1d1)][_0x4a688e(0x1db)],_0x4c64b1=_0xac7511['pickPosition'](_0x1282d3);if(!_0x4c64b1)return;let _0x151d33=_0x3482ab['polyline'][_0x4a688e(0x1f0)],_0x5b7df0=_0x151d33[_0x4a688e(0x1c1)];_0x35d0e1?_0x151d33[_0x5b7df0]=_0x4c64b1:_0x151d33[_0x5b7df0-0x1]=_0x4c64b1,_0x3482ab[_0x4a688e(0x1e2)][_0x4a688e(0x1f0)]=_0x151d33;}function rclkHandler(_0x16169c,_0x546f41){const _0x31f1c0=_0x2a9222;let _0x55006b=_0x546f41;if(_0x55006b&&_0x55006b[_0x31f1c0(0x1d5)]&&_0x55006b[_0x31f1c0(0x1e0)]){_0x55006b[_0x31f1c0(0x1c5)]();if(!_0x55006b[_0x31f1c0(0x1e2)])return;_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)]=_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)][_0x31f1c0(0x208)](0x0,_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)]['length']-0x1);if(_0x55006b[_0x31f1c0(0x1ca)]===_0x5dbf28[_0x31f1c0(0x20e)]){if(_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)][_0x31f1c0(0x1c1)]<0x3){_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)][_0x31f1c0(0x1c1)]=0x0;return;}let _0x44bb49=[]['concat'](_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)]);!_0x55006b[_0x31f1c0(0x1e7)]&&(_0x55006b['polygon']=_0x55006b[_0x31f1c0(0x1d1)][_0x31f1c0(0x1d6)][_0x31f1c0(0x1fd)]({'polygon':{'hierarchy':{'positions':_0x44bb49},'material':Cesium[_0x31f1c0(0x1fc)][_0x31f1c0(0x1c9)][_0x31f1c0(0x1f8)](0.5),'perPositionHeight':_0xc8ba86[_0x31f1c0(0x202)]===_0x55006b[_0x31f1c0(0x1c2)]}})),_0x55006b[_0x31f1c0(0x1e7)]['polygon'][_0x31f1c0(0x20b)]=_0x44bb49,_0x55006b['polygon'][_0x31f1c0(0x1f0)]=_0x44bb49,_0x55006b['polygon'][_0x31f1c0(0x1e6)]=!![],_0x55006b['drawEvt'][_0x31f1c0(0x1da)]({'object':_0x55006b['polygon']});}else{if(_0x55006b['mode']===_0x5dbf28[_0x31f1c0(0x1ea)]){let _0x36e932=[];for(let _0x2177e1=0x0,_0x1dde72=_0x55006b[_0x31f1c0(0x1e2)][_0x31f1c0(0x1f0)]['length'];_0x2177e1<_0x1dde72;_0x2177e1++){_0x36e932['push'](Cesium[_0x31f1c0(0x20a)][_0x31f1c0(0x1bf)](_0x55006b['polyline'][_0x31f1c0(0x1f0)][_0x2177e1]));}(_0x55006b[_0x31f1c0(0x1c2)]===_0xc8ba86[_0x31f1c0(0x1d2)]||_0x55006b[_0x31f1c0(0x1c2)]===_0xc8ba86['Ground'])&&(!_0x55006b[_0x31f1c0(0x1ec)]&&(_0x55006b[_0x31f1c0(0x1ec)]=[]),_0x55006b[_0x31f1c0(0x1ec)][_0x31f1c0(0x1c4)](_0x55006b[_0x31f1c0(0x1d1)][_0x31f1c0(0x1d6)][_0x31f1c0(0x1fd)]({'polyline':{'positions':_0x36e932,'width':0x5,'material':Cesium[_0x31f1c0(0x1fc)]['fromCssColorString']('#51ff00'),'clampToGround':!![]}})),_0x55006b[_0x31f1c0(0x1e2)]['show']=![]),_0x55006b[_0x31f1c0(0x204)][_0x31f1c0(0x1da)]({'object':_0x55006b[_0x31f1c0(0x1e2)]});}}}}export default DrawHandler;