const _0x598c=['_minimumPriority','1614433AjxXlw','READY','updatePriority','depth','lodRangeMode','_requestTiles','sort','priorityHolder','requestedFrame','contentState','472415qmVMRM','_processTiles','push','MAX_VALUE','selected','_maximumPriority','processFrame','lodRangeData','pixel','1fcqfBl','pop','defined','children','26euQAyT','distanceToCamera','updateVisibility','touch','wasMinPriorityChild','1576127ulusEv','lodRangeScale','17PNyBNe','_stack','isLeafTile','max','renderable','39983yPYWwM','touchedFrame','prototype','distance','629788kqIhPc','frameNumber','16007ZgbsCe','Pixel','refines','isRootTile','_selectedTiles','parent','visible','893147GbbmzT','length','foveatedFactor','shouldSelect','selectedFrame','centerZDepth','UNLOADED','_cache','min','updatedVisibilityFrame'];const _0x4e2377=_0x181b;(function(_0x416fce,_0x50a73b){const _0x3f6a56=_0x181b;while(!![]){try{const _0x4371be=-parseInt(_0x3f6a56(0x76))+-parseInt(_0x3f6a56(0x80))+parseInt(_0x3f6a56(0x9f))*parseInt(_0x3f6a56(0x8d))+parseInt(_0x3f6a56(0x92))+parseInt(_0x3f6a56(0x9d))*-parseInt(_0x3f6a56(0x89))+-parseInt(_0x3f6a56(0x99))*-parseInt(_0x3f6a56(0x94))+parseInt(_0x3f6a56(0x6b));if(_0x4371be===_0x50a73b)break;else _0x416fce['push'](_0x416fce['shift']());}catch(_0x20453d){_0x416fce['push'](_0x416fce['shift']());}}}(_0x598c,0xcf293));import _0x273003 from'./Enum/ContentState.js';import _0x310b4c from'./Enum/RangeMode.js';function S3MLayerScheduler(){const _0x478369=_0x181b;this[_0x478369(0x95)]=[];}function sortComparator(_0xe1655e,_0x3c014b){const _0x1d8f43=_0x181b;if(_0x3c014b[_0x1d8f43(0x8e)]===0x0&&_0xe1655e[_0x1d8f43(0x8e)]===0x0)return _0x3c014b[_0x1d8f43(0x70)]-_0xe1655e['centerZDepth'];return _0x3c014b[_0x1d8f43(0x8e)]-_0xe1655e[_0x1d8f43(0x8e)];}function updateChildren(_0xabc508,_0x56419c,_0x19d040,_0x174659){const _0x184af3=_0x181b;let _0x3cbfd5,_0x3e7a49=_0x56419c[_0x184af3(0x8c)],_0x47e7cc=_0x3e7a49[_0x184af3(0x6c)];for(_0x3cbfd5=0x0;_0x3cbfd5<_0x47e7cc;++_0x3cbfd5){updateTile(_0x174659,_0xabc508,_0x3e7a49[_0x3cbfd5]);}_0x3e7a49[_0x184af3(0x7c)](sortComparator);let _0x58b564=!![],_0x56ea88=![],_0x5f07a3=-0x1,_0x5adc55=Number[_0x184af3(0x83)],_0x16fdbb=!_0x56419c[_0x184af3(0xa2)];for(_0x3cbfd5=0x0;_0x3cbfd5<_0x47e7cc;++_0x3cbfd5){let _0x46ac5d=_0x3e7a49[_0x3cbfd5];_0x46ac5d['foveatedFactor']<_0x5adc55&&(_0x5f07a3=_0x3cbfd5,_0x5adc55=_0x46ac5d['foveatedFactor']);_0x46ac5d[_0x184af3(0xa5)]?(_0x19d040[_0x184af3(0x82)](_0x46ac5d),_0x56ea88=!![]):(loadTile(_0xabc508,_0x46ac5d,_0x174659),touchTile(_0xabc508,_0x46ac5d,_0x174659));let _0x1cb05c=_0x46ac5d[_0x184af3(0x98)];_0x16fdbb&&(_0x58b564=_0x58b564&&_0x1cb05c);}!_0x56ea88&&(_0x58b564=![]);if(_0x5f07a3!==-0x1){let _0x38f1ed=_0x3e7a49[_0x5f07a3];_0x38f1ed[_0x184af3(0x91)]=!![];let _0x12d30a=(_0x56419c[_0x184af3(0x91)]||_0x56419c[_0x184af3(0xa2)])&&_0x5adc55<=_0x56419c['priorityHolder'][_0x184af3(0x6d)]?_0x56419c[_0x184af3(0x7d)]:_0x56419c;_0x12d30a['foveatedFactor']=Math['min'](_0x38f1ed[_0x184af3(0x6d)],_0x12d30a[_0x184af3(0x6d)]),_0x12d30a['distanceToCamera']=Math[_0x184af3(0x73)](_0x38f1ed[_0x184af3(0x8e)],_0x12d30a['distanceToCamera']);for(_0x3cbfd5=0x0;_0x3cbfd5<_0x47e7cc;++_0x3cbfd5){let _0xbb1efc=_0x3e7a49[_0x3cbfd5];_0xbb1efc[_0x184af3(0x7d)]=_0x12d30a;}}return _0x58b564;}function _0x181b(_0x343635,_0x3c696){_0x343635=_0x343635-0x6b;let _0x598c30=_0x598c[_0x343635];return _0x598c30;}function selectTile(_0x1ec130,_0x227982,_0x2ca205){const _0x3005e5=_0x181b;if(_0x227982[_0x3005e5(0x6f)]===_0x2ca205[_0x3005e5(0x9e)]||!_0x227982[_0x3005e5(0x98)])return;_0x1ec130[_0x3005e5(0xa3)][_0x3005e5(0x82)](_0x227982),_0x227982[_0x3005e5(0x6f)]=_0x2ca205[_0x3005e5(0x9e)];}function loadTile(_0x5be5b0,_0x358604,_0x118c5b){const _0x4b9fd4=_0x181b;if(_0x358604[_0x4b9fd4(0x7e)]===_0x118c5b[_0x4b9fd4(0x9e)]||_0x358604[_0x4b9fd4(0x7f)]!==_0x273003[_0x4b9fd4(0x71)])return;_0x5be5b0['_requestTiles'][_0x4b9fd4(0x82)](_0x358604),_0x358604[_0x4b9fd4(0x7e)]=_0x118c5b[_0x4b9fd4(0x9e)];}function processTile(_0xd7445,_0x571c7b,_0x46879b){const _0x44fdda=_0x181b;if(_0x571c7b[_0x44fdda(0x86)]===_0x46879b[_0x44fdda(0x9e)]||_0x571c7b[_0x44fdda(0xa2)]||_0x571c7b[_0x44fdda(0x7f)]!==_0x273003[_0x44fdda(0x77)]||_0x571c7b[_0x44fdda(0x98)])return;_0x571c7b[_0x44fdda(0x86)]=_0x46879b['frameNumber'],_0xd7445[_0x44fdda(0x81)][_0x44fdda(0x82)](_0x571c7b);}function touchTile(_0x1af58f,_0x5cfee5,_0x43e5e7){const _0x112d71=_0x181b;if(_0x5cfee5[_0x112d71(0x9a)]===_0x43e5e7[_0x112d71(0x9e)])return;_0x1af58f[_0x112d71(0x72)][_0x112d71(0x90)](_0x5cfee5),_0x5cfee5[_0x112d71(0x9a)]=_0x43e5e7['frameNumber'];}function updateVisibility(_0x1fb5a0,_0x165826,_0x5b547d){const _0x2d99b6=_0x181b;if(_0x165826[_0x2d99b6(0x74)]===_0x5b547d[_0x2d99b6(0x9e)])return;_0x165826[_0x2d99b6(0x74)]=_0x5b547d[_0x2d99b6(0x9e)],_0x165826[_0x2d99b6(0x8f)](_0x5b547d,_0x1fb5a0);}function updateTileVisibility(_0x30cc31,_0x30e8b5,_0x46d8dc){updateVisibility(_0x30e8b5,_0x46d8dc,_0x30cc31);}function updateMinimumMaximumPriority(_0x1b13a2,_0x1c44cd){const _0x12d5d3=_0x181b;_0x1b13a2[_0x12d5d3(0x85)][_0x12d5d3(0x9c)]=Math[_0x12d5d3(0x97)](_0x1c44cd[_0x12d5d3(0x8e)],_0x1b13a2[_0x12d5d3(0x85)]['distance']),_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x9c)]=Math[_0x12d5d3(0x73)](_0x1c44cd['distanceToCamera'],_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x9c)]),_0x1b13a2[_0x12d5d3(0x85)][_0x12d5d3(0x79)]=Math[_0x12d5d3(0x97)](_0x1c44cd[_0x12d5d3(0x79)],_0x1b13a2['_maximumPriority'][_0x12d5d3(0x79)]),_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x79)]=Math['min'](_0x1c44cd[_0x12d5d3(0x79)],_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x79)]),_0x1b13a2['_maximumPriority']['foveatedFactor']=Math[_0x12d5d3(0x97)](_0x1c44cd[_0x12d5d3(0x6d)],_0x1b13a2[_0x12d5d3(0x85)][_0x12d5d3(0x6d)]),_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x6d)]=Math[_0x12d5d3(0x73)](_0x1c44cd['foveatedFactor'],_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x6d)]),_0x1b13a2[_0x12d5d3(0x85)]['pixel']=Math[_0x12d5d3(0x97)](_0x1c44cd[_0x12d5d3(0x88)],_0x1b13a2[_0x12d5d3(0x85)][_0x12d5d3(0x88)]),_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x88)]=Math[_0x12d5d3(0x73)](_0x1c44cd[_0x12d5d3(0x88)],_0x1b13a2[_0x12d5d3(0x75)][_0x12d5d3(0x88)]);}function updateTile(_0x431112,_0x56a9c6,_0x4709b2){const _0x12880f=_0x181b;updateTileVisibility(_0x431112,_0x56a9c6,_0x4709b2),_0x4709b2[_0x12880f(0x91)]=![],_0x4709b2['priorityHolder']=_0x4709b2,updateMinimumMaximumPriority(_0x56a9c6,_0x4709b2),_0x4709b2[_0x12880f(0x6e)]=![],_0x4709b2[_0x12880f(0x84)]=![];}function canTraverse(_0x564d30,_0x1f5b63){const _0x3d1b65=_0x181b;if(_0x1f5b63[_0x3d1b65(0xa2)])return!![];if(_0x1f5b63[_0x3d1b65(0x8c)][_0x3d1b65(0x6c)]===0x0||_0x1f5b63[_0x3d1b65(0x96)])return![];if(_0x1f5b63[_0x3d1b65(0x7a)]===_0x310b4c[_0x3d1b65(0xa0)])return _0x1f5b63['pixel']/_0x564d30[_0x3d1b65(0x93)]>_0x1f5b63[_0x3d1b65(0x87)];return _0x1f5b63['distanceToCamera']*_0x564d30['lodRangeScale']<_0x1f5b63[_0x3d1b65(0x87)];}function traversal(_0x1cc6be,_0x36f097,_0x2d4cb3){const _0x56bd3d=_0x181b;while(_0x36f097[_0x56bd3d(0x6c)]){let _0x1c6f37=_0x36f097[_0x56bd3d(0x8a)](),_0x524ff0=_0x1c6f37[_0x56bd3d(0xa4)],_0x3cfb85=!Cesium[_0x56bd3d(0x8b)](_0x524ff0)||_0x524ff0['refines'],_0x5d35a9=![];canTraverse(_0x1cc6be,_0x1c6f37)&&(_0x5d35a9=updateChildren(_0x1cc6be,_0x1c6f37,_0x36f097,_0x2d4cb3)&&_0x3cfb85);let _0x2eab57=!_0x5d35a9&&_0x3cfb85;loadTile(_0x1cc6be,_0x1c6f37,_0x2d4cb3),processTile(_0x1cc6be,_0x1c6f37,_0x2d4cb3),_0x2eab57&&selectTile(_0x1cc6be,_0x1c6f37,_0x2d4cb3),touchTile(_0x1cc6be,_0x1c6f37,_0x2d4cb3),_0x1c6f37[_0x56bd3d(0xa1)]=_0x5d35a9;}}function selectRootTiles(_0x81256e,_0x4ccab2,_0x385e50){const _0x4e34fc=_0x181b;_0x4ccab2[_0x4e34fc(0x6c)]=0x0;for(let _0x528c5c=0x0,_0x57e8f7=_0x81256e['_rootTiles']['length'];_0x528c5c<_0x57e8f7;_0x528c5c++){let _0x1277c8=_0x81256e['_rootTiles'][_0x528c5c];updateTile(_0x385e50,_0x81256e,_0x1277c8);if(!_0x1277c8[_0x4e34fc(0xa5)])continue;_0x4ccab2['push'](_0x1277c8);}}function updatePriority(_0x299749,_0x8ba94f){const _0x1bb47f=_0x181b;let _0x270827=_0x299749[_0x1bb47f(0x7b)],_0x2d7af3=_0x270827[_0x1bb47f(0x6c)];for(let _0x13b1bc=0x0;_0x13b1bc<_0x2d7af3;++_0x13b1bc){_0x270827[_0x13b1bc][_0x1bb47f(0x78)](_0x299749,_0x8ba94f);}}S3MLayerScheduler[_0x4e2377(0x9b)]['schedule']=function(_0x198486,_0x1a3665){const _0x2bd72b=_0x4e2377;let _0x14051a=this[_0x2bd72b(0x95)];selectRootTiles(_0x198486,_0x14051a,_0x1a3665),traversal(_0x198486,_0x14051a,_0x1a3665),updatePriority(_0x198486,_0x1a3665);};export default S3MLayerScheduler;