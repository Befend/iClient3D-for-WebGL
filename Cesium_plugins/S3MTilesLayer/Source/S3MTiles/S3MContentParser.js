const _0x563c=['wrapT','transparentsorting','REPEAT','transform','fromArray','addTexture','CLAMP_TO_EDGE','center','hasOwnProperty','isTexBlock','verticesCount','ambient','81532xirAkg','sphere','2ZlteQo','modelMatrix','vertexPackage','geodes','TextureWrap','unpack','vertexAttributes','BoundingSphere','buffer','arrayBufferView','instanceIndex','boundingSphere','childTile','wrapS','textureCache','push','matrix','vertCompressConstant','fromPoints','specular','clone','156517lFoKre','399UoMZXW','673FlUvnk','edgeGeometry','arrIndexPackage','materialCode','Cartesian3','geoMap','texmodmatrix','groupNode','81802sSifSv','rangeMode','length','shininess','typedArray','rangeDataList','add','byteLength','texturePackage','textures','boundingVolume','specularColor','byteOffset','bTransparentSorting','SVC_Vertex','geoPackage','20833ERXHQx','defined','compressOptions','textureunitstates','textureunitstate','2503nJqRnK','parse','7BrdUkL','1zgaOWj','texMatrix','materials','material','distance','fromBoundingSpheres','39CnlfRA','Color','347wsiMew','Matrix4','radius','rangeList','addressmode','minVerticesValue'];function _0xa823(_0x45ed30,_0x287cf9){_0x45ed30=_0x45ed30-0x1ba;let _0x563c21=_0x563c[_0x45ed30];return _0x563c21;}const _0xc533ad=_0xa823;(function(_0xa15604,_0x526a78){const _0x1d8843=_0xa823;while(!![]){try{const _0x6c8b32=-parseInt(_0x1d8843(0x1ec))+-parseInt(_0x1d8843(0x1d3))+parseInt(_0x1d8843(0x1bf))*-parseInt(_0x1d8843(0x209))+parseInt(_0x1d8843(0x1ea))*-parseInt(_0x1d8843(0x20c))+-parseInt(_0x1d8843(0x1d5))*-parseInt(_0x1d8843(0x1f4))+-parseInt(_0x1d8843(0x20b))*-parseInt(_0x1d8843(0x204))+-parseInt(_0x1d8843(0x1eb))*-parseInt(_0x1d8843(0x1c1));if(_0x6c8b32===_0x526a78)break;else _0xa15604['push'](_0xa15604['shift']());}catch(_0x1f3d86){_0xa15604['push'](_0xa15604['shift']());}}}(_0x563c,0x1b3bd));import _0x30d2ea from'./DDSTexture.js';import _0x49725a from'./MaterialPass.js';import _0xf429ff from'./Factory/S3MContentFactory.js';import _0x225e7d from'./Enum/VertexCompressOption.js';function S3MContentParser(){}function parseMaterial(_0x175f08,_0x28f7ff,_0x49ffce){const _0x55cda2=_0xa823;let _0x12eb02={},_0xc0da3d=_0x28f7ff[_0x55cda2(0x1bb)]['material'];for(let _0x56aa00=0x0,_0x9f93d0=_0xc0da3d['length'];_0x56aa00<_0x9f93d0;_0x56aa00++){let _0x5ee511=_0xc0da3d[_0x56aa00][_0x55cda2(0x1bc)],_0x3f068d=_0x5ee511['id'],_0x597414=new _0x49725a();_0x12eb02[_0x3f068d]=_0x597414;let _0x445e4b=_0x5ee511[_0x55cda2(0x1d2)];_0x597414['ambientColor']=new Cesium['Color'](_0x445e4b['r'],_0x445e4b['g'],_0x445e4b['b'],_0x445e4b['a']);let _0x5f203a=_0x5ee511['diffuse'];_0x597414['diffuseColor']=new Cesium['Color'](_0x5f203a['r'],_0x5f203a['g'],_0x5f203a['b'],_0x5f203a['a']);let _0x3e4ad3=_0x5ee511[_0x55cda2(0x1e8)];_0x597414[_0x55cda2(0x1ff)]=new Cesium[(_0x55cda2(0x1c0))](_0x3e4ad3['r'],_0x3e4ad3['g'],_0x3e4ad3['b'],_0x3e4ad3['a']),_0x597414[_0x55cda2(0x1f7)]=_0x5ee511['shininess'],_0x597414[_0x55cda2(0x201)]=_0x5ee511[_0x55cda2(0x1c8)];let _0x2308af=_0x5ee511[_0x55cda2(0x207)],_0x52aa4e=_0x2308af[_0x55cda2(0x1f6)];for(let _0x28f021=0x0;_0x28f021<_0x52aa4e;_0x28f021++){let _0x500855=_0x2308af[_0x28f021][_0x55cda2(0x208)],_0x2dc444=_0x500855['id'],_0x4aa4e5=_0x500855[_0x55cda2(0x1c5)]['u']===0x0?Cesium[_0x55cda2(0x1d9)][_0x55cda2(0x1c9)]:Cesium[_0x55cda2(0x1d9)][_0x55cda2(0x1cd)],_0x408a37=_0x500855[_0x55cda2(0x1c5)]['v']===0x0?Cesium[_0x55cda2(0x1d9)][_0x55cda2(0x1c9)]:Cesium['TextureWrap'][_0x55cda2(0x1cd)];_0x597414[_0x55cda2(0x1ba)]=Cesium[_0x55cda2(0x1c2)][_0x55cda2(0x1da)](_0x500855[_0x55cda2(0x1f2)]);let _0x50d95b=_0x28f7ff[_0x55cda2(0x1fc)][_0x2dc444];if(Cesium[_0x55cda2(0x205)](_0x50d95b)&&_0x50d95b[_0x55cda2(0x1de)][_0x55cda2(0x1fb)]>0x0){_0x50d95b[_0x55cda2(0x1e2)]=_0x4aa4e5,_0x50d95b[_0x55cda2(0x1c7)]=_0x408a37;let _0xac2463=_0x49ffce['fileName']+_0x2dc444,_0x4b6453=_0x175f08[_0x55cda2(0x1e3)]['getTexture'](_0xac2463);!Cesium[_0x55cda2(0x205)](_0x4b6453)&&(_0x50d95b[_0x55cda2(0x1d0)]=![],_0x4b6453=new _0x30d2ea(_0x175f08,_0x2dc444,_0x50d95b),_0x175f08[_0x55cda2(0x1e3)][_0x55cda2(0x1cc)](_0xac2463,_0x4b6453)),_0x597414[_0x55cda2(0x1fd)][_0x55cda2(0x1e4)](_0x4b6453);}}}return _0x12eb02;}function calcBoundingVolumeForNormal(_0xd0e3ac,_0x30abf0){const _0x1cd0d1=_0xa823;let _0x2b1675=new Cesium[(_0x1cd0d1(0x1dc))](),_0x3ecdb4=new Cesium['Cartesian3'](),_0x18879e=_0xd0e3ac[_0x1cd0d1(0x1db)][0x0],_0x7bcb3e=_0x18879e['componentsPerAttribute'],_0x3f47e5=Cesium[_0x1cd0d1(0x205)](_0xd0e3ac[_0x1cd0d1(0x206)])&&(_0xd0e3ac[_0x1cd0d1(0x206)]&_0x225e7d[_0x1cd0d1(0x202)])===_0x225e7d[_0x1cd0d1(0x202)],_0xf94408=0x1,_0x310210,_0x21ad3a;_0x3f47e5?(_0xf94408=_0xd0e3ac[_0x1cd0d1(0x1e6)],_0x310210=new Cesium[(_0x1cd0d1(0x1f0))](_0xd0e3ac[_0x1cd0d1(0x1c6)]['x'],_0xd0e3ac[_0x1cd0d1(0x1c6)]['y'],_0xd0e3ac['minVerticesValue']['z']),_0x21ad3a=new Uint16Array(_0x18879e[_0x1cd0d1(0x1f8)][_0x1cd0d1(0x1dd)],_0x18879e[_0x1cd0d1(0x1f8)][_0x1cd0d1(0x200)],_0x18879e[_0x1cd0d1(0x1f8)][_0x1cd0d1(0x1fb)]/0x2)):_0x21ad3a=new Float32Array(_0x18879e['typedArray'][_0x1cd0d1(0x1dd)],_0x18879e[_0x1cd0d1(0x1f8)]['byteOffset'],_0x18879e[_0x1cd0d1(0x1f8)][_0x1cd0d1(0x1fb)]/0x4);let _0x2b61c6=[];for(let _0x144256=0x0;_0x144256<_0xd0e3ac[_0x1cd0d1(0x1d1)];_0x144256++){Cesium[_0x1cd0d1(0x1f0)][_0x1cd0d1(0x1cb)](_0x21ad3a,_0x7bcb3e*_0x144256,_0x3ecdb4),_0x3f47e5&&(_0x3ecdb4=Cesium[_0x1cd0d1(0x1f0)]['multiplyByScalar'](_0x3ecdb4,_0xf94408,_0x3ecdb4),_0x3ecdb4=Cesium[_0x1cd0d1(0x1f0)][_0x1cd0d1(0x1fa)](_0x3ecdb4,_0x310210,_0x3ecdb4)),_0x2b61c6[_0x1cd0d1(0x1e4)](Cesium['Cartesian3'][_0x1cd0d1(0x1e9)](_0x3ecdb4));}return Cesium['BoundingSphere'][_0x1cd0d1(0x1e7)](_0x2b61c6,_0x2b1675),Cesium['BoundingSphere'][_0x1cd0d1(0x1ca)](_0x2b1675,_0x30abf0,_0x2b1675),_0x2b61c6[_0x1cd0d1(0x1f6)]=0x0,_0x2b1675;}let scratchCenter=new Cesium['Cartesian3']();function calcBoundingVolumeForInstance(_0x5250b9){const _0x146a8d=_0xa823;let _0x2ac6f8=new Cesium['BoundingSphere'](),_0x395ef0=_0x5250b9['instanceBounds'];if(!Cesium['defined'](_0x395ef0))return _0x2ac6f8;let _0x16b7e9=new Cesium[(_0x146a8d(0x1f0))](_0x395ef0[0x0],_0x395ef0[0x1],_0x395ef0[0x2]),_0x456e83=new Cesium['Carteisan3'](_0x395ef0[0x3],_0x395ef0[0x4],_0x395ef0[0x5]),_0x43725b=new Cesium[(_0x146a8d(0x1f0))]['lerp'](_0x16b7e9,_0x456e83,0.5,scratchCenter),_0x3de780=new Cesium['Cartesian3'][(_0x146a8d(0x1bd))](_0x43725b,_0x16b7e9);return _0x2ac6f8[_0x146a8d(0x1ce)]=_0x43725b,_0x2ac6f8[_0x146a8d(0x1c3)]=_0x3de780,_0x2ac6f8;}function calcBoundingVolume(_0x3f8bd3,_0x10d0b0){const _0x4a9106=_0xa823;if(_0x3f8bd3[_0x4a9106(0x1df)]>-0x1)return calcBoundingVolumeForInstance(_0x3f8bd3);return calcBoundingVolumeForNormal(_0x3f8bd3,_0x10d0b0);}function parseGeodes(_0x19e26f,_0x5f5727,_0x373790,_0xce11e3,_0x32ce44){const _0x27144e=_0xa823;let _0x4e2f2e={},_0x18ebb8=_0xce11e3[_0x27144e(0x1d8)];for(let _0x469e4e=0x0,_0x3af6b0=_0x18ebb8[_0x27144e(0x1f6)];_0x469e4e<_0x3af6b0;_0x469e4e++){let _0x3194fd=_0x18ebb8[_0x469e4e],_0x1c4721=_0x3194fd[_0x27144e(0x1e5)],_0x3c4448=Cesium[_0x27144e(0x1c2)]['multiply'](_0x19e26f['modelMatrix'],_0x1c4721,new Cesium[(_0x27144e(0x1c2))]()),_0x5cc0a9;Cesium[_0x27144e(0x205)](_0x32ce44['boundingVolume'])&&(_0x5cc0a9=new Cesium['BoundingSphere'](_0x32ce44[_0x27144e(0x1fe)][_0x27144e(0x1d4)][_0x27144e(0x1ce)],_0x32ce44[_0x27144e(0x1fe)]['sphere'][_0x27144e(0x1c3)]),Cesium[_0x27144e(0x1dc)][_0x27144e(0x1ca)](_0x5cc0a9,_0x19e26f[_0x27144e(0x1d6)],_0x5cc0a9));let _0x7c0561=_0x3194fd['skeletonNames'];for(let _0x92f561=0x0,_0x48c96c=_0x7c0561['length'];_0x92f561<_0x48c96c;_0x92f561++){let _0x5b4f56=_0x7c0561[_0x92f561],_0xb34776=_0x5f5727[_0x27144e(0x203)][_0x5b4f56],_0x3c9f86=_0xb34776[_0x27144e(0x1d7)],_0x2920ab=_0xb34776[_0x27144e(0x1ee)],_0x2ae01c=_0xb34776['pickInfo'],_0x453856;_0x2920ab[_0x27144e(0x1f6)]>0x0&&(_0x453856=_0x373790[_0x2920ab[0x0][_0x27144e(0x1ef)]]);let _0x23a6a0=Cesium[_0x27144e(0x205)](_0x5cc0a9)?_0x5cc0a9:calcBoundingVolume(_0x3c9f86,_0x3c4448);_0x4e2f2e[_0x5b4f56]=_0xf429ff[_0x19e26f['fileType']]({'layer':_0x19e26f,'vertexPackage':_0x3c9f86,'arrIndexPackage':_0x2920ab,'pickInfo':_0x2ae01c,'modelMatrix':_0x3c4448,'geoMatrix':_0x1c4721,'boundingVolume':_0x23a6a0,'material':_0x453856,'edgeGeometry':_0xb34776[_0x27144e(0x1ed)],'geoName':_0x5b4f56});}}if(Object['keys'](_0x4e2f2e)[_0x27144e(0x1f6)]<0x1)return;if(!Cesium[_0x27144e(0x205)](_0x32ce44[_0x27144e(0x1fe)])){let _0x5251b1=[];for(let _0x4f2c57 in _0x4e2f2e){_0x4e2f2e[_0x27144e(0x1cf)](_0x4f2c57)&&_0x5251b1['push'](_0x4e2f2e[_0x4f2c57][_0x27144e(0x1fe)]);}_0x32ce44[_0x27144e(0x1fe)]={'sphere':Cesium[_0x27144e(0x1dc)][_0x27144e(0x1be)](_0x5251b1)};}_0x32ce44['geoMap']=_0x4e2f2e;}function parsePagelods(_0x5a9b1a,_0x3a7e2c,_0x5abc33){const _0x48a7eb=_0xa823;let _0x29261e=_0x3a7e2c[_0x48a7eb(0x1f3)],_0x5441ba=[];for(let _0x434bab=0x0,_0x556be9=_0x29261e['pageLods'][_0x48a7eb(0x1f6)];_0x434bab<_0x556be9;_0x434bab++){let _0x57b12f={},_0x5c3f15=_0x29261e['pageLods'][_0x434bab];_0x57b12f['rangeMode']=_0x5c3f15[_0x48a7eb(0x1f5)],_0x57b12f[_0x48a7eb(0x1f9)]=_0x5c3f15[_0x48a7eb(0x1e1)],_0x57b12f[_0x48a7eb(0x1c4)]=_0x5c3f15[_0x48a7eb(0x1c4)];let _0x3c024f=_0x5c3f15[_0x48a7eb(0x1e0)][_0x48a7eb(0x1ce)],_0x5e901f=_0x5c3f15[_0x48a7eb(0x1e0)][_0x48a7eb(0x1c3)];_0x57b12f[_0x48a7eb(0x1fe)]={'sphere':{'center':new Cesium[(_0x48a7eb(0x1f0))](_0x3c024f['x'],_0x3c024f['y'],_0x3c024f['z']),'radius':_0x5e901f}},parseGeodes(_0x5a9b1a,_0x3a7e2c,_0x5abc33,_0x5c3f15,_0x57b12f),Cesium[_0x48a7eb(0x205)](_0x57b12f[_0x48a7eb(0x1f1)])&&_0x5441ba[_0x48a7eb(0x1e4)](_0x57b12f);}return _0x5441ba;}S3MContentParser[_0xc533ad(0x20a)]=function(_0x47683a,_0x4879b8,_0x312348){const _0x1b00a0=_0xc533ad;if(!Cesium[_0x1b00a0(0x205)](_0x4879b8))return;let _0xbcfdc3=parseMaterial(_0x47683a['context'],_0x4879b8,_0x312348),_0xc3e144=parsePagelods(_0x47683a,_0x4879b8,_0xbcfdc3);return _0xc3e144;};export default S3MContentParser;