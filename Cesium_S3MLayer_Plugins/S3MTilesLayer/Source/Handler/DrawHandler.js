const _0x2f68=['point','43msTJpk','S3mModel','_activeEvt','Material','scene','drawEvt','fromCssColorString','isDrawing','ColorType','polygon','Event','984288GIXyQc','PointPrimitiveCollection','prototype','random','length','positions','_drawEvt','_clampMode','your\x20browser\x20not\x20supported\x20pickPosition!','7806yofInH','raiseEvent','91425iiyYmR','removeAll','#51ff00','Point','canvas','PolylineCollection','active','polyline','defaultValue','MOUSE_MOVE','points','ScreenSpaceEventType','LEFT_CLICK','Line','Ground','removeInputAction','hierarchy','viewer\x20and\x20mode\x20is\x20required!','add','Space','position','Color','ORANGE','polylines','show','WHITE','handler','setInputAction','endPosition','remove','pickPosition','activeEvt','slice','Polygon','clampToGroundPolylines','viewer','entities','mode','Cartesian2','23zaQgtv','withAlpha','130018YIimDi','353296FeweFQ','concat','clone','13687UlyvuS','350966WVIlby','primitives','RIGHT_CLICK','movingEvt','deactivate'];const _0x5c74bc=_0x45a1;(function(_0x5caf18,_0x25e8c7){const _0xaef257=_0x45a1;while(!![]){try{const _0x5d6db4=-parseInt(_0xaef257(0xe5))+-parseInt(_0xaef257(0xe2))*-parseInt(_0xaef257(0xe8))+parseInt(_0xaef257(0xef))*-parseInt(_0xaef257(0x103))+parseInt(_0xaef257(0x105))+-parseInt(_0xaef257(0xe4))+-parseInt(_0xaef257(0xe9))+parseInt(_0xaef257(0xfa));if(_0x5d6db4===_0x25e8c7)break;else _0x5caf18['push'](_0x5caf18['shift']());}catch(_0x56ce45){_0x5caf18['push'](_0x5caf18['shift']());}}}(_0x2f68,0x35da0));import _0x578c4b from'./DrawMode.js';function _0x45a1(_0x5790c2,_0x3128b9){_0x5790c2=_0x5790c2-0xd3;let _0x2f6811=_0x2f68[_0x5790c2];return _0x2f6811;}import _0x403778 from'./ClampMode.js';let DrawHandler=function(_0x158067,_0x46ec32,_0x2d7193){const _0xbf0815=_0x45a1;if(!_0x158067||_0x46ec32===undefined)throw new Cesium['DeveloperError'](_0xbf0815(0x116));this[_0xbf0815(0xd5)]=new Cesium['ScreenSpaceEventHandler'](_0x158067['scene'][_0xbf0815(0x109)]),this['viewer']=_0x158067,this['mode']=_0x46ec32,this['_clampMode']=Cesium[_0xbf0815(0x10d)](_0x2d7193,_0x403778[_0xbf0815(0x118)]),this[_0xbf0815(0xf6)]=![],this[_0xbf0815(0x10b)]=![],this[_0xbf0815(0x100)]=new Cesium[(_0xbf0815(0xf9))](),this[_0xbf0815(0xf1)]=new Cesium[(_0xbf0815(0xf9))](),this[_0xbf0815(0xec)]=new Cesium[(_0xbf0815(0xf9))](),this['polylines']=undefined,this[_0xbf0815(0x10c)]=undefined,this[_0xbf0815(0xf8)]=undefined,this['points']=undefined,this['point']=undefined;};Object['defineProperties'](DrawHandler[_0x5c74bc(0xfc)],{'drawEvt':{'get':function(){const _0x13c921=_0x5c74bc;return this[_0x13c921(0x100)];}},'activeEvt':{'get':function(){return this['_activeEvt'];}}}),DrawHandler['prototype']['activate']=function(){const _0x571efb=_0x5c74bc;if(this['active']===!![])return;this[_0x571efb(0x10b)]=!![];let _0x3ad8e8=this;this[_0x571efb(0xd5)][_0x571efb(0xd6)](function(_0x5d26d2){clickHandler(_0x5d26d2,_0x3ad8e8);},Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this[_0x571efb(0xd5)]['setInputAction'](function(_0x381468){moveHandler(_0x381468,_0x3ad8e8);},Cesium[_0x571efb(0x110)]['MOUSE_MOVE']),this[_0x571efb(0xd5)][_0x571efb(0xd6)](function(_0x2bfbcc){rclkHandler(_0x2bfbcc,_0x3ad8e8);},Cesium[_0x571efb(0x110)][_0x571efb(0xeb)]),this[_0x571efb(0xda)][_0x571efb(0x104)](!![]);},DrawHandler[_0x5c74bc(0xfc)][_0x5c74bc(0xed)]=function(){const _0x49653c=_0x5c74bc;this['active']=![],this[_0x49653c(0xf6)]=![],this[_0x49653c(0xd5)][_0x49653c(0x114)](Cesium[_0x49653c(0x110)][_0x49653c(0x111)]),this[_0x49653c(0xd5)]['removeInputAction'](Cesium['ScreenSpaceEventType'][_0x49653c(0x10e)]),this[_0x49653c(0xd5)][_0x49653c(0x114)](Cesium['ScreenSpaceEventType'][_0x49653c(0xeb)]),this['activeEvt'][_0x49653c(0x104)](![]);},DrawHandler[_0x5c74bc(0xfc)]['clear']=function(){const _0x2caea8=_0x5c74bc;this[_0x2caea8(0xed)](),this[_0x2caea8(0x11c)]&&(this['polylines'][_0x2caea8(0x106)](),this[_0x2caea8(0xde)][_0x2caea8(0xf3)][_0x2caea8(0xea)][_0x2caea8(0xd8)](this['polylines']),this['polylines']=undefined),this[_0x2caea8(0xf8)]&&(this['viewer'][_0x2caea8(0xdf)]['remove'](this[_0x2caea8(0xf8)]),this['polygon']=undefined),this['points']&&(this[_0x2caea8(0x10f)]['removeAll'](),this[_0x2caea8(0xde)][_0x2caea8(0xf3)]['primitives'][_0x2caea8(0xd8)](this[_0x2caea8(0x10f)]),this['points']=undefined);};function clickHandler(_0x1a3219,_0x25a401){const _0x187dc9=_0x5c74bc;let _0x496699=_0x25a401;if(_0x496699&&_0x496699[_0x187dc9(0x10b)]){let _0x39122c=_0x496699[_0x187dc9(0xde)][_0x187dc9(0xf3)];if(!_0x39122c['pickPositionSupported']){console['log'](_0x187dc9(0x102));return;}let _0x4d4413=_0x39122c[_0x187dc9(0xd9)](_0x1a3219[_0x187dc9(0x119)]);if(_0x4d4413){if(!_0x496699[_0x187dc9(0xf6)]){_0x496699[_0x187dc9(0xf6)]=!![];switch(_0x496699[_0x187dc9(0xe0)]){case _0x578c4b[_0x187dc9(0x108)]:startDrawPoint(_0x4d4413,_0x496699);break;case _0x578c4b['Line']:startDrawLine(_0x4d4413,_0x496699);break;case _0x578c4b['Polygon']:startDrawPolygon(_0x4d4413,_0x496699);break;default:break;}}else{let _0x5ad9e0=new Cesium['Cartesian2'](_0x1a3219['position']['x'],_0x1a3219['position']['y']);switch(_0x496699[_0x187dc9(0xe0)]){case _0x578c4b['Line']:processLine(_0x5ad9e0,_0x496699,!![]);break;case _0x578c4b['Polygon']:processPolygon(_0x5ad9e0,_0x496699,!![]);break;default:break;}}}}}function startDrawPoint(_0x185e66,_0x52e69b){const _0x1f5cb5=_0x5c74bc;let _0x380e01=_0x52e69b;!_0x380e01['points']?(_0x380e01[_0x1f5cb5(0x10f)]=new Cesium[(_0x1f5cb5(0xfb))](),_0x380e01[_0x1f5cb5(0xee)]=_0x380e01[_0x1f5cb5(0x10f)][_0x1f5cb5(0x117)]({'position':_0x185e66,'pixelSize':0xa,'color':Cesium[_0x1f5cb5(0x11a)][_0x1f5cb5(0xd4)]}),_0x380e01[_0x1f5cb5(0xde)][_0x1f5cb5(0xf3)][_0x1f5cb5(0xea)][_0x1f5cb5(0x117)](_0x380e01[_0x1f5cb5(0x10f)])):_0x380e01['point'][_0x1f5cb5(0x119)]=_0x185e66,_0x380e01[_0x1f5cb5(0xed)](),_0x380e01[_0x1f5cb5(0xf4)][_0x1f5cb5(0x104)]({'object':_0x380e01[_0x1f5cb5(0xee)]});}function startDrawLine(_0x3f4702,_0x512390){const _0x341627=_0x5c74bc;let _0x336b19=_0x512390;!_0x336b19[_0x341627(0x11c)]?(_0x336b19['polylines']=new Cesium[(_0x341627(0x10a))](),_0x336b19['polyline']=_0x336b19[_0x341627(0x11c)][_0x341627(0x117)]({'width':0x2,'positions':[_0x3f4702,_0x3f4702],'material':Cesium[_0x341627(0xf2)]['fromType'](Cesium[_0x341627(0xf2)][_0x341627(0xf7)],{'color':Cesium[_0x341627(0x11a)][_0x341627(0xf5)](_0x341627(0x107))})}),_0x336b19[_0x341627(0xde)][_0x341627(0xf3)][_0x341627(0xea)][_0x341627(0x117)](_0x336b19[_0x341627(0x11c)])):(_0x336b19[_0x341627(0x10c)][_0x341627(0xd3)]=!![],_0x336b19[_0x341627(0x10c)][_0x341627(0xff)]=[_0x3f4702,_0x3f4702]);}function startDrawPolygon(_0x506228,_0x1544aa){const _0x3d30bb=_0x5c74bc;let _0x55ae0d=_0x1544aa;!_0x55ae0d[_0x3d30bb(0x11c)]?(_0x55ae0d[_0x3d30bb(0x11c)]=new Cesium[(_0x3d30bb(0x10a))](),_0x55ae0d[_0x3d30bb(0x10c)]=_0x55ae0d[_0x3d30bb(0x11c)][_0x3d30bb(0x117)]({'id':'polyline-'+Math[_0x3d30bb(0xfd)](),'width':0x2,'positions':[_0x506228,_0x506228],'material':Cesium[_0x3d30bb(0xf2)]['fromType'](Cesium['Material']['ColorType'],{'color':Cesium[_0x3d30bb(0x11a)][_0x3d30bb(0xf5)](_0x3d30bb(0x107))}),'loop':!![]}),_0x55ae0d['viewer'][_0x3d30bb(0xf3)][_0x3d30bb(0xea)][_0x3d30bb(0x117)](_0x55ae0d[_0x3d30bb(0x11c)])):(_0x55ae0d[_0x3d30bb(0x10c)][_0x3d30bb(0xd3)]=!![],_0x55ae0d[_0x3d30bb(0x10c)][_0x3d30bb(0xff)]=[_0x506228,_0x506228],_0x55ae0d[_0x3d30bb(0xf8)]&&(_0x55ae0d[_0x3d30bb(0xf8)][_0x3d30bb(0xd3)]=![]));}function moveHandler(_0x37c3b6,_0x446c16){const _0x554b47=_0x5c74bc;let _0x1c3674=_0x446c16;if(_0x1c3674&&_0x1c3674[_0x554b47(0x10b)]&&_0x1c3674[_0x554b47(0xf6)]){let _0x1850d7=new Cesium[(_0x554b47(0xe1))](_0x37c3b6[_0x554b47(0xd7)]['x'],_0x37c3b6[_0x554b47(0xd7)]['y']);switch(_0x1c3674[_0x554b47(0xe0)]){case _0x578c4b[_0x554b47(0x112)]:processLine(_0x1850d7,_0x1c3674,![]);break;case _0x578c4b[_0x554b47(0xdc)]:processPolygon(_0x1850d7,_0x1c3674,![]);break;default:break;}}_0x1c3674[_0x554b47(0xec)][_0x554b47(0x104)](new Cesium[(_0x554b47(0xe1))](_0x37c3b6['endPosition']['x'],_0x37c3b6[_0x554b47(0xd7)]['y']));}function processLine(_0x223067,_0x5096d4,_0x25706a){const _0x2d7fbd=_0x5c74bc;let _0x49752c=_0x5096d4,_0x4a9d6c=_0x49752c[_0x2d7fbd(0xde)][_0x2d7fbd(0xf3)],_0x2aa962=_0x4a9d6c[_0x2d7fbd(0xd9)](_0x223067);if(!_0x2aa962)return;let _0x9dacde=_0x49752c[_0x2d7fbd(0x10c)][_0x2d7fbd(0xff)],_0x205ea5=_0x9dacde['length'];_0x25706a?_0x9dacde[_0x205ea5]=_0x2aa962:_0x9dacde[_0x205ea5-0x1]=_0x2aa962,_0x49752c[_0x2d7fbd(0x10c)][_0x2d7fbd(0xff)]=_0x9dacde;}function processPolygon(_0x2a1aca,_0x4585c8,_0x5dc08f){const _0x214ccd=_0x5c74bc;let _0x5e2d6b=_0x4585c8,_0x299e6e=_0x5e2d6b[_0x214ccd(0xde)][_0x214ccd(0xf3)],_0x1bba9a=_0x299e6e[_0x214ccd(0xd9)](_0x2a1aca);if(!_0x1bba9a)return;let _0x5630df=_0x5e2d6b[_0x214ccd(0x10c)]['positions'],_0x2300e5=_0x5630df['length'];_0x5dc08f?_0x5630df[_0x2300e5]=_0x1bba9a:_0x5630df[_0x2300e5-0x1]=_0x1bba9a,_0x5e2d6b[_0x214ccd(0x10c)][_0x214ccd(0xff)]=_0x5630df;}function rclkHandler(_0x25a608,_0x58b45c){const _0x350bd6=_0x5c74bc;let _0x45815f=_0x58b45c;if(_0x45815f&&_0x45815f['active']&&_0x45815f[_0x350bd6(0xf6)]){_0x45815f[_0x350bd6(0xed)]();if(!_0x45815f[_0x350bd6(0x10c)])return;_0x45815f[_0x350bd6(0x10c)][_0x350bd6(0xff)]=_0x45815f[_0x350bd6(0x10c)][_0x350bd6(0xff)][_0x350bd6(0xdb)](0x0,_0x45815f[_0x350bd6(0x10c)][_0x350bd6(0xff)][_0x350bd6(0xfe)]-0x1);if(_0x45815f[_0x350bd6(0xe0)]===_0x578c4b[_0x350bd6(0xdc)]){if(_0x45815f[_0x350bd6(0x10c)]['positions']['length']<0x3){_0x45815f[_0x350bd6(0x10c)][_0x350bd6(0xff)][_0x350bd6(0xfe)]=0x0;return;}let _0x40aa6e=[][_0x350bd6(0xe6)](_0x45815f['polyline'][_0x350bd6(0xff)]);!_0x45815f[_0x350bd6(0xf8)]&&(_0x45815f[_0x350bd6(0xf8)]=_0x45815f[_0x350bd6(0xde)][_0x350bd6(0xdf)][_0x350bd6(0x117)]({'polygon':{'hierarchy':{'positions':_0x40aa6e},'material':Cesium[_0x350bd6(0x11a)][_0x350bd6(0x11b)][_0x350bd6(0xe3)](0.5),'perPositionHeight':_0x403778[_0x350bd6(0x118)]===_0x45815f[_0x350bd6(0x101)]}})),_0x45815f[_0x350bd6(0xf8)][_0x350bd6(0xf8)][_0x350bd6(0x115)]=_0x40aa6e,_0x45815f[_0x350bd6(0xf8)][_0x350bd6(0xff)]=_0x40aa6e,_0x45815f[_0x350bd6(0xf8)][_0x350bd6(0xd3)]=!![],_0x45815f[_0x350bd6(0xf4)][_0x350bd6(0x104)]({'object':_0x45815f[_0x350bd6(0xf8)]});}else{if(_0x45815f[_0x350bd6(0xe0)]===_0x578c4b[_0x350bd6(0x112)]){let _0x407e37=[];for(let _0x596128=0x0,_0x183cf5=_0x45815f['polyline'][_0x350bd6(0xff)]['length'];_0x596128<_0x183cf5;_0x596128++){_0x407e37['push'](Cesium['Cartesian3'][_0x350bd6(0xe7)](_0x45815f[_0x350bd6(0x10c)][_0x350bd6(0xff)][_0x596128]));}(_0x45815f[_0x350bd6(0x101)]===_0x403778[_0x350bd6(0xf0)]||_0x45815f[_0x350bd6(0x101)]===_0x403778[_0x350bd6(0x113)])&&(!_0x45815f[_0x350bd6(0xdd)]&&(_0x45815f[_0x350bd6(0xdd)]=[]),_0x45815f[_0x350bd6(0xdd)]['push'](_0x45815f[_0x350bd6(0xde)][_0x350bd6(0xdf)][_0x350bd6(0x117)]({'polyline':{'positions':_0x407e37,'width':0x5,'material':Cesium[_0x350bd6(0x11a)][_0x350bd6(0xf5)](_0x350bd6(0x107)),'clampToGround':!![]}})),_0x45815f['polyline'][_0x350bd6(0xd3)]=![]),_0x45815f[_0x350bd6(0xf4)][_0x350bd6(0x104)]({'object':_0x45815f[_0x350bd6(0x10c)]});}}}}export default DrawHandler;