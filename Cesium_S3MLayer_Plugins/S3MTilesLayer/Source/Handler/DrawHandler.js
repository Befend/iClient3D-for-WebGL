const _0x3fe2=['point','concat','ColorType','remove','activate','ORANGE','viewer','endPosition','151DvMDfq','8459oJYorQ','add','drawEvt','WHITE','viewer\x20and\x20mode\x20is\x20required!','random','active','mode','ScreenSpaceEventType','pickPosition','2129PdwPXe','primitives','Cartesian2','prototype','withAlpha','697854sFgaoS','655796xiKKSL','PolylineCollection','clone','your\x20browser\x20not\x20supported\x20pickPosition!','76938awIxNj','activeEvt','removeInputAction','movingEvt','polyline','RIGHT_CLICK','#51ff00','fromType','deactivate','_activeEvt','MOUSE_MOVE','removeAll','_drawEvt','_clampMode','polyline-','defineProperties','Line','defaultValue','setInputAction','points','polygon','clear','polylines','Event','Cartesian3','Point','LEFT_CLICK','fromCssColorString','1334047PhnQAC','1OFSySy','handler','DeveloperError','Polygon','positions','position','pickPositionSupported','641kCMjUN','hierarchy','Color','isDrawing','show','scene','push','Space','1570482FjVGNq','Ground','entities','7oietDf','raiseEvent','length','Material','log','ScreenSpaceEventHandler'];const _0x5f41d3=_0x472c;(function(_0x4b9917,_0x2c2525){const _0x22b987=_0x472c;while(!![]){try{const _0x45e3a5=parseInt(_0x22b987(0xd3))*parseInt(_0x22b987(0xd2))+parseInt(_0x22b987(0xc4))*parseInt(_0x22b987(0x95))+parseInt(_0x22b987(0x91))*-parseInt(_0x22b987(0xb2))+parseInt(_0x22b987(0x90))+parseInt(_0x22b987(0x8b))*-parseInt(_0x22b987(0xb9))+-parseInt(_0x22b987(0xb1))+parseInt(_0x22b987(0xc1));if(_0x45e3a5===_0x2c2525)break;else _0x4b9917['push'](_0x4b9917['shift']());}catch(_0x25937a){_0x4b9917['push'](_0x4b9917['shift']());}}}(_0x3fe2,0xb224f));import _0x483c1d from'./DrawMode.js';import _0x45c028 from'./ClampMode.js';function _0x472c(_0x217de3,_0x563c93){_0x217de3=_0x217de3-0x82;let _0x3fe223=_0x3fe2[_0x217de3];return _0x3fe223;}let DrawHandler=function(_0x5b06cc,_0x4a3348,_0x32abc5){const _0x509096=_0x472c;if(!_0x5b06cc||_0x4a3348===undefined)throw new Cesium[(_0x509096(0xb4))](_0x509096(0x85));this[_0x509096(0xb3)]=new Cesium[(_0x509096(0xc9))](_0x5b06cc[_0x509096(0xbe)]['canvas']),this[_0x509096(0xd0)]=_0x5b06cc,this['mode']=_0x4a3348,this[_0x509096(0xa2)]=Cesium[_0x509096(0xa6)](_0x32abc5,_0x45c028[_0x509096(0xc0)]),this[_0x509096(0xbc)]=![],this[_0x509096(0x87)]=![],this[_0x509096(0xa1)]=new Cesium[(_0x509096(0xac))](),this[_0x509096(0x9e)]=new Cesium[(_0x509096(0xac))](),this[_0x509096(0x98)]=new Cesium['Event'](),this['polylines']=undefined,this['polyline']=undefined,this[_0x509096(0xa9)]=undefined,this[_0x509096(0xa8)]=undefined,this[_0x509096(0xca)]=undefined;};Object[_0x5f41d3(0xa4)](DrawHandler[_0x5f41d3(0x8e)],{'drawEvt':{'get':function(){const _0x3376e4=_0x5f41d3;return this[_0x3376e4(0xa1)];}},'activeEvt':{'get':function(){const _0x5f03cf=_0x5f41d3;return this[_0x5f03cf(0x9e)];}}}),DrawHandler[_0x5f41d3(0x8e)][_0x5f41d3(0xce)]=function(){const _0x3978e5=_0x5f41d3;if(this[_0x3978e5(0x87)]===!![])return;this[_0x3978e5(0x87)]=!![];let _0x2c5dad=this;this[_0x3978e5(0xb3)][_0x3978e5(0xa7)](function(_0x2733a4){clickHandler(_0x2733a4,_0x2c5dad);},Cesium['ScreenSpaceEventType'][_0x3978e5(0xaf)]),this[_0x3978e5(0xb3)][_0x3978e5(0xa7)](function(_0x3b81c0){moveHandler(_0x3b81c0,_0x2c5dad);},Cesium[_0x3978e5(0x89)][_0x3978e5(0x9f)]),this['handler']['setInputAction'](function(_0x47bfb8){rclkHandler(_0x47bfb8,_0x2c5dad);},Cesium[_0x3978e5(0x89)][_0x3978e5(0x9a)]),this[_0x3978e5(0x96)][_0x3978e5(0xc5)](!![]);},DrawHandler['prototype'][_0x5f41d3(0x9d)]=function(){const _0x3dde2e=_0x5f41d3;this['active']=![],this[_0x3dde2e(0xbc)]=![],this[_0x3dde2e(0xb3)][_0x3dde2e(0x97)](Cesium['ScreenSpaceEventType']['LEFT_CLICK']),this[_0x3dde2e(0xb3)][_0x3dde2e(0x97)](Cesium['ScreenSpaceEventType'][_0x3dde2e(0x9f)]),this['handler'][_0x3dde2e(0x97)](Cesium['ScreenSpaceEventType']['RIGHT_CLICK']),this[_0x3dde2e(0x96)][_0x3dde2e(0xc5)](![]);},DrawHandler[_0x5f41d3(0x8e)][_0x5f41d3(0xaa)]=function(){const _0x3fdece=_0x5f41d3;this[_0x3fdece(0x9d)](),this['polylines']&&(this[_0x3fdece(0xab)][_0x3fdece(0xa0)](),this[_0x3fdece(0xd0)][_0x3fdece(0xbe)]['primitives'][_0x3fdece(0xcd)](this[_0x3fdece(0xab)]),this[_0x3fdece(0xab)]=undefined),this[_0x3fdece(0xa9)]&&(this['viewer']['entities'][_0x3fdece(0xcd)](this[_0x3fdece(0xa9)]),this[_0x3fdece(0xa9)]=undefined),this[_0x3fdece(0xa8)]&&(this['points'][_0x3fdece(0xa0)](),this[_0x3fdece(0xd0)][_0x3fdece(0xbe)]['primitives'][_0x3fdece(0xcd)](this[_0x3fdece(0xa8)]),this[_0x3fdece(0xa8)]=undefined);};function clickHandler(_0x1c20ca,_0xf215c3){const _0x48a322=_0x5f41d3;let _0x35a36d=_0xf215c3;if(_0x35a36d&&_0x35a36d[_0x48a322(0x87)]){let _0xe51353=_0x35a36d[_0x48a322(0xd0)][_0x48a322(0xbe)];if(!_0xe51353[_0x48a322(0xb8)]){console[_0x48a322(0xc8)](_0x48a322(0x94));return;}let _0x14aefc=_0xe51353[_0x48a322(0x8a)](_0x1c20ca[_0x48a322(0xb7)]);if(_0x14aefc){if(!_0x35a36d[_0x48a322(0xbc)]){_0x35a36d[_0x48a322(0xbc)]=!![];switch(_0x35a36d[_0x48a322(0x88)]){case _0x483c1d[_0x48a322(0xae)]:startDrawPoint(_0x14aefc,_0x35a36d);break;case _0x483c1d[_0x48a322(0xa5)]:startDrawLine(_0x14aefc,_0x35a36d);break;case _0x483c1d[_0x48a322(0xb5)]:startDrawPolygon(_0x14aefc,_0x35a36d);break;default:break;}}else{let _0xc6479b=new Cesium[(_0x48a322(0x8d))](_0x1c20ca[_0x48a322(0xb7)]['x'],_0x1c20ca[_0x48a322(0xb7)]['y']);switch(_0x35a36d['mode']){case _0x483c1d[_0x48a322(0xa5)]:processLine(_0xc6479b,_0x35a36d,!![]);break;case _0x483c1d['Polygon']:processPolygon(_0xc6479b,_0x35a36d,!![]);break;default:break;}}}}}function startDrawPoint(_0x435f5a,_0xccff42){const _0x11d9d0=_0x5f41d3;let _0x56c8d1=_0xccff42;!_0x56c8d1['points']?(_0x56c8d1[_0x11d9d0(0xa8)]=new Cesium['PointPrimitiveCollection'](),_0x56c8d1[_0x11d9d0(0xca)]=_0x56c8d1[_0x11d9d0(0xa8)]['add']({'position':_0x435f5a,'pixelSize':0xa,'color':Cesium[_0x11d9d0(0xbb)][_0x11d9d0(0x84)]}),_0x56c8d1[_0x11d9d0(0xd0)]['scene'][_0x11d9d0(0x8c)]['add'](_0x56c8d1[_0x11d9d0(0xa8)])):_0x56c8d1[_0x11d9d0(0xca)][_0x11d9d0(0xb7)]=_0x435f5a,_0x56c8d1[_0x11d9d0(0x9d)](),_0x56c8d1[_0x11d9d0(0x83)][_0x11d9d0(0xc5)]({'object':_0x56c8d1[_0x11d9d0(0xca)]});}function startDrawLine(_0x1cfe31,_0x66158c){const _0x2312f8=_0x5f41d3;let _0x4de86c=_0x66158c;!_0x4de86c[_0x2312f8(0xab)]?(_0x4de86c[_0x2312f8(0xab)]=new Cesium[(_0x2312f8(0x92))](),_0x4de86c[_0x2312f8(0x99)]=_0x4de86c[_0x2312f8(0xab)]['add']({'width':0x2,'positions':[_0x1cfe31,_0x1cfe31],'material':Cesium[_0x2312f8(0xc7)][_0x2312f8(0x9c)](Cesium['Material'][_0x2312f8(0xcc)],{'color':Cesium['Color'][_0x2312f8(0xb0)](_0x2312f8(0x9b))})}),_0x4de86c[_0x2312f8(0xd0)][_0x2312f8(0xbe)][_0x2312f8(0x8c)][_0x2312f8(0x82)](_0x4de86c[_0x2312f8(0xab)])):(_0x4de86c[_0x2312f8(0x99)][_0x2312f8(0xbd)]=!![],_0x4de86c[_0x2312f8(0x99)]['positions']=[_0x1cfe31,_0x1cfe31]);}function startDrawPolygon(_0x552269,_0x538ebf){const _0x29758b=_0x5f41d3;let _0x30eeef=_0x538ebf;!_0x30eeef[_0x29758b(0xab)]?(_0x30eeef[_0x29758b(0xab)]=new Cesium[(_0x29758b(0x92))](),_0x30eeef[_0x29758b(0x99)]=_0x30eeef[_0x29758b(0xab)]['add']({'id':_0x29758b(0xa3)+Math[_0x29758b(0x86)](),'width':0x2,'positions':[_0x552269,_0x552269],'material':Cesium[_0x29758b(0xc7)][_0x29758b(0x9c)](Cesium[_0x29758b(0xc7)]['ColorType'],{'color':Cesium[_0x29758b(0xbb)][_0x29758b(0xb0)](_0x29758b(0x9b))}),'loop':!![]}),_0x30eeef[_0x29758b(0xd0)][_0x29758b(0xbe)][_0x29758b(0x8c)][_0x29758b(0x82)](_0x30eeef[_0x29758b(0xab)])):(_0x30eeef[_0x29758b(0x99)]['show']=!![],_0x30eeef[_0x29758b(0x99)][_0x29758b(0xb6)]=[_0x552269,_0x552269],_0x30eeef[_0x29758b(0xa9)]&&(_0x30eeef[_0x29758b(0xa9)][_0x29758b(0xbd)]=![]));}function moveHandler(_0x52369d,_0x5133ad){const _0x21700c=_0x5f41d3;let _0x298391=_0x5133ad;if(_0x298391&&_0x298391[_0x21700c(0x87)]&&_0x298391[_0x21700c(0xbc)]){let _0x5c798b=new Cesium['Cartesian2'](_0x52369d['endPosition']['x'],_0x52369d[_0x21700c(0xd1)]['y']);switch(_0x298391['mode']){case _0x483c1d['Line']:processLine(_0x5c798b,_0x298391,![]);break;case _0x483c1d['Polygon']:processPolygon(_0x5c798b,_0x298391,![]);break;default:break;}}_0x298391[_0x21700c(0x98)][_0x21700c(0xc5)](new Cesium[(_0x21700c(0x8d))](_0x52369d[_0x21700c(0xd1)]['x'],_0x52369d['endPosition']['y']));}function processLine(_0x1e6be4,_0x180838,_0x11f303){const _0x20266d=_0x5f41d3;let _0x5919eb=_0x180838,_0xd2ffcb=_0x5919eb[_0x20266d(0xd0)]['scene'],_0x5b3e4b=_0xd2ffcb[_0x20266d(0x8a)](_0x1e6be4);if(!_0x5b3e4b)return;let _0x40890a=_0x5919eb[_0x20266d(0x99)]['positions'],_0x38dfe5=_0x40890a['length'];_0x11f303?_0x40890a[_0x38dfe5]=_0x5b3e4b:_0x40890a[_0x38dfe5-0x1]=_0x5b3e4b,_0x5919eb[_0x20266d(0x99)]['positions']=_0x40890a;}function processPolygon(_0x15e1bd,_0x1db273,_0x10821e){const _0x2efaeb=_0x5f41d3;let _0x196f85=_0x1db273,_0x1b2c7b=_0x196f85[_0x2efaeb(0xd0)][_0x2efaeb(0xbe)],_0x3ead85=_0x1b2c7b[_0x2efaeb(0x8a)](_0x15e1bd);if(!_0x3ead85)return;let _0x8f05bf=_0x196f85[_0x2efaeb(0x99)][_0x2efaeb(0xb6)],_0x51de1b=_0x8f05bf['length'];_0x10821e?_0x8f05bf[_0x51de1b]=_0x3ead85:_0x8f05bf[_0x51de1b-0x1]=_0x3ead85,_0x196f85[_0x2efaeb(0x99)][_0x2efaeb(0xb6)]=_0x8f05bf;}function rclkHandler(_0x421fb5,_0x55f532){const _0x33ef63=_0x5f41d3;let _0x346895=_0x55f532;if(_0x346895&&_0x346895[_0x33ef63(0x87)]&&_0x346895[_0x33ef63(0xbc)]){_0x346895[_0x33ef63(0x9d)]();if(!_0x346895[_0x33ef63(0x99)])return;_0x346895[_0x33ef63(0x99)]['positions']=_0x346895['polyline'][_0x33ef63(0xb6)]['slice'](0x0,_0x346895[_0x33ef63(0x99)][_0x33ef63(0xb6)][_0x33ef63(0xc6)]-0x1);if(_0x346895[_0x33ef63(0x88)]===_0x483c1d['Polygon']){if(_0x346895['polyline'][_0x33ef63(0xb6)][_0x33ef63(0xc6)]<0x3){_0x346895[_0x33ef63(0x99)]['positions'][_0x33ef63(0xc6)]=0x0;return;}let _0x1fda6d=[][_0x33ef63(0xcb)](_0x346895[_0x33ef63(0x99)][_0x33ef63(0xb6)]);!_0x346895[_0x33ef63(0xa9)]&&(_0x346895[_0x33ef63(0xa9)]=_0x346895['viewer'][_0x33ef63(0xc3)][_0x33ef63(0x82)]({'polygon':{'hierarchy':{'positions':_0x1fda6d},'material':Cesium[_0x33ef63(0xbb)][_0x33ef63(0xcf)][_0x33ef63(0x8f)](0.5),'perPositionHeight':_0x45c028[_0x33ef63(0xc0)]===_0x346895[_0x33ef63(0xa2)]}})),_0x346895[_0x33ef63(0xa9)]['polygon'][_0x33ef63(0xba)]=_0x1fda6d,_0x346895['polygon'][_0x33ef63(0xb6)]=_0x1fda6d,_0x346895[_0x33ef63(0xa9)][_0x33ef63(0xbd)]=!![],_0x346895[_0x33ef63(0x83)][_0x33ef63(0xc5)]({'object':_0x346895['polygon']});}else{if(_0x346895['mode']===_0x483c1d['Line']){let _0x14b5c4=[];for(let _0x980d99=0x0,_0x23c8b5=_0x346895['polyline'][_0x33ef63(0xb6)][_0x33ef63(0xc6)];_0x980d99<_0x23c8b5;_0x980d99++){_0x14b5c4[_0x33ef63(0xbf)](Cesium[_0x33ef63(0xad)][_0x33ef63(0x93)](_0x346895[_0x33ef63(0x99)][_0x33ef63(0xb6)][_0x980d99]));}(_0x346895[_0x33ef63(0xa2)]===_0x45c028['S3mModel']||_0x346895[_0x33ef63(0xa2)]===_0x45c028[_0x33ef63(0xc2)])&&(!_0x346895['clampToGroundPolylines']&&(_0x346895['clampToGroundPolylines']=[]),_0x346895['clampToGroundPolylines'][_0x33ef63(0xbf)](_0x346895[_0x33ef63(0xd0)][_0x33ef63(0xc3)][_0x33ef63(0x82)]({'polyline':{'positions':_0x14b5c4,'width':0x5,'material':Cesium[_0x33ef63(0xbb)]['fromCssColorString']('#51ff00'),'clampToGround':!![]}})),_0x346895[_0x33ef63(0x99)][_0x33ef63(0xbd)]=![]),_0x346895[_0x33ef63(0x83)][_0x33ef63(0xc5)]({'object':_0x346895[_0x33ef63(0x99)]});}}}}export default DrawHandler;