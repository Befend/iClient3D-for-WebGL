const _0x3171=['_clampMode','190609BzwdbH','remove','87573gUheHz','length','526bBJBGn','ColorType','canvas','S3mModel','Point','pickPositionSupported','MOUSE_MOVE','27797HVNwep','point','add','_drawEvt','polyline-','1dPXUEQ','Cartesian2','viewer','activate','random','_activeEvt','activeEvt','Event','5xmyURV','Color','RIGHT_CLICK','scene','concat','movingEvt','your\x20browser\x20not\x20supported\x20pickPosition!','position','setInputAction','mode','pickPosition','positions','primitives','Polygon','entities','fromCssColorString','Space','Cartesian3','clampToGroundPolylines','removeInputAction','polyline','PointPrimitiveCollection','LEFT_CLICK','394GLJwcc','polygon','isDrawing','deactivate','slice','handler','log','push','polylines','defaultValue','points','ScreenSpaceEventType','Line','endPosition','PolylineCollection','17SzStnS','604845VwhEgO','raiseEvent','21478odjNLc','removeAll','ScreenSpaceEventHandler','Material','hierarchy','active','defineProperties','show','2707CERgIu','#51ff00','prototype','fromType'];const _0x47ceb8=_0x4a41;(function(_0x37a0fc,_0x4115b4){const _0x39e69a=_0x4a41;while(!![]){try{const _0xac1214=-parseInt(_0x39e69a(0x211))+-parseInt(_0x39e69a(0x20c))*parseInt(_0x39e69a(0x201))+parseInt(_0x39e69a(0x1db))*parseInt(_0x39e69a(0x204))+parseInt(_0x39e69a(0x1f2))*-parseInt(_0x39e69a(0x215))+-parseInt(_0x39e69a(0x213))+-parseInt(_0x39e69a(0x21c))+parseInt(_0x39e69a(0x1d3))*parseInt(_0x39e69a(0x202));if(_0xac1214===_0x4115b4)break;else _0x37a0fc['push'](_0x37a0fc['shift']());}catch(_0x289056){_0x37a0fc['push'](_0x37a0fc['shift']());}}}(_0x3171,0x255a1));import _0x515755 from'./DrawMode.js';import _0x1f4b1b from'./ClampMode.js';let DrawHandler=function(_0x37d9d6,_0x2efd4c,_0x181b40){const _0x3ae523=_0x4a41;if(!_0x37d9d6||_0x2efd4c===undefined)throw new Cesium['DeveloperError']('viewer\x20and\x20mode\x20is\x20required!');this[_0x3ae523(0x1f7)]=new Cesium[(_0x3ae523(0x206))](_0x37d9d6[_0x3ae523(0x1de)][_0x3ae523(0x217)]),this[_0x3ae523(0x1d5)]=_0x37d9d6,this[_0x3ae523(0x1e4)]=_0x2efd4c,this[_0x3ae523(0x210)]=Cesium[_0x3ae523(0x1fb)](_0x181b40,_0x1f4b1b[_0x3ae523(0x1eb)]),this[_0x3ae523(0x1f4)]=![],this[_0x3ae523(0x209)]=![],this['_drawEvt']=new Cesium[(_0x3ae523(0x1da))](),this[_0x3ae523(0x1d8)]=new Cesium[(_0x3ae523(0x1da))](),this['movingEvt']=new Cesium['Event'](),this[_0x3ae523(0x1fa)]=undefined,this['polyline']=undefined,this[_0x3ae523(0x1f3)]=undefined,this['points']=undefined,this['point']=undefined;};Object[_0x47ceb8(0x20a)](DrawHandler[_0x47ceb8(0x20e)],{'drawEvt':{'get':function(){const _0x2083e4=_0x47ceb8;return this[_0x2083e4(0x21f)];}},'activeEvt':{'get':function(){const _0x18a21f=_0x47ceb8;return this[_0x18a21f(0x1d8)];}}}),DrawHandler[_0x47ceb8(0x20e)][_0x47ceb8(0x1d6)]=function(){const _0x18956e=_0x47ceb8;if(this[_0x18956e(0x209)]===!![])return;this[_0x18956e(0x209)]=!![];let _0xdcac47=this;this[_0x18956e(0x1f7)][_0x18956e(0x1e3)](function(_0x223a06){clickHandler(_0x223a06,_0xdcac47);},Cesium[_0x18956e(0x1fd)][_0x18956e(0x1f1)]),this['handler'][_0x18956e(0x1e3)](function(_0x1f479e){moveHandler(_0x1f479e,_0xdcac47);},Cesium['ScreenSpaceEventType'][_0x18956e(0x21b)]),this[_0x18956e(0x1f7)]['setInputAction'](function(_0x8b74f1){rclkHandler(_0x8b74f1,_0xdcac47);},Cesium[_0x18956e(0x1fd)][_0x18956e(0x1dd)]),this[_0x18956e(0x1d9)][_0x18956e(0x203)](!![]);},DrawHandler[_0x47ceb8(0x20e)][_0x47ceb8(0x1f5)]=function(){const _0xa3544d=_0x47ceb8;this[_0xa3544d(0x209)]=![],this[_0xa3544d(0x1f4)]=![],this[_0xa3544d(0x1f7)][_0xa3544d(0x1ee)](Cesium[_0xa3544d(0x1fd)][_0xa3544d(0x1f1)]),this['handler']['removeInputAction'](Cesium[_0xa3544d(0x1fd)][_0xa3544d(0x21b)]),this[_0xa3544d(0x1f7)][_0xa3544d(0x1ee)](Cesium[_0xa3544d(0x1fd)]['RIGHT_CLICK']),this[_0xa3544d(0x1d9)][_0xa3544d(0x203)](![]);},DrawHandler['prototype']['clear']=function(){const _0x2fde8e=_0x47ceb8;this[_0x2fde8e(0x1f5)](),this[_0x2fde8e(0x1fa)]&&(this[_0x2fde8e(0x1fa)][_0x2fde8e(0x205)](),this[_0x2fde8e(0x1d5)]['scene'][_0x2fde8e(0x1e7)][_0x2fde8e(0x212)](this['polylines']),this[_0x2fde8e(0x1fa)]=undefined),this[_0x2fde8e(0x1f3)]&&(this[_0x2fde8e(0x1d5)][_0x2fde8e(0x1e9)]['remove'](this['polygon']),this[_0x2fde8e(0x1f3)]=undefined),this[_0x2fde8e(0x1fc)]&&(this[_0x2fde8e(0x1fc)][_0x2fde8e(0x205)](),this[_0x2fde8e(0x1d5)][_0x2fde8e(0x1de)][_0x2fde8e(0x1e7)][_0x2fde8e(0x212)](this[_0x2fde8e(0x1fc)]),this[_0x2fde8e(0x1fc)]=undefined);};function clickHandler(_0x368633,_0x5dc489){const _0x250ee2=_0x47ceb8;let _0x556917=_0x5dc489;if(_0x556917&&_0x556917[_0x250ee2(0x209)]){let _0x44a3da=_0x556917[_0x250ee2(0x1d5)][_0x250ee2(0x1de)];if(!_0x44a3da[_0x250ee2(0x21a)]){console[_0x250ee2(0x1f8)](_0x250ee2(0x1e1));return;}let _0x282ab9=_0x44a3da[_0x250ee2(0x1e5)](_0x368633['position']);if(_0x282ab9){if(!_0x556917[_0x250ee2(0x1f4)]){_0x556917['isDrawing']=!![];switch(_0x556917[_0x250ee2(0x1e4)]){case _0x515755[_0x250ee2(0x219)]:startDrawPoint(_0x282ab9,_0x556917);break;case _0x515755[_0x250ee2(0x1fe)]:startDrawLine(_0x282ab9,_0x556917);break;case _0x515755['Polygon']:startDrawPolygon(_0x282ab9,_0x556917);break;default:break;}}else{let _0x5ba435=new Cesium[(_0x250ee2(0x1d4))](_0x368633[_0x250ee2(0x1e2)]['x'],_0x368633[_0x250ee2(0x1e2)]['y']);switch(_0x556917[_0x250ee2(0x1e4)]){case _0x515755['Line']:processLine(_0x5ba435,_0x556917,!![]);break;case _0x515755['Polygon']:processPolygon(_0x5ba435,_0x556917,!![]);break;default:break;}}}}}function startDrawPoint(_0xf57217,_0x13fd22){const _0x141afc=_0x47ceb8;let _0x5e3dee=_0x13fd22;!_0x5e3dee[_0x141afc(0x1fc)]?(_0x5e3dee[_0x141afc(0x1fc)]=new Cesium[(_0x141afc(0x1f0))](),_0x5e3dee[_0x141afc(0x21d)]=_0x5e3dee[_0x141afc(0x1fc)][_0x141afc(0x21e)]({'position':_0xf57217,'pixelSize':0xa,'color':Cesium[_0x141afc(0x1dc)]['WHITE']}),_0x5e3dee['viewer'][_0x141afc(0x1de)]['primitives'][_0x141afc(0x21e)](_0x5e3dee['points'])):_0x5e3dee[_0x141afc(0x21d)]['position']=_0xf57217,_0x5e3dee[_0x141afc(0x1f5)](),_0x5e3dee['drawEvt'][_0x141afc(0x203)]({'object':_0x5e3dee[_0x141afc(0x21d)]});}function startDrawLine(_0x48e315,_0x202df6){const _0x6c591f=_0x47ceb8;let _0x3405eb=_0x202df6;!_0x3405eb['polylines']?(_0x3405eb[_0x6c591f(0x1fa)]=new Cesium[(_0x6c591f(0x200))](),_0x3405eb[_0x6c591f(0x1ef)]=_0x3405eb[_0x6c591f(0x1fa)][_0x6c591f(0x21e)]({'width':0x2,'positions':[_0x48e315,_0x48e315],'material':Cesium[_0x6c591f(0x207)][_0x6c591f(0x20f)](Cesium[_0x6c591f(0x207)][_0x6c591f(0x216)],{'color':Cesium['Color']['fromCssColorString'](_0x6c591f(0x20d))})}),_0x3405eb[_0x6c591f(0x1d5)][_0x6c591f(0x1de)][_0x6c591f(0x1e7)][_0x6c591f(0x21e)](_0x3405eb[_0x6c591f(0x1fa)])):(_0x3405eb[_0x6c591f(0x1ef)]['show']=!![],_0x3405eb[_0x6c591f(0x1ef)]['positions']=[_0x48e315,_0x48e315]);}function startDrawPolygon(_0x369818,_0x19ec63){const _0x52e52c=_0x47ceb8;let _0x522fd2=_0x19ec63;!_0x522fd2[_0x52e52c(0x1fa)]?(_0x522fd2[_0x52e52c(0x1fa)]=new Cesium[(_0x52e52c(0x200))](),_0x522fd2[_0x52e52c(0x1ef)]=_0x522fd2['polylines'][_0x52e52c(0x21e)]({'id':_0x52e52c(0x220)+Math[_0x52e52c(0x1d7)](),'width':0x2,'positions':[_0x369818,_0x369818],'material':Cesium[_0x52e52c(0x207)]['fromType'](Cesium[_0x52e52c(0x207)][_0x52e52c(0x216)],{'color':Cesium['Color'][_0x52e52c(0x1ea)]('#51ff00')}),'loop':!![]}),_0x522fd2[_0x52e52c(0x1d5)][_0x52e52c(0x1de)][_0x52e52c(0x1e7)][_0x52e52c(0x21e)](_0x522fd2[_0x52e52c(0x1fa)])):(_0x522fd2[_0x52e52c(0x1ef)][_0x52e52c(0x20b)]=!![],_0x522fd2[_0x52e52c(0x1ef)]['positions']=[_0x369818,_0x369818],_0x522fd2[_0x52e52c(0x1f3)]&&(_0x522fd2[_0x52e52c(0x1f3)][_0x52e52c(0x20b)]=![]));}function _0x4a41(_0x4048ba,_0x119f70){_0x4048ba=_0x4048ba-0x1d3;let _0x317131=_0x3171[_0x4048ba];return _0x317131;}function moveHandler(_0x24b8ee,_0xe14027){const _0x2f5363=_0x47ceb8;let _0x5a0ba4=_0xe14027;if(_0x5a0ba4&&_0x5a0ba4[_0x2f5363(0x209)]&&_0x5a0ba4['isDrawing']){let _0x3f2ce3=new Cesium[(_0x2f5363(0x1d4))](_0x24b8ee[_0x2f5363(0x1ff)]['x'],_0x24b8ee[_0x2f5363(0x1ff)]['y']);switch(_0x5a0ba4['mode']){case _0x515755[_0x2f5363(0x1fe)]:processLine(_0x3f2ce3,_0x5a0ba4,![]);break;case _0x515755['Polygon']:processPolygon(_0x3f2ce3,_0x5a0ba4,![]);break;default:break;}}_0x5a0ba4[_0x2f5363(0x1e0)][_0x2f5363(0x203)](new Cesium[(_0x2f5363(0x1d4))](_0x24b8ee[_0x2f5363(0x1ff)]['x'],_0x24b8ee[_0x2f5363(0x1ff)]['y']));}function processLine(_0x388824,_0x153f12,_0x11103a){const _0x14ba2e=_0x47ceb8;let _0x128cc9=_0x153f12,_0x26749b=_0x128cc9[_0x14ba2e(0x1d5)][_0x14ba2e(0x1de)],_0x467382=_0x26749b['pickPosition'](_0x388824);if(!_0x467382)return;let _0x4178c5=_0x128cc9[_0x14ba2e(0x1ef)]['positions'],_0x510665=_0x4178c5[_0x14ba2e(0x214)];_0x11103a?_0x4178c5[_0x510665]=_0x467382:_0x4178c5[_0x510665-0x1]=_0x467382,_0x128cc9[_0x14ba2e(0x1ef)][_0x14ba2e(0x1e6)]=_0x4178c5;}function processPolygon(_0x5bef61,_0x177a47,_0x4c1a6c){const _0x16608c=_0x47ceb8;let _0x3036f1=_0x177a47,_0x3d9d5a=_0x3036f1['viewer'][_0x16608c(0x1de)],_0x33faf4=_0x3d9d5a[_0x16608c(0x1e5)](_0x5bef61);if(!_0x33faf4)return;let _0x3b73fd=_0x3036f1['polyline']['positions'],_0x3a2ff3=_0x3b73fd[_0x16608c(0x214)];_0x4c1a6c?_0x3b73fd[_0x3a2ff3]=_0x33faf4:_0x3b73fd[_0x3a2ff3-0x1]=_0x33faf4,_0x3036f1[_0x16608c(0x1ef)]['positions']=_0x3b73fd;}function rclkHandler(_0x327129,_0x4b4add){const _0x529277=_0x47ceb8;let _0x1bdb9e=_0x4b4add;if(_0x1bdb9e&&_0x1bdb9e[_0x529277(0x209)]&&_0x1bdb9e['isDrawing']){_0x1bdb9e[_0x529277(0x1f5)]();if(!_0x1bdb9e['polyline'])return;_0x1bdb9e['polyline'][_0x529277(0x1e6)]=_0x1bdb9e[_0x529277(0x1ef)]['positions'][_0x529277(0x1f6)](0x0,_0x1bdb9e['polyline'][_0x529277(0x1e6)][_0x529277(0x214)]-0x1);if(_0x1bdb9e[_0x529277(0x1e4)]===_0x515755[_0x529277(0x1e8)]){if(_0x1bdb9e['polyline'][_0x529277(0x1e6)][_0x529277(0x214)]<0x3){_0x1bdb9e[_0x529277(0x1ef)][_0x529277(0x1e6)][_0x529277(0x214)]=0x0;return;}let _0x20c539=[][_0x529277(0x1df)](_0x1bdb9e[_0x529277(0x1ef)][_0x529277(0x1e6)]);!_0x1bdb9e[_0x529277(0x1f3)]&&(_0x1bdb9e[_0x529277(0x1f3)]=_0x1bdb9e[_0x529277(0x1d5)][_0x529277(0x1e9)][_0x529277(0x21e)]({'polygon':{'hierarchy':{'positions':_0x20c539},'material':Cesium[_0x529277(0x1dc)]['ORANGE']['withAlpha'](0.5),'perPositionHeight':_0x1f4b1b[_0x529277(0x1eb)]===_0x1bdb9e[_0x529277(0x210)]}})),_0x1bdb9e[_0x529277(0x1f3)]['polygon'][_0x529277(0x208)]=_0x20c539,_0x1bdb9e[_0x529277(0x1f3)][_0x529277(0x1e6)]=_0x20c539,_0x1bdb9e[_0x529277(0x1f3)][_0x529277(0x20b)]=!![],_0x1bdb9e['drawEvt']['raiseEvent']({'object':_0x1bdb9e[_0x529277(0x1f3)]});}else{if(_0x1bdb9e[_0x529277(0x1e4)]===_0x515755[_0x529277(0x1fe)]){let _0x3b60f2=[];for(let _0x468e03=0x0,_0x2855da=_0x1bdb9e['polyline'][_0x529277(0x1e6)][_0x529277(0x214)];_0x468e03<_0x2855da;_0x468e03++){_0x3b60f2[_0x529277(0x1f9)](Cesium[_0x529277(0x1ec)]['clone'](_0x1bdb9e[_0x529277(0x1ef)]['positions'][_0x468e03]));}(_0x1bdb9e[_0x529277(0x210)]===_0x1f4b1b[_0x529277(0x218)]||_0x1bdb9e['_clampMode']===_0x1f4b1b['Ground'])&&(!_0x1bdb9e[_0x529277(0x1ed)]&&(_0x1bdb9e[_0x529277(0x1ed)]=[]),_0x1bdb9e['clampToGroundPolylines']['push'](_0x1bdb9e[_0x529277(0x1d5)][_0x529277(0x1e9)][_0x529277(0x21e)]({'polyline':{'positions':_0x3b60f2,'width':0x5,'material':Cesium['Color'][_0x529277(0x1ea)](_0x529277(0x20d)),'clampToGround':!![]}})),_0x1bdb9e['polyline'][_0x529277(0x20b)]=![]),_0x1bdb9e['drawEvt'][_0x529277(0x203)]({'object':_0x1bdb9e[_0x529277(0x1ef)]});}}}}export default DrawHandler;