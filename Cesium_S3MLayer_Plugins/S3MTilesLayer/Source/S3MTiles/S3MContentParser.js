const _0x2925=['specular','center','defined','geoMap','ambientColor','transparentsorting','wrapS','textureunitstate','multiplyByScalar','skeletonNames','CLAMP_TO_EDGE','wrapT','push','byteOffset','Matrix4','diffuseColor','addressmode','modelMatrix','1857777gnMKpC','1685414iZyBhC','fromBoundingSpheres','keys','Cartesian3','minVerticesValue','compressOptions','componentsPerAttribute','instanceBounds','vertCompressConstant','6KoiJnR','clone','texturePackage','rangeDataList','geoPackage','vertexAttributes','textures','material','7697917LjkJfC','transform','bTransparentSorting','typedArray','1DdNMZa','isLeafTile','fromArray','geodes','TextureWrap','869999KprlTe','texmodmatrix','lerp','addTexture','arrayBufferView','byteLength','165213nTFLGy','987273FzElpU','boundingVolume','textureCache','hasOwnProperty','Color','boundingSphere','fileName','vertexPackage','unpack','pageLods','diffuse','SVC_Vertex','specularColor','isTexBlock','edgeGeometry','REPEAT','buffer','BoundingSphere','rangeList','matrix','shininess','distance','247732Ifpjbh','radius','length','groupNode','childTile','multiply','parse','ambient','materialCode','materials'];const _0x458e69=_0x1407;(function(_0x4de53e,_0x241db3){const _0x263b44=_0x1407;while(!![]){try{const _0x4d2697=-parseInt(_0x263b44(0x124))+parseInt(_0x263b44(0x107))*-parseInt(_0x263b44(0x12d))+parseInt(_0x263b44(0xf0))+-parseInt(_0x263b44(0x123))+-parseInt(_0x263b44(0xf1))+-parseInt(_0x263b44(0xe5))*parseInt(_0x263b44(0xea))+parseInt(_0x263b44(0xe1));if(_0x4d2697===_0x241db3)break;else _0x4de53e['push'](_0x4de53e['shift']());}catch(_0x239c1d){_0x4de53e['push'](_0x4de53e['shift']());}}}(_0x2925,0xee593));import _0x4fa7d4 from'./DDSTexture.js';import _0x46a06a from'./MaterialPass.js';function _0x1407(_0x530900,_0xb2c6b2){_0x530900=_0x530900-0xdb;let _0x2925c2=_0x2925[_0x530900];return _0x2925c2;}import _0x49bcc1 from'./Factory/S3MContentFactory.js';import _0xfc23f8 from'./Enum/VertexCompressOption.js';function S3MContentParser(){}function parseMaterial(_0x5d7861,_0x24a535,_0x16565f){const _0x5f14c7=_0x1407;let _0x185663={},_0x571ea0=_0x24a535[_0x5f14c7(0x110)][_0x5f14c7(0xe0)];for(let _0x4ee740=0x0,_0x3d9a03=_0x571ea0[_0x5f14c7(0x109)];_0x4ee740<_0x3d9a03;_0x4ee740++){let _0x203d50=_0x571ea0[_0x4ee740][_0x5f14c7(0xe0)],_0x14a687=_0x203d50['id'],_0x55a8df=new _0x46a06a();_0x185663[_0x14a687]=_0x55a8df;let _0x3629a0=_0x203d50[_0x5f14c7(0x10e)];_0x55a8df[_0x5f14c7(0x115)]=new Cesium[(_0x5f14c7(0xf5))](_0x3629a0['r'],_0x3629a0['g'],_0x3629a0['b'],_0x3629a0['a']);let _0x33dab0=_0x203d50[_0x5f14c7(0xfb)];_0x55a8df[_0x5f14c7(0x120)]=new Cesium[(_0x5f14c7(0xf5))](_0x33dab0['r'],_0x33dab0['g'],_0x33dab0['b'],_0x33dab0['a']);let _0x1ed401=_0x203d50[_0x5f14c7(0x111)];_0x55a8df[_0x5f14c7(0xfd)]=new Cesium[(_0x5f14c7(0xf5))](_0x1ed401['r'],_0x1ed401['g'],_0x1ed401['b'],_0x1ed401['a']),_0x55a8df['shininess']=_0x203d50[_0x5f14c7(0x105)],_0x55a8df[_0x5f14c7(0xe3)]=_0x203d50[_0x5f14c7(0x116)];let _0x5ccd88=_0x203d50['textureunitstates'],_0x3ff505=_0x5ccd88[_0x5f14c7(0x109)];for(let _0x41029e=0x0;_0x41029e<_0x3ff505;_0x41029e++){let _0x4c93d9=_0x5ccd88[_0x41029e][_0x5f14c7(0x118)],_0x569e03=_0x4c93d9['id'],_0x247516=_0x4c93d9[_0x5f14c7(0x121)]['u']===0x0?Cesium[_0x5f14c7(0xe9)][_0x5f14c7(0x100)]:Cesium['TextureWrap'][_0x5f14c7(0x11b)],_0x3d3541=_0x4c93d9[_0x5f14c7(0x121)]['v']===0x0?Cesium['TextureWrap'][_0x5f14c7(0x100)]:Cesium[_0x5f14c7(0xe9)]['CLAMP_TO_EDGE'];_0x55a8df['texMatrix']=Cesium['Matrix4'][_0x5f14c7(0xf9)](_0x4c93d9[_0x5f14c7(0xeb)]);let _0x47eeca=_0x24a535[_0x5f14c7(0xdb)][_0x569e03];if(Cesium[_0x5f14c7(0x113)](_0x47eeca)&&_0x47eeca[_0x5f14c7(0xee)][_0x5f14c7(0xef)]>0x0){_0x47eeca[_0x5f14c7(0x117)]=_0x247516,_0x47eeca[_0x5f14c7(0x11c)]=_0x3d3541;let _0x2b34b7=_0x16565f[_0x5f14c7(0xf7)]+_0x569e03,_0x410603=_0x5d7861[_0x5f14c7(0xf3)]['getTexture'](_0x2b34b7);!Cesium[_0x5f14c7(0x113)](_0x410603)&&(_0x47eeca[_0x5f14c7(0xfe)]=![],_0x410603=new _0x4fa7d4(_0x5d7861,_0x569e03,_0x47eeca),_0x5d7861[_0x5f14c7(0xf3)][_0x5f14c7(0xed)](_0x2b34b7,_0x410603)),_0x55a8df[_0x5f14c7(0xdf)][_0x5f14c7(0x11d)](_0x410603);}}}return _0x185663;}function calcBoundingVolumeForNormal(_0x5e5b2c,_0x34d7e2){const _0x551f1a=_0x1407;let _0x4841f5=new Cesium['BoundingSphere'](),_0x4d05be=new Cesium[(_0x551f1a(0x127))](),_0x454efb=_0x5e5b2c[_0x551f1a(0xde)][0x0],_0x23e2eb=_0x454efb[_0x551f1a(0x12a)],_0x5a8099=Cesium['defined'](_0x5e5b2c[_0x551f1a(0x129)])&&(_0x5e5b2c['compressOptions']&_0xfc23f8[_0x551f1a(0xfc)])===_0xfc23f8['SVC_Vertex'],_0x540cbc=0x1,_0x17cceb,_0x193ab1;_0x5a8099?(_0x540cbc=_0x5e5b2c[_0x551f1a(0x12c)],_0x17cceb=new Cesium[(_0x551f1a(0x127))](_0x5e5b2c[_0x551f1a(0x128)]['x'],_0x5e5b2c[_0x551f1a(0x128)]['y'],_0x5e5b2c['minVerticesValue']['z']),_0x193ab1=new Uint16Array(_0x454efb['typedArray'][_0x551f1a(0x101)],_0x454efb[_0x551f1a(0xe4)][_0x551f1a(0x11e)],_0x454efb[_0x551f1a(0xe4)][_0x551f1a(0xef)]/0x2)):_0x193ab1=new Float32Array(_0x454efb[_0x551f1a(0xe4)][_0x551f1a(0x101)],_0x454efb[_0x551f1a(0xe4)][_0x551f1a(0x11e)],_0x454efb[_0x551f1a(0xe4)][_0x551f1a(0xef)]/0x4);let _0x49cef2=[];for(let _0x51b52e=0x0;_0x51b52e<_0x5e5b2c['verticesCount'];_0x51b52e++){Cesium['Cartesian3'][_0x551f1a(0xe7)](_0x193ab1,_0x23e2eb*_0x51b52e,_0x4d05be),_0x5a8099&&(_0x4d05be=Cesium[_0x551f1a(0x127)][_0x551f1a(0x119)](_0x4d05be,_0x540cbc,_0x4d05be),_0x4d05be=Cesium['Cartesian3']['add'](_0x4d05be,_0x17cceb,_0x4d05be)),_0x49cef2[_0x551f1a(0x11d)](Cesium['Cartesian3'][_0x551f1a(0x12e)](_0x4d05be));}return Cesium[_0x551f1a(0x102)]['fromPoints'](_0x49cef2,_0x4841f5),Cesium[_0x551f1a(0x102)]['transform'](_0x4841f5,_0x34d7e2,_0x4841f5),_0x49cef2[_0x551f1a(0x109)]=0x0,_0x4841f5;}let scratchCenter=new Cesium[(_0x458e69(0x127))]();function calcBoundingVolumeForInstance(_0x4ab1c1){const _0x3a1196=_0x458e69;let _0x364d29=new Cesium[(_0x3a1196(0x102))](),_0x2298c6=_0x4ab1c1[_0x3a1196(0x12b)];if(!Cesium[_0x3a1196(0x113)](_0x2298c6))return _0x364d29;let _0x2fb565=new Cesium[(_0x3a1196(0x127))](_0x2298c6[0x0],_0x2298c6[0x1],_0x2298c6[0x2]),_0x3a1a49=new Cesium['Carteisan3'](_0x2298c6[0x3],_0x2298c6[0x4],_0x2298c6[0x5]),_0x4f25ac=new Cesium['Cartesian3'][(_0x3a1196(0xec))](_0x2fb565,_0x3a1a49,0.5,scratchCenter),_0x2d1965=new Cesium['Cartesian3'][(_0x3a1196(0x106))](_0x4f25ac,_0x2fb565);return _0x364d29[_0x3a1196(0x112)]=_0x4f25ac,_0x364d29[_0x3a1196(0x108)]=_0x2d1965,_0x364d29;}function calcBoundingVolume(_0x45fd2e,_0x3ad892){if(_0x45fd2e['instanceIndex']>-0x1)return calcBoundingVolumeForInstance(_0x45fd2e);return calcBoundingVolumeForNormal(_0x45fd2e,_0x3ad892);}function parseGeodes(_0x3419fa,_0x15d6e2,_0x1995cd,_0x45e1bd,_0xa4a336){const _0x1db7e9=_0x458e69;let _0x5d051a={},_0x34996e=_0x45e1bd[_0x1db7e9(0xe8)];for(let _0x1638b5=0x0,_0x5acb07=_0x34996e[_0x1db7e9(0x109)];_0x1638b5<_0x5acb07;_0x1638b5++){let _0x4c0c0c=_0x34996e[_0x1638b5],_0x5950cc=_0x4c0c0c[_0x1db7e9(0x104)],_0x49b510=Cesium[_0x1db7e9(0x11f)][_0x1db7e9(0x10c)](_0x3419fa[_0x1db7e9(0x122)],_0x5950cc,new Cesium[(_0x1db7e9(0x11f))]()),_0xc7593;Cesium[_0x1db7e9(0x113)](_0xa4a336[_0x1db7e9(0xf2)])&&(_0xc7593=new Cesium[(_0x1db7e9(0x102))](_0xa4a336[_0x1db7e9(0xf2)]['sphere']['center'],_0xa4a336['boundingVolume']['sphere'][_0x1db7e9(0x108)]),Cesium[_0x1db7e9(0x102)][_0x1db7e9(0xe2)](_0xc7593,_0x3419fa[_0x1db7e9(0x122)],_0xc7593));let _0x21cfef=_0x4c0c0c[_0x1db7e9(0x11a)];for(let _0x1babfb=0x0,_0x137141=_0x21cfef[_0x1db7e9(0x109)];_0x1babfb<_0x137141;_0x1babfb++){let _0x3f6ce6=_0x21cfef[_0x1babfb],_0x4f110e=_0x15d6e2[_0x1db7e9(0xdd)][_0x3f6ce6],_0x1114c8=_0x4f110e[_0x1db7e9(0xf8)],_0x1f63d7=_0x4f110e['arrIndexPackage'],_0x54c4d8=_0x4f110e['pickInfo'],_0x38680f;_0x1f63d7[_0x1db7e9(0x109)]>0x0&&(_0x38680f=_0x1995cd[_0x1f63d7[0x0][_0x1db7e9(0x10f)]]);let _0x2ad713=Cesium[_0x1db7e9(0x113)](_0xc7593)?_0xc7593:calcBoundingVolume(_0x1114c8,_0x49b510);_0x5d051a[_0x3f6ce6]=_0x49bcc1[_0x3419fa['fileType']]({'layer':_0x3419fa,'vertexPackage':_0x1114c8,'arrIndexPackage':_0x1f63d7,'pickInfo':_0x54c4d8,'modelMatrix':_0x49b510,'geoMatrix':_0x5950cc,'boundingVolume':_0x2ad713,'material':_0x38680f,'edgeGeometry':_0x4f110e[_0x1db7e9(0xff)],'geoName':_0x3f6ce6});}}if(Object[_0x1db7e9(0x126)](_0x5d051a)[_0x1db7e9(0x109)]<0x1)return;if(!Cesium['defined'](_0xa4a336[_0x1db7e9(0xf2)])){let _0x3fba4d=[];for(let _0x1f6577 in _0x5d051a){_0x5d051a[_0x1db7e9(0xf4)](_0x1f6577)&&_0x3fba4d[_0x1db7e9(0x11d)](_0x5d051a[_0x1f6577]['boundingVolume']);}_0xa4a336[_0x1db7e9(0xf2)]={'sphere':Cesium[_0x1db7e9(0x102)][_0x1db7e9(0x125)](_0x3fba4d)};}_0xa4a336[_0x1db7e9(0x114)]=_0x5d051a;}function parsePagelods(_0x4152e7,_0x336441,_0x4d386f){const _0x1ef402=_0x458e69;let _0x16827d=_0x336441[_0x1ef402(0x10a)],_0x9f6f8e=[];for(let _0x28e74b=0x0,_0x2869b6=_0x16827d[_0x1ef402(0xfa)][_0x1ef402(0x109)];_0x28e74b<_0x2869b6;_0x28e74b++){let _0x13a08c={},_0x3b2ae2=_0x16827d[_0x1ef402(0xfa)][_0x28e74b];_0x13a08c['rangeMode']=_0x3b2ae2['rangeMode'],_0x13a08c[_0x1ef402(0xdc)]=_0x3b2ae2[_0x1ef402(0x10b)],_0x13a08c['rangeList']=_0x3b2ae2[_0x1ef402(0x103)];let _0x210bd9=_0x3b2ae2[_0x1ef402(0xf6)][_0x1ef402(0x112)],_0x38a13f=_0x3b2ae2['boundingSphere'][_0x1ef402(0x108)];_0x13a08c[_0x1ef402(0xdc)]!==''?_0x13a08c[_0x1ef402(0xf2)]={'sphere':{'center':new Cesium[(_0x1ef402(0x127))](_0x210bd9['x'],_0x210bd9['y'],_0x210bd9['z']),'radius':_0x38a13f}}:_0x13a08c[_0x1ef402(0xe6)]=!![],parseGeodes(_0x4152e7,_0x336441,_0x4d386f,_0x3b2ae2,_0x13a08c),Cesium['defined'](_0x13a08c[_0x1ef402(0x114)])&&_0x9f6f8e['push'](_0x13a08c);}return _0x9f6f8e;}S3MContentParser[_0x458e69(0x10d)]=function(_0x30acbc,_0x1eb11f,_0x5c9bcb){const _0x23bbe3=_0x458e69;if(!Cesium[_0x23bbe3(0x113)](_0x1eb11f))return;let _0x3c7e06=parseMaterial(_0x30acbc['context'],_0x1eb11f,_0x5c9bcb),_0x2c2eaa=parsePagelods(_0x30acbc,_0x1eb11f,_0x3c7e06);return _0x2c2eaa;};export default S3MContentParser;