const _0x3c2f=['verticesCount','fromPoints','boundingSphere','Color','modelMatrix','CLAMP_TO_EDGE','geoMap','groupNode','hasOwnProperty','REPEAT','pickInfo','arrayBufferView','fileName','matrix','rangeList','wrapT','shininess','defined','multiply','materialCode','vertCompressConstant','geoPackage','diffuseColor','3LAewnl','bTransparentSorting','218sfIZcK','radius','wrapS','skeletonNames','addressmode','textureunitstate','vertexAttributes','getTexture','boundingVolume','parse','arrIndexPackage','lerp','addTexture','typedArray','byteOffset','texturePackage','transparentsorting','vertexPackage','length','transform','348515KBgDbf','132481DGiKzr','clone','105865MyRXtG','rangeMode','componentsPerAttribute','rangeDataList','fromBoundingSpheres','SVC_Vertex','geodes','context','multiplyByScalar','instanceBounds','center','115735EqXgzj','buffer','compressOptions','262jWzJWQ','979JvWoLr','diffuse','243447VMlhAj','pageLods','ambientColor','minVerticesValue','byteLength','edgeGeometry','isLeafTile','add','distance','material','push','materials','texMatrix','1214ZqrdDy','textureunitstates','TextureWrap','BoundingSphere','Cartesian3','sphere','Matrix4'];const _0x43e1f5=_0x59a4;(function(_0x40b985,_0x248fc2){const _0x41b311=_0x59a4;while(!![]){try{const _0x4d26ab=-parseInt(_0x41b311(0x90))+parseInt(_0x41b311(0x9e))+-parseInt(_0x41b311(0x91))+parseInt(_0x41b311(0x7c))*-parseInt(_0x41b311(0xb1))+parseInt(_0x41b311(0xa4))+parseInt(_0x41b311(0xa1))*parseInt(_0x41b311(0xa2))+parseInt(_0x41b311(0x93))*parseInt(_0x41b311(0x7a));if(_0x4d26ab===_0x248fc2)break;else _0x40b985['push'](_0x40b985['shift']());}catch(_0x381666){_0x40b985['push'](_0x40b985['shift']());}}}(_0x3c2f,0x2dceb));function _0x59a4(_0x19de1c,_0x13fcde){_0x19de1c=_0x19de1c-0x64;let _0x3c2fbf=_0x3c2f[_0x19de1c];return _0x3c2fbf;}import _0x41a389 from'./DDSTexture.js';import _0x1cfb88 from'./MaterialPass.js';import _0x588d79 from'./Factory/S3MContentFactory.js';import _0x4721ea from'./Enum/VertexCompressOption.js';function S3MContentParser(){}function parseMaterial(_0x4429b2,_0x4d3b97,_0xdc402){const _0x338743=_0x59a4;let _0x179afc={},_0x180d45=_0x4d3b97[_0x338743(0xaf)]['material'];for(let _0x568122=0x0,_0x566221=_0x180d45['length'];_0x568122<_0x566221;_0x568122++){let _0x261035=_0x180d45[_0x568122][_0x338743(0xad)],_0x107173=_0x261035['id'],_0x1b9eea=new _0x1cfb88();_0x179afc[_0x107173]=_0x1b9eea;let _0x564fce=_0x261035['ambient'];_0x1b9eea[_0x338743(0xa6)]=new Cesium[(_0x338743(0x66))](_0x564fce['r'],_0x564fce['g'],_0x564fce['b'],_0x564fce['a']);let _0x4dbaf0=_0x261035[_0x338743(0xa3)];_0x1b9eea[_0x338743(0x79)]=new Cesium['Color'](_0x4dbaf0['r'],_0x4dbaf0['g'],_0x4dbaf0['b'],_0x4dbaf0['a']);let _0x2ff047=_0x261035['specular'];_0x1b9eea['specularColor']=new Cesium[(_0x338743(0x66))](_0x2ff047['r'],_0x2ff047['g'],_0x2ff047['b'],_0x2ff047['a']),_0x1b9eea[_0x338743(0x73)]=_0x261035[_0x338743(0x73)],_0x1b9eea[_0x338743(0x7b)]=_0x261035[_0x338743(0x8c)];let _0x12c4da=_0x261035[_0x338743(0xb2)],_0x35c09e=_0x12c4da[_0x338743(0x8e)];for(let _0xc1d542=0x0;_0xc1d542<_0x35c09e;_0xc1d542++){let _0x2a0977=_0x12c4da[_0xc1d542][_0x338743(0x81)],_0x39c3bf=_0x2a0977['id'],_0x19f964=_0x2a0977[_0x338743(0x80)]['u']===0x0?Cesium[_0x338743(0xb3)][_0x338743(0x6c)]:Cesium[_0x338743(0xb3)][_0x338743(0x68)],_0x34ec98=_0x2a0977[_0x338743(0x80)]['v']===0x0?Cesium[_0x338743(0xb3)][_0x338743(0x6c)]:Cesium[_0x338743(0xb3)][_0x338743(0x68)];_0x1b9eea[_0x338743(0xb0)]=Cesium[_0x338743(0xb7)]['unpack'](_0x2a0977['texmodmatrix']);let _0x4021b7=_0x4d3b97[_0x338743(0x8b)][_0x39c3bf];if(Cesium[_0x338743(0x74)](_0x4021b7)&&_0x4021b7[_0x338743(0x6e)][_0x338743(0xa8)]>0x0){_0x4021b7[_0x338743(0x7e)]=_0x19f964,_0x4021b7[_0x338743(0x72)]=_0x34ec98;let _0x3fd23b=_0xdc402[_0x338743(0x6f)]+_0x39c3bf,_0x4f3293=_0x4429b2['textureCache'][_0x338743(0x83)](_0x3fd23b);!Cesium['defined'](_0x4f3293)&&(_0x4021b7['isTexBlock']=![],_0x4f3293=new _0x41a389(_0x4429b2,_0x39c3bf,_0x4021b7),_0x4429b2['textureCache'][_0x338743(0x88)](_0x3fd23b,_0x4f3293)),_0x1b9eea['textures'][_0x338743(0xae)](_0x4f3293);}}}return _0x179afc;}function calcBoundingVolumeForNormal(_0x500b00,_0x4f6a10){const _0x11ff81=_0x59a4;let _0x9b1457=new Cesium[(_0x11ff81(0xb4))](),_0x341ff6=new Cesium[(_0x11ff81(0xb5))](),_0x2ddae5=_0x500b00[_0x11ff81(0x82)][0x0],_0x2b2a83=_0x2ddae5[_0x11ff81(0x95)],_0x324d93=Cesium[_0x11ff81(0x74)](_0x500b00[_0x11ff81(0xa0)])&&(_0x500b00[_0x11ff81(0xa0)]&_0x4721ea[_0x11ff81(0x98)])===_0x4721ea[_0x11ff81(0x98)],_0x225921=0x1,_0xde94e5,_0x9ad145;_0x324d93?(_0x225921=_0x500b00[_0x11ff81(0x77)],_0xde94e5=new Cesium[(_0x11ff81(0xb5))](_0x500b00[_0x11ff81(0xa7)]['x'],_0x500b00['minVerticesValue']['y'],_0x500b00['minVerticesValue']['z']),_0x9ad145=new Uint16Array(_0x2ddae5['typedArray'][_0x11ff81(0x9f)],_0x2ddae5[_0x11ff81(0x89)]['byteOffset'],_0x2ddae5[_0x11ff81(0x89)][_0x11ff81(0xa8)]/0x2)):_0x9ad145=new Float32Array(_0x2ddae5[_0x11ff81(0x89)][_0x11ff81(0x9f)],_0x2ddae5[_0x11ff81(0x89)][_0x11ff81(0x8a)],_0x2ddae5[_0x11ff81(0x89)][_0x11ff81(0xa8)]/0x4);let _0x20b825=[];for(let _0x54b027=0x0;_0x54b027<_0x500b00[_0x11ff81(0xb8)];_0x54b027++){Cesium[_0x11ff81(0xb5)]['fromArray'](_0x9ad145,_0x2b2a83*_0x54b027,_0x341ff6),_0x324d93&&(_0x341ff6=Cesium[_0x11ff81(0xb5)][_0x11ff81(0x9b)](_0x341ff6,_0x225921,_0x341ff6),_0x341ff6=Cesium['Cartesian3'][_0x11ff81(0xab)](_0x341ff6,_0xde94e5,_0x341ff6)),_0x20b825[_0x11ff81(0xae)](Cesium[_0x11ff81(0xb5)][_0x11ff81(0x92)](_0x341ff6));}return Cesium[_0x11ff81(0xb4)][_0x11ff81(0x64)](_0x20b825,_0x9b1457),Cesium['BoundingSphere'][_0x11ff81(0x8f)](_0x9b1457,_0x4f6a10,_0x9b1457),_0x20b825[_0x11ff81(0x8e)]=0x0,_0x9b1457;}let scratchCenter=new Cesium['Cartesian3']();function calcBoundingVolumeForInstance(_0x9e2def){const _0x2f6f9b=_0x59a4;let _0x27ae3c=new Cesium['BoundingSphere'](),_0x440c52=_0x9e2def[_0x2f6f9b(0x9c)];if(!Cesium[_0x2f6f9b(0x74)](_0x440c52))return _0x27ae3c;let _0x267044=new Cesium['Cartesian3'](_0x440c52[0x0],_0x440c52[0x1],_0x440c52[0x2]),_0x3d3737=new Cesium['Carteisan3'](_0x440c52[0x3],_0x440c52[0x4],_0x440c52[0x5]),_0x16ea85=new Cesium[(_0x2f6f9b(0xb5))][(_0x2f6f9b(0x87))](_0x267044,_0x3d3737,0.5,scratchCenter),_0x4592b8=new Cesium[(_0x2f6f9b(0xb5))][(_0x2f6f9b(0xac))](_0x16ea85,_0x267044);return _0x27ae3c[_0x2f6f9b(0x9d)]=_0x16ea85,_0x27ae3c[_0x2f6f9b(0x7d)]=_0x4592b8,_0x27ae3c;}function calcBoundingVolume(_0x51a3af,_0x4ed72b){if(_0x51a3af['instanceIndex']>-0x1)return calcBoundingVolumeForInstance(_0x51a3af);return calcBoundingVolumeForNormal(_0x51a3af,_0x4ed72b);}function parseGeodes(_0x58ff6e,_0x1b2288,_0x2f7cf0,_0x445ba9,_0x2ff918){const _0x4e526c=_0x59a4;let _0x14c2ab={},_0x21d13a=_0x445ba9[_0x4e526c(0x99)];for(let _0x4f79a7=0x0,_0x4bbb3d=_0x21d13a['length'];_0x4f79a7<_0x4bbb3d;_0x4f79a7++){let _0x400f60=_0x21d13a[_0x4f79a7],_0x2065cd=_0x400f60[_0x4e526c(0x70)],_0x114252=Cesium[_0x4e526c(0xb7)][_0x4e526c(0x75)](_0x58ff6e[_0x4e526c(0x67)],_0x2065cd,new Cesium[(_0x4e526c(0xb7))]()),_0x2084eb;Cesium[_0x4e526c(0x74)](_0x2ff918['boundingVolume'])&&(_0x2084eb=new Cesium[(_0x4e526c(0xb4))](_0x2ff918['boundingVolume'][_0x4e526c(0xb6)][_0x4e526c(0x9d)],_0x2ff918[_0x4e526c(0x84)]['sphere'][_0x4e526c(0x7d)]),Cesium[_0x4e526c(0xb4)][_0x4e526c(0x8f)](_0x2084eb,_0x58ff6e[_0x4e526c(0x67)],_0x2084eb));let _0x5279b9=_0x400f60[_0x4e526c(0x7f)];for(let _0x50c548=0x0,_0x586200=_0x5279b9[_0x4e526c(0x8e)];_0x50c548<_0x586200;_0x50c548++){let _0x3f4065=_0x5279b9[_0x50c548],_0x11c048=_0x1b2288[_0x4e526c(0x78)][_0x3f4065],_0x2ebcec=_0x11c048[_0x4e526c(0x8d)],_0x46b335=_0x11c048[_0x4e526c(0x86)],_0x22b3f9=_0x11c048[_0x4e526c(0x6d)],_0x5114ed;_0x46b335[_0x4e526c(0x8e)]>0x0&&(_0x5114ed=_0x2f7cf0[_0x46b335[0x0][_0x4e526c(0x76)]]);let _0x47f977=Cesium[_0x4e526c(0x74)](_0x2084eb)?_0x2084eb:calcBoundingVolume(_0x2ebcec,_0x114252);_0x14c2ab[_0x3f4065]=_0x588d79[_0x58ff6e['fileType']]({'layer':_0x58ff6e,'vertexPackage':_0x2ebcec,'arrIndexPackage':_0x46b335,'pickInfo':_0x22b3f9,'modelMatrix':_0x114252,'geoMatrix':_0x2065cd,'boundingVolume':_0x47f977,'material':_0x5114ed,'edgeGeometry':_0x11c048[_0x4e526c(0xa9)],'geoName':_0x3f4065});}}if(Object['keys'](_0x14c2ab)[_0x4e526c(0x8e)]<0x1)return;if(!Cesium[_0x4e526c(0x74)](_0x2ff918[_0x4e526c(0x84)])){let _0x4f8740=[];for(let _0x242d8b in _0x14c2ab){_0x14c2ab[_0x4e526c(0x6b)](_0x242d8b)&&_0x4f8740[_0x4e526c(0xae)](_0x14c2ab[_0x242d8b]['boundingVolume']);}_0x2ff918[_0x4e526c(0x84)]={'sphere':Cesium[_0x4e526c(0xb4)][_0x4e526c(0x97)](_0x4f8740)};}_0x2ff918[_0x4e526c(0x69)]=_0x14c2ab;}function parsePagelods(_0x2567c0,_0xf90cf0,_0x2458d2){const _0x5b3236=_0x59a4;let _0x30a0fc=_0xf90cf0[_0x5b3236(0x6a)],_0xb8b2e9=[];for(let _0x1515c7=0x0,_0x1bd0d3=_0x30a0fc[_0x5b3236(0xa5)]['length'];_0x1515c7<_0x1bd0d3;_0x1515c7++){let _0x5bba13={},_0x4139c3=_0x30a0fc[_0x5b3236(0xa5)][_0x1515c7];_0x5bba13[_0x5b3236(0x94)]=_0x4139c3['rangeMode'],_0x5bba13[_0x5b3236(0x96)]=_0x4139c3['childTile'],_0x5bba13[_0x5b3236(0x71)]=_0x4139c3[_0x5b3236(0x71)];let _0x109a54=_0x4139c3[_0x5b3236(0x65)][_0x5b3236(0x9d)],_0x134b84=_0x4139c3[_0x5b3236(0x65)]['radius'];_0x5bba13[_0x5b3236(0x96)]!==''?_0x5bba13['boundingVolume']={'sphere':{'center':new Cesium[(_0x5b3236(0xb5))](_0x109a54['x'],_0x109a54['y'],_0x109a54['z']),'radius':_0x134b84}}:_0x5bba13[_0x5b3236(0xaa)]=!![],parseGeodes(_0x2567c0,_0xf90cf0,_0x2458d2,_0x4139c3,_0x5bba13),Cesium[_0x5b3236(0x74)](_0x5bba13[_0x5b3236(0x69)])&&_0xb8b2e9[_0x5b3236(0xae)](_0x5bba13);}return _0xb8b2e9;}S3MContentParser[_0x43e1f5(0x85)]=function(_0xa0689c,_0x144520,_0x1fbfb1){const _0x19a738=_0x43e1f5;if(!Cesium['defined'](_0x144520))return;let _0x5ac3cf=parseMaterial(_0xa0689c[_0x19a738(0x9a)],_0x144520,_0x1fbfb1),_0x2e2edb=parsePagelods(_0xa0689c,_0x144520,_0x5ac3cf);return _0x2e2edb;};export default S3MContentParser;