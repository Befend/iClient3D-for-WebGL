const _0x1e39=['Carteisan3','childTile','boundingSphere','pageLods','CLAMP_TO_EDGE','Matrix4','transparentsorting','boundingVolume','SVC_Vertex','1nhNNCi','6263eJrDbD','vertCompressConstant','buffer','11658aXBMre','15xMwrxp','getTexture','context','textureunitstate','push','addTexture','texturePackage','arrIndexPackage','skeletonNames','instanceBounds','vertexAttributes','multiplyByScalar','rangeList','center','material','byteOffset','textures','byteLength','radius','textureCache','wrapT','texMatrix','ambientColor','1FghKsr','materialCode','componentsPerAttribute','sphere','edgeGeometry','addressmode','materials','hasOwnProperty','instanceIndex','Cartesian3','1skYOHt','rangeDataList','unpack','BoundingSphere','rangeMode','length','TextureWrap','clone','diffuseColor','arrayBufferView','geodes','shininess','ambient','vertexPackage','geoMap','fromArray','diffuse','isTexBlock','274667LhUTrw','fromBoundingSpheres','typedArray','921233mqEZvU','matrix','compressOptions','lerp','REPEAT','modelMatrix','verticesCount','textureunitstates','253785YkkrCC','2161423xbLjUv','minVerticesValue','807235PZBKtg','defined','keys','fromPoints','multiply','Color'];const _0x1d9f43=_0x4b69;(function(_0x4243bb,_0x1b5265){const _0x4bcde2=_0x4b69;while(!![]){try{const _0x4427f9=-parseInt(_0x4bcde2(0x1af))*parseInt(_0x4bcde2(0x188))+parseInt(_0x4bcde2(0x1c5))+parseInt(_0x4bcde2(0x1a7))*-parseInt(_0x4bcde2(0x192))+parseInt(_0x4bcde2(0x1c6))*parseInt(_0x4bcde2(0x1c2))+-parseInt(_0x4bcde2(0x1b2))+parseInt(_0x4bcde2(0x1c1))*parseInt(_0x4bcde2(0x1a4))+parseInt(_0x4bcde2(0x1b0));if(_0x4427f9===_0x1b5265)break;else _0x4243bb['push'](_0x4243bb['shift']());}catch(_0x56e5da){_0x4243bb['push'](_0x4243bb['shift']());}}}(_0x1e39,0x88950));import _0x4d7dc5 from'./DDSTexture.js';import _0x5df57f from'./MaterialPass.js';import _0xd3ade5 from'./Factory/S3MContentFactory.js';import _0x3f0fd0 from'./Enum/VertexCompressOption.js';function S3MContentParser(){}function parseMaterial(_0x4346f0,_0x3b5a1e,_0x3336a0){const _0xb2cf9=_0x4b69;let _0x309b45={},_0x3474db=_0x3b5a1e[_0xb2cf9(0x18e)][_0xb2cf9(0x17f)];for(let _0x3e9fc4=0x0,_0x2f915e=_0x3474db[_0xb2cf9(0x197)];_0x3e9fc4<_0x2f915e;_0x3e9fc4++){let _0x14c641=_0x3474db[_0x3e9fc4][_0xb2cf9(0x17f)],_0x44a1ec=_0x14c641['id'],_0x1a2aa5=new _0x5df57f();_0x309b45[_0x44a1ec]=_0x1a2aa5;let _0x229add=_0x14c641[_0xb2cf9(0x19e)];_0x1a2aa5[_0xb2cf9(0x187)]=new Cesium[(_0xb2cf9(0x1b7))](_0x229add['r'],_0x229add['g'],_0x229add['b'],_0x229add['a']);let _0xdaaddb=_0x14c641[_0xb2cf9(0x1a2)];_0x1a2aa5[_0xb2cf9(0x19a)]=new Cesium[(_0xb2cf9(0x1b7))](_0xdaaddb['r'],_0xdaaddb['g'],_0xdaaddb['b'],_0xdaaddb['a']);let _0x1a79ed=_0x14c641['specular'];_0x1a2aa5['specularColor']=new Cesium[(_0xb2cf9(0x1b7))](_0x1a79ed['r'],_0x1a79ed['g'],_0x1a79ed['b'],_0x1a79ed['a']),_0x1a2aa5[_0xb2cf9(0x19d)]=_0x14c641['shininess'],_0x1a2aa5['bTransparentSorting']=_0x14c641[_0xb2cf9(0x1be)];let _0x4c7a0e=_0x14c641[_0xb2cf9(0x1ae)],_0x5e4ea3=_0x4c7a0e[_0xb2cf9(0x197)];for(let _0x54447c=0x0;_0x54447c<_0x5e4ea3;_0x54447c++){let _0x38081c=_0x4c7a0e[_0x54447c][_0xb2cf9(0x1c9)],_0x1489da=_0x38081c['id'],_0x45d70b=_0x38081c['addressmode']['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium[_0xb2cf9(0x198)]['CLAMP_TO_EDGE'],_0x3d409f=_0x38081c[_0xb2cf9(0x18d)]['v']===0x0?Cesium['TextureWrap'][_0xb2cf9(0x1ab)]:Cesium[_0xb2cf9(0x198)][_0xb2cf9(0x1bc)];_0x1a2aa5[_0xb2cf9(0x186)]=Cesium[_0xb2cf9(0x1bd)][_0xb2cf9(0x194)](_0x38081c['texmodmatrix']);let _0x3c317e=_0x3b5a1e[_0xb2cf9(0x177)][_0x1489da];if(Cesium['defined'](_0x3c317e)&&_0x3c317e[_0xb2cf9(0x19b)][_0xb2cf9(0x182)]>0x0){_0x3c317e['wrapS']=_0x45d70b,_0x3c317e[_0xb2cf9(0x185)]=_0x3d409f;let _0x13526e=_0x3336a0['fileName']+_0x1489da,_0x18f59c=_0x4346f0[_0xb2cf9(0x184)][_0xb2cf9(0x1c7)](_0x13526e);!Cesium[_0xb2cf9(0x1b3)](_0x18f59c)&&(_0x3c317e[_0xb2cf9(0x1a3)]=![],_0x18f59c=new _0x4d7dc5(_0x4346f0,_0x1489da,_0x3c317e),_0x4346f0['textureCache'][_0xb2cf9(0x176)](_0x13526e,_0x18f59c)),_0x1a2aa5[_0xb2cf9(0x181)][_0xb2cf9(0x1ca)](_0x18f59c);}}}return _0x309b45;}function calcBoundingVolumeForNormal(_0x3ec014,_0x5a8ec8){const _0x5b9a37=_0x4b69;let _0x35dd4=new Cesium['BoundingSphere'](),_0x1ffef2=new Cesium['Cartesian3'](),_0x3d488b=_0x3ec014[_0x5b9a37(0x17b)][0x0],_0x9c38aa=_0x3d488b[_0x5b9a37(0x18a)],_0x542675=Cesium[_0x5b9a37(0x1b3)](_0x3ec014[_0x5b9a37(0x1a9)])&&(_0x3ec014[_0x5b9a37(0x1a9)]&_0x3f0fd0[_0x5b9a37(0x1c0)])===_0x3f0fd0[_0x5b9a37(0x1c0)],_0x238148=0x1,_0x14d9ae,_0x1063b8;_0x542675?(_0x238148=_0x3ec014[_0x5b9a37(0x1c3)],_0x14d9ae=new Cesium[(_0x5b9a37(0x191))](_0x3ec014[_0x5b9a37(0x1b1)]['x'],_0x3ec014[_0x5b9a37(0x1b1)]['y'],_0x3ec014[_0x5b9a37(0x1b1)]['z']),_0x1063b8=new Uint16Array(_0x3d488b[_0x5b9a37(0x1a6)][_0x5b9a37(0x1c4)],_0x3d488b[_0x5b9a37(0x1a6)][_0x5b9a37(0x180)],_0x3d488b[_0x5b9a37(0x1a6)][_0x5b9a37(0x182)]/0x2)):_0x1063b8=new Float32Array(_0x3d488b[_0x5b9a37(0x1a6)][_0x5b9a37(0x1c4)],_0x3d488b[_0x5b9a37(0x1a6)][_0x5b9a37(0x180)],_0x3d488b['typedArray']['byteLength']/0x4);let _0x1aba82=[];for(let _0x5ce6a1=0x0;_0x5ce6a1<_0x3ec014[_0x5b9a37(0x1ad)];_0x5ce6a1++){Cesium[_0x5b9a37(0x191)][_0x5b9a37(0x1a1)](_0x1063b8,_0x9c38aa*_0x5ce6a1,_0x1ffef2),_0x542675&&(_0x1ffef2=Cesium[_0x5b9a37(0x191)][_0x5b9a37(0x17c)](_0x1ffef2,_0x238148,_0x1ffef2),_0x1ffef2=Cesium['Cartesian3']['add'](_0x1ffef2,_0x14d9ae,_0x1ffef2)),_0x1aba82[_0x5b9a37(0x1ca)](Cesium[_0x5b9a37(0x191)][_0x5b9a37(0x199)](_0x1ffef2));}return Cesium['BoundingSphere'][_0x5b9a37(0x1b5)](_0x1aba82,_0x35dd4),Cesium[_0x5b9a37(0x195)]['transform'](_0x35dd4,_0x5a8ec8,_0x35dd4),_0x1aba82['length']=0x0,_0x35dd4;}let scratchCenter=new Cesium[(_0x1d9f43(0x191))]();function calcBoundingVolumeForInstance(_0x519640){const _0x4d3dfb=_0x1d9f43;let _0xe95f50=new Cesium[(_0x4d3dfb(0x195))](),_0x22ea06=_0x519640[_0x4d3dfb(0x17a)];if(!Cesium[_0x4d3dfb(0x1b3)](_0x22ea06))return _0xe95f50;let _0x2e3d6f=new Cesium[(_0x4d3dfb(0x191))](_0x22ea06[0x0],_0x22ea06[0x1],_0x22ea06[0x2]),_0x4f101f=new Cesium[(_0x4d3dfb(0x1b8))](_0x22ea06[0x3],_0x22ea06[0x4],_0x22ea06[0x5]),_0x33337e=new Cesium[(_0x4d3dfb(0x191))][(_0x4d3dfb(0x1aa))](_0x2e3d6f,_0x4f101f,0.5,scratchCenter),_0x596897=new Cesium[(_0x4d3dfb(0x191))]['distance'](_0x33337e,_0x2e3d6f);return _0xe95f50[_0x4d3dfb(0x17e)]=_0x33337e,_0xe95f50['radius']=_0x596897,_0xe95f50;}function calcBoundingVolume(_0x442253,_0x35cabb){const _0x6107ad=_0x1d9f43;if(_0x442253[_0x6107ad(0x190)]>-0x1)return calcBoundingVolumeForInstance(_0x442253);return calcBoundingVolumeForNormal(_0x442253,_0x35cabb);}function parseGeodes(_0x4d1df7,_0xeb5a4f,_0x5c1e41,_0x4eafb2,_0x2362eb){const _0x1d0d2a=_0x1d9f43;let _0x1ae43b={},_0x20faac=_0x4eafb2[_0x1d0d2a(0x19c)];for(let _0x2f1bee=0x0,_0xd4304f=_0x20faac[_0x1d0d2a(0x197)];_0x2f1bee<_0xd4304f;_0x2f1bee++){let _0x2661ae=_0x20faac[_0x2f1bee],_0xfeea35=_0x2661ae[_0x1d0d2a(0x1a8)],_0x27b769=Cesium[_0x1d0d2a(0x1bd)][_0x1d0d2a(0x1b6)](_0x4d1df7[_0x1d0d2a(0x1ac)],_0xfeea35,new Cesium['Matrix4']()),_0xe8f4ec;Cesium[_0x1d0d2a(0x1b3)](_0x2362eb[_0x1d0d2a(0x1bf)])&&(_0xe8f4ec=new Cesium[(_0x1d0d2a(0x195))](_0x2362eb[_0x1d0d2a(0x1bf)][_0x1d0d2a(0x18b)][_0x1d0d2a(0x17e)],_0x2362eb[_0x1d0d2a(0x1bf)][_0x1d0d2a(0x18b)][_0x1d0d2a(0x183)]),Cesium[_0x1d0d2a(0x195)]['transform'](_0xe8f4ec,_0x4d1df7[_0x1d0d2a(0x1ac)],_0xe8f4ec));let _0x5a5ef1=_0x2661ae[_0x1d0d2a(0x179)];for(let _0x1532c6=0x0,_0x5a038b=_0x5a5ef1[_0x1d0d2a(0x197)];_0x1532c6<_0x5a038b;_0x1532c6++){let _0x3d6e1d=_0x5a5ef1[_0x1532c6],_0x11a130=_0xeb5a4f['geoPackage'][_0x3d6e1d],_0x123d80=_0x11a130[_0x1d0d2a(0x19f)],_0x2da1c5=_0x11a130[_0x1d0d2a(0x178)],_0x291d79=_0x11a130['pickInfo'],_0x1d6b50;_0x2da1c5['length']>0x0&&(_0x1d6b50=_0x5c1e41[_0x2da1c5[0x0][_0x1d0d2a(0x189)]]);let _0x4baaca=Cesium[_0x1d0d2a(0x1b3)](_0xe8f4ec)?_0xe8f4ec:calcBoundingVolume(_0x123d80,_0x27b769);_0x1ae43b[_0x3d6e1d]=_0xd3ade5[_0x4d1df7['fileType']]({'layer':_0x4d1df7,'vertexPackage':_0x123d80,'arrIndexPackage':_0x2da1c5,'pickInfo':_0x291d79,'modelMatrix':_0x27b769,'geoMatrix':_0xfeea35,'boundingVolume':_0x4baaca,'material':_0x1d6b50,'edgeGeometry':_0x11a130[_0x1d0d2a(0x18c)],'geoName':_0x3d6e1d});}}if(Object[_0x1d0d2a(0x1b4)](_0x1ae43b)['length']<0x1)return;if(!Cesium[_0x1d0d2a(0x1b3)](_0x2362eb[_0x1d0d2a(0x1bf)])){let _0x1055e2=[];for(let _0x52569b in _0x1ae43b){_0x1ae43b[_0x1d0d2a(0x18f)](_0x52569b)&&_0x1055e2[_0x1d0d2a(0x1ca)](_0x1ae43b[_0x52569b][_0x1d0d2a(0x1bf)]);}_0x2362eb['boundingVolume']={'sphere':Cesium[_0x1d0d2a(0x195)][_0x1d0d2a(0x1a5)](_0x1055e2)};}_0x2362eb[_0x1d0d2a(0x1a0)]=_0x1ae43b;}function parsePagelods(_0x548a38,_0x4b9ff1,_0xa365b8){const _0x363106=_0x1d9f43;let _0x335f60=_0x4b9ff1['groupNode'],_0x24ffa3=[];for(let _0x50cdfd=0x0,_0x26c7b9=_0x335f60[_0x363106(0x1bb)][_0x363106(0x197)];_0x50cdfd<_0x26c7b9;_0x50cdfd++){let _0xbb21ed={},_0x34beb2=_0x335f60[_0x363106(0x1bb)][_0x50cdfd];_0xbb21ed[_0x363106(0x196)]=_0x34beb2[_0x363106(0x196)],_0xbb21ed[_0x363106(0x193)]=_0x34beb2[_0x363106(0x1b9)],_0xbb21ed[_0x363106(0x17d)]=_0x34beb2[_0x363106(0x17d)];let _0x8f5809=_0x34beb2['boundingSphere']['center'],_0x18ffee=_0x34beb2[_0x363106(0x1ba)][_0x363106(0x183)];_0xbb21ed[_0x363106(0x1bf)]={'sphere':{'center':new Cesium[(_0x363106(0x191))](_0x8f5809['x'],_0x8f5809['y'],_0x8f5809['z']),'radius':_0x18ffee}},parseGeodes(_0x548a38,_0x4b9ff1,_0xa365b8,_0x34beb2,_0xbb21ed),Cesium['defined'](_0xbb21ed[_0x363106(0x1a0)])&&_0x24ffa3[_0x363106(0x1ca)](_0xbb21ed);}return _0x24ffa3;}S3MContentParser['parse']=function(_0x324502,_0x452812,_0x4b2aa8){const _0x14eb93=_0x1d9f43;if(!Cesium[_0x14eb93(0x1b3)](_0x452812))return;let _0xab492=parseMaterial(_0x324502[_0x14eb93(0x1c8)],_0x452812,_0x4b2aa8),_0x2d3626=parsePagelods(_0x324502,_0x452812,_0xab492);return _0x2d3626;};function _0x4b69(_0x4b2169,_0x59cd2b){_0x4b2169=_0x4b2169-0x176;let _0x1e3928=_0x1e39[_0x4b2169];return _0x1e3928;}export default S3MContentParser;