const _0x169f=['context','layerId','geoPackage','116719gFSfFx','diffuse','create','geodes','length','SVC_Vertex','arrIndexPackage','defined','rangeDataList','materialCode','texMatrix','_subTextureManager','transform','BoundingSphere','_materialManager','buffer','keys','3653XAbZLW','pageLods','fromBoundingSpheres','REPEAT','tile','432aEJIYl','edgeGeometry','Cartesian3','createTexture','material','241336aqZFri','fromPoints','matrix','vertexPackage','push','transparentsorting','byteLength','instanceBounds','componentsPerAttribute','modelMatrix','geoMap','shininess','1sXsQxG','bTransparentSorting','unpack','wrapT','compressOptions','parse','384469hBYxMp','radius','boundingSphere','groupNode','texmodmatrix','textureunitstates','Carteisan3','hasOwnProperty','fileType','isLeafTile','center','1FcwKmW','instanceIndex','609341KDJsAK','51817tMdaBE','fromArray','materials','rangeMode','addressmode','clone','lerp','59EnYDmn','minVerticesValue','multiplyByScalar','typedArray','872vsXJuv','Matrix4','texturePackage','distance','rangeList','vertCompressConstant','sphere','CLAMP_TO_EDGE','byteOffset','multiply','Color','boundingVolume','TextureWrap'];const _0x515f3c=_0x52f6;(function(_0x6950c3,_0x44301e){const _0x35985f=_0x52f6;while(!![]){try{const _0x976dd0=-parseInt(_0x35985f(0x1a7))*-parseInt(_0x35985f(0x1ba))+parseInt(_0x35985f(0x1bb))+parseInt(_0x35985f(0x1ad))+-parseInt(_0x35985f(0x1f1))+parseInt(_0x35985f(0x1d6))*parseInt(_0x35985f(0x1b8))+parseInt(_0x35985f(0x1c6))*-parseInt(_0x35985f(0x1ec))+parseInt(_0x35985f(0x1c2))*-parseInt(_0x35985f(0x1e7));if(_0x976dd0===_0x44301e)break;else _0x6950c3['push'](_0x6950c3['shift']());}catch(_0x2a874a){_0x6950c3['push'](_0x6950c3['shift']());}}}(_0x169f,0x5044b));function _0x52f6(_0x2cb4db,_0x14f6ef){_0x2cb4db=_0x2cb4db-0x19c;let _0x169f04=_0x169f[_0x2cb4db];return _0x169f04;}import _0x2cf165 from'./DDSTexture.js';import _0x7afc98 from'./MaterialPass.js';import _0x4779f9 from'./Factory/S3MContentFactory.js';import _0x9c73b5 from'./Enum/VertexCompressOption.js';import _0xe0c4e4 from'./MaterialManager.js';import _0x4bd3c from'./SubTextureManager.js';function S3MBlockContentParser(){}function parseMaterial(_0x508631,_0x480f89,_0x28e061){const _0x1ad1ac=_0x52f6;let _0x1e9120=_0x508631[_0x1ad1ac(0x1d3)],_0x33399d=_0x508631[_0x1ad1ac(0x1e4)];!_0x33399d&&(_0x33399d=_0x508631[_0x1ad1ac(0x1e4)]=new _0xe0c4e4());let _0xd478bf=_0x508631[_0x1ad1ac(0x1e1)];!_0x508631[_0x1ad1ac(0x1e1)]&&(_0x508631[_0x1ad1ac(0x1e1)]=_0x4bd3c['getSingleInstance']());let _0x4df48e=_0x480f89[_0x1ad1ac(0x1bd)][_0x1ad1ac(0x1f0)];for(let _0x554a4b=0x0,_0x27cf13=_0x4df48e['length'];_0x554a4b<_0x27cf13;_0x554a4b++){let _0x1711ed=_0x4df48e[_0x554a4b][_0x1ad1ac(0x1f0)],_0x52a7e9=_0x1711ed['id'],_0x5c7dc4=_0x33399d['create'](_0x52a7e9);_0x5c7dc4[_0x1ad1ac(0x1d4)]=_0x508631['id'],_0x5c7dc4[_0x1ad1ac(0x1eb)]=_0x28e061;let _0x5d9db6=_0x1711ed['ambient'];_0x5c7dc4['ambientColor']=new Cesium[(_0x1ad1ac(0x1d0))](_0x5d9db6['r'],_0x5d9db6['g'],_0x5d9db6['b'],_0x5d9db6['a']);let _0x4fc5cb=_0x1711ed[_0x1ad1ac(0x1d7)];_0x5c7dc4['diffuseColor']=new Cesium['Color'](_0x4fc5cb['r'],_0x4fc5cb['g'],_0x4fc5cb['b'],_0x4fc5cb['a']);let _0x15101a=_0x1711ed['specular'];_0x5c7dc4['specularColor']=new Cesium[(_0x1ad1ac(0x1d0))](_0x15101a['r'],_0x15101a['g'],_0x15101a['b'],_0x15101a['a']),_0x5c7dc4[_0x1ad1ac(0x1a6)]=_0x1711ed[_0x1ad1ac(0x1a6)],_0x5c7dc4[_0x1ad1ac(0x1a8)]=_0x1711ed[_0x1ad1ac(0x1a0)],_0x5c7dc4['id']=_0x52a7e9;let _0x39f9ec=_0x1711ed[_0x1ad1ac(0x1b2)],_0x2e8d97=_0x39f9ec[_0x1ad1ac(0x1da)];for(let _0x33f0ad=0x0;_0x33f0ad<0x1;_0x33f0ad++){let _0x162522=_0x39f9ec[_0x33f0ad]['textureunitstate'],_0x33d6ea=_0x162522['id'],_0xbc3c8f=_0x162522[_0x1ad1ac(0x1bf)]['u']===0x0?Cesium[_0x1ad1ac(0x1d2)][_0x1ad1ac(0x1ea)]:Cesium[_0x1ad1ac(0x1d2)][_0x1ad1ac(0x1cd)],_0x221ba3=_0x162522[_0x1ad1ac(0x1bf)]['v']===0x0?Cesium[_0x1ad1ac(0x1d2)][_0x1ad1ac(0x1ea)]:Cesium[_0x1ad1ac(0x1d2)][_0x1ad1ac(0x1cd)];_0x5c7dc4[_0x1ad1ac(0x1e0)]=Cesium[_0x1ad1ac(0x1c7)][_0x1ad1ac(0x1a9)](_0x162522[_0x1ad1ac(0x1b1)]);let _0x54b8aa=_0x480f89[_0x1ad1ac(0x1c8)][_0x33d6ea];_0x54b8aa&&(_0x54b8aa['wrapS']=_0xbc3c8f,_0x54b8aa[_0x1ad1ac(0x1aa)]=_0x221ba3,_0x5c7dc4[_0x1ad1ac(0x1ef)](_0x508631,_0x28e061,_0x54b8aa,_0x33f0ad,_0x480f89));}}}function calcBoundingVolumeForNormal(_0x466601,_0x2fe76e){const _0xc1c249=_0x52f6;let _0x2cb1a7=new Cesium['BoundingSphere'](),_0x22032b=new Cesium['Cartesian3'](),_0x5a80da=_0x466601['vertexAttributes'][0x0],_0x5cc7e8=_0x5a80da[_0xc1c249(0x1a3)],_0x46ed9a=Cesium['defined'](_0x466601[_0xc1c249(0x1ab)])&&(_0x466601['compressOptions']&_0x9c73b5[_0xc1c249(0x1db)])===_0x9c73b5[_0xc1c249(0x1db)],_0x83ec7c=0x1,_0x1374a1,_0x6e59b1;_0x46ed9a?(_0x83ec7c=_0x466601[_0xc1c249(0x1cb)],_0x1374a1=new Cesium[(_0xc1c249(0x1ee))](_0x466601[_0xc1c249(0x1c3)]['x'],_0x466601['minVerticesValue']['y'],_0x466601['minVerticesValue']['z']),_0x6e59b1=new Uint16Array(_0x5a80da['typedArray'][_0xc1c249(0x1e5)],_0x5a80da['typedArray'][_0xc1c249(0x1ce)],_0x5a80da[_0xc1c249(0x1c5)][_0xc1c249(0x1a1)]/0x2)):_0x6e59b1=new Float32Array(_0x5a80da[_0xc1c249(0x1c5)][_0xc1c249(0x1e5)],_0x5a80da[_0xc1c249(0x1c5)]['byteOffset'],_0x5a80da[_0xc1c249(0x1c5)][_0xc1c249(0x1a1)]/0x4);let _0x35c780=[];for(let _0x161d10=0x0;_0x161d10<_0x466601['verticesCount'];_0x161d10++){Cesium[_0xc1c249(0x1ee)][_0xc1c249(0x1bc)](_0x6e59b1,_0x5cc7e8*_0x161d10,_0x22032b),_0x46ed9a&&(_0x22032b=Cesium[_0xc1c249(0x1ee)][_0xc1c249(0x1c4)](_0x22032b,_0x83ec7c,_0x22032b),_0x22032b=Cesium[_0xc1c249(0x1ee)]['add'](_0x22032b,_0x1374a1,_0x22032b)),_0x35c780[_0xc1c249(0x19f)](Cesium[_0xc1c249(0x1ee)][_0xc1c249(0x1c0)](_0x22032b));}return Cesium[_0xc1c249(0x1e3)][_0xc1c249(0x19c)](_0x35c780,_0x2cb1a7),Cesium[_0xc1c249(0x1e3)][_0xc1c249(0x1e2)](_0x2cb1a7,_0x2fe76e,_0x2cb1a7),_0x35c780[_0xc1c249(0x1da)]=0x0,_0x2cb1a7;}let scratchCenter=new Cesium[(_0x515f3c(0x1ee))]();function calcBoundingVolumeForInstance(_0x2d0200){const _0x2bea36=_0x515f3c;let _0x165b3d=new Cesium[(_0x2bea36(0x1e3))](),_0x5c4deb=_0x2d0200[_0x2bea36(0x1a2)];if(!Cesium['defined'](_0x5c4deb))return _0x165b3d;let _0x50e9d2=new Cesium['Cartesian3'](_0x5c4deb[0x0],_0x5c4deb[0x1],_0x5c4deb[0x2]),_0x56f97c=new Cesium[(_0x2bea36(0x1b3))](_0x5c4deb[0x3],_0x5c4deb[0x4],_0x5c4deb[0x5]),_0x20a0da=new Cesium[(_0x2bea36(0x1ee))][(_0x2bea36(0x1c1))](_0x50e9d2,_0x56f97c,0.5,scratchCenter),_0x4d3bfe=new Cesium[(_0x2bea36(0x1ee))][(_0x2bea36(0x1c9))](_0x20a0da,_0x50e9d2);return _0x165b3d[_0x2bea36(0x1b7)]=_0x20a0da,_0x165b3d['radius']=_0x4d3bfe,_0x165b3d;}function calcBoundingVolume(_0x1ef0c6,_0x3891d8){const _0x58ffdc=_0x515f3c;if(_0x1ef0c6[_0x58ffdc(0x1b9)]>-0x1)return calcBoundingVolumeForInstance(_0x1ef0c6);return calcBoundingVolumeForNormal(_0x1ef0c6,_0x3891d8);}function parseGeodes(_0x18f76d,_0x278010,_0x1f83ed,_0x41e5c5){const _0x480739=_0x515f3c;let _0x53cb4b={},_0x42ac12=_0x1f83ed[_0x480739(0x1d9)];for(let _0x3abb3a=0x0,_0x5cb3c0=_0x42ac12[_0x480739(0x1da)];_0x3abb3a<_0x5cb3c0;_0x3abb3a++){let _0x178a86=_0x42ac12[_0x3abb3a],_0x50674c=_0x178a86[_0x480739(0x19d)],_0x266bae=Cesium['Matrix4'][_0x480739(0x1cf)](_0x18f76d[_0x480739(0x1a4)],_0x50674c,new Cesium['Matrix4']()),_0x43c3cf;Cesium['defined'](_0x41e5c5[_0x480739(0x1d1)])&&(_0x43c3cf=new Cesium[(_0x480739(0x1e3))](_0x41e5c5[_0x480739(0x1d1)][_0x480739(0x1cc)]['center'],_0x41e5c5[_0x480739(0x1d1)][_0x480739(0x1cc)][_0x480739(0x1ae)]),Cesium[_0x480739(0x1e3)][_0x480739(0x1e2)](_0x43c3cf,_0x18f76d[_0x480739(0x1a4)],_0x43c3cf));let _0x326742=_0x178a86['skeletonNames'];for(let _0xe2636f=0x0,_0x122277=_0x326742[_0x480739(0x1da)];_0xe2636f<_0x122277;_0xe2636f++){let _0xe2e732=_0x326742[_0xe2636f],_0x3ec17b=_0x278010[_0x480739(0x1d5)][_0xe2e732],_0x386464=_0x3ec17b[_0x480739(0x19e)],_0x1b4fc4=_0x3ec17b[_0x480739(0x1dc)],_0x3f5260=_0x3ec17b['pickInfo'],_0x4a3aad;_0x1b4fc4[_0x480739(0x1da)]>0x0&&(_0x4a3aad=_0x18f76d[_0x480739(0x1e4)][_0x480739(0x1d8)](_0x1b4fc4[0x0][_0x480739(0x1df)]));let _0x714014=Cesium['defined'](_0x43c3cf)?_0x43c3cf:calcBoundingVolume(_0x386464,_0x266bae);_0x53cb4b[_0xe2e732]=_0x4779f9[_0x18f76d[_0x480739(0x1b5)]]({'layer':_0x18f76d,'vertexPackage':_0x386464,'arrIndexPackage':_0x1b4fc4,'pickInfo':_0x3f5260,'modelMatrix':_0x266bae,'geoMatrix':_0x50674c,'boundingVolume':_0x714014,'material':_0x4a3aad,'edgeGeometry':_0x3ec17b[_0x480739(0x1ed)],'geoName':_0xe2e732});}}if(Object[_0x480739(0x1e6)](_0x53cb4b)[_0x480739(0x1da)]<0x1)return;if(!Cesium[_0x480739(0x1dd)](_0x41e5c5[_0x480739(0x1d1)])){let _0x1c207a=[];for(let _0x2eb0e0 in _0x53cb4b){_0x53cb4b[_0x480739(0x1b4)](_0x2eb0e0)&&_0x1c207a[_0x480739(0x19f)](_0x53cb4b[_0x2eb0e0]['boundingVolume']);}let _0x4a7154=Cesium['BoundingSphere'][_0x480739(0x1e9)](_0x1c207a);_0x41e5c5[_0x480739(0x1d1)]={'sphere':_0x4a7154};}_0x41e5c5[_0x480739(0x1a5)]=_0x53cb4b;}function parsePagelods(_0x27fc2b,_0x31c073){const _0x6533af=_0x515f3c;let _0x216e40=_0x31c073[_0x6533af(0x1b0)],_0x1a75aa=[];for(let _0x4f3f16=0x0,_0x2f0d4b=_0x216e40[_0x6533af(0x1e8)][_0x6533af(0x1da)];_0x4f3f16<_0x2f0d4b;_0x4f3f16++){let _0x21efa4={},_0x400a49=_0x216e40[_0x6533af(0x1e8)][_0x4f3f16];_0x21efa4[_0x6533af(0x1be)]=_0x400a49[_0x6533af(0x1be)],_0x21efa4[_0x6533af(0x1de)]=_0x400a49['childTile'],_0x21efa4[_0x6533af(0x1ca)]=_0x400a49[_0x6533af(0x1ca)];let _0xff06fc=_0x400a49[_0x6533af(0x1af)][_0x6533af(0x1b7)],_0x204ffd=_0x400a49['boundingSphere'][_0x6533af(0x1ae)];_0x21efa4[_0x6533af(0x1de)]!==''?_0x21efa4[_0x6533af(0x1d1)]={'sphere':{'center':new Cesium[(_0x6533af(0x1ee))](_0xff06fc['x'],_0xff06fc['y'],_0xff06fc['z']),'radius':_0x204ffd}}:_0x21efa4[_0x6533af(0x1b6)]=!![],parseGeodes(_0x27fc2b,_0x31c073,_0x400a49,_0x21efa4),Cesium[_0x6533af(0x1dd)](_0x21efa4[_0x6533af(0x1a5)])&&_0x1a75aa[_0x6533af(0x19f)](_0x21efa4);}return _0x1a75aa;}S3MBlockContentParser[_0x515f3c(0x1ac)]=function(_0x3fb10d,_0x5cdb45,_0x327f40){const _0x19ffea=_0x515f3c;if(!Cesium[_0x19ffea(0x1dd)](_0x327f40))return;parseMaterial(_0x3fb10d,_0x327f40,_0x5cdb45);let _0x30f2df=parsePagelods(_0x3fb10d,_0x327f40);return _0x30f2df;};export default S3MBlockContentParser;