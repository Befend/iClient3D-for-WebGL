const _0x12f2=['Color','lerp','texturePackage','texMatrix','CLAMP_TO_EDGE','transform','Cartesian3','materialCode','132660hHSfKA','clone','context','193ObrbjQ','specularColor','TextureWrap','componentsPerAttribute','REPEAT','geoPackage','create','7DfuvnH','73255cDkrAY','Carteisan3','fromArray','408633theEuF','arrIndexPackage','sphere','diffuse','push','add','skeletonNames','69157shRBoG','center','boundingSphere','geodes','pickInfo','radius','117573xBcnFN','vertexAttributes','vertCompressConstant','minVerticesValue','typedArray','ambientColor','childTile','fileType','modelMatrix','vertexPackage','multiplyByScalar','groupNode','SVC_Vertex','byteOffset','distance','textureunitstates','1601tGMHxC','rangeList','pageLods','buffer','198241BceGBQ','transparentsorting','bTransparentSorting','unpack','BoundingSphere','getSingleInstance','rangeMode','length','5pgnecx','boundingVolume','addressmode','Matrix4','ambient','verticesCount','geoMap','edgeGeometry','rangeDataList','multiply','fromBoundingSpheres','parse','_materialManager','matrix','textureunitstate','tile','material','specular','_subTextureManager','isLeafTile','instanceIndex','keys','byteLength','defined'];const _0x1535de=_0x5bbc;(function(_0x198997,_0x23711c){const _0x223b87=_0x5bbc;while(!![]){try{const _0x8d092c=-parseInt(_0x223b87(0x1da))*parseInt(_0x223b87(0x1a5))+parseInt(_0x223b87(0x1c5))+-parseInt(_0x223b87(0x1f0))*parseInt(_0x223b87(0x1c8))+-parseInt(_0x223b87(0x1e0))+-parseInt(_0x223b87(0x1d3))+parseInt(_0x223b87(0x1d0))+parseInt(_0x223b87(0x1cf))*parseInt(_0x223b87(0x19d));if(_0x8d092c===_0x23711c)break;else _0x198997['push'](_0x198997['shift']());}catch(_0xb21a5b){_0x198997['push'](_0x198997['shift']());}}}(_0x12f2,0x64bca));function _0x5bbc(_0x15d2de,_0x2f6479){_0x15d2de=_0x15d2de-0x19a;let _0x12f2f3=_0x12f2[_0x15d2de];return _0x12f2f3;}import _0x8fe030 from'./DDSTexture.js';import _0x2d7909 from'./MaterialPass.js';import _0x2ad9a2 from'./Factory/S3MContentFactory.js';import _0x3784b8 from'./Enum/VertexCompressOption.js';import _0x1ca9ff from'./MaterialManager.js';import _0x3795b2 from'./SubTextureManager.js';function S3MBlockContentParser(){}function parseMaterial(_0x523378,_0x32d836,_0x15c271){const _0x228929=_0x5bbc;let _0x213239=_0x523378[_0x228929(0x1c7)],_0x4fa108=_0x523378[_0x228929(0x1b1)];!_0x4fa108&&(_0x4fa108=_0x523378[_0x228929(0x1b1)]=new _0x1ca9ff());let _0x5e8bef=_0x523378[_0x228929(0x1b7)];!_0x523378[_0x228929(0x1b7)]&&(_0x523378['_subTextureManager']=_0x3795b2[_0x228929(0x1a2)]());let _0x373628=_0x32d836['materials'][_0x228929(0x1b5)];for(let _0x59be8a=0x0,_0x564dca=_0x373628[_0x228929(0x1a4)];_0x59be8a<_0x564dca;_0x59be8a++){let _0x1fe2e1=_0x373628[_0x59be8a][_0x228929(0x1b5)],_0x5336bd=_0x1fe2e1['id'],_0x188816=_0x4fa108['create'](_0x5336bd);_0x188816['layerId']=_0x523378['id'],_0x188816[_0x228929(0x1b4)]=_0x15c271;let _0x556e0a=_0x1fe2e1[_0x228929(0x1a9)];_0x188816[_0x228929(0x1e5)]=new Cesium['Color'](_0x556e0a['r'],_0x556e0a['g'],_0x556e0a['b'],_0x556e0a['a']);let _0x5bd455=_0x1fe2e1[_0x228929(0x1d6)];_0x188816['diffuseColor']=new Cesium[(_0x228929(0x1bd))](_0x5bd455['r'],_0x5bd455['g'],_0x5bd455['b'],_0x5bd455['a']);let _0x4b9f46=_0x1fe2e1[_0x228929(0x1b6)];_0x188816[_0x228929(0x1c9)]=new Cesium[(_0x228929(0x1bd))](_0x4b9f46['r'],_0x4b9f46['g'],_0x4b9f46['b'],_0x4b9f46['a']),_0x188816['shininess']=_0x1fe2e1['shininess'],_0x188816[_0x228929(0x19f)]=_0x1fe2e1[_0x228929(0x19e)],_0x188816['id']=_0x5336bd;let _0x3dd1db=_0x1fe2e1[_0x228929(0x1ef)],_0x147645=_0x3dd1db[_0x228929(0x1a4)];for(let _0xfd1763=0x0;_0xfd1763<0x1;_0xfd1763++){let _0x59add6=_0x3dd1db[_0xfd1763][_0x228929(0x1b3)],_0x162708=_0x59add6['id'],_0x549465=_0x59add6[_0x228929(0x1a7)]['u']===0x0?Cesium[_0x228929(0x1ca)]['REPEAT']:Cesium[_0x228929(0x1ca)][_0x228929(0x1c1)],_0x457026=_0x59add6[_0x228929(0x1a7)]['v']===0x0?Cesium['TextureWrap'][_0x228929(0x1cc)]:Cesium[_0x228929(0x1ca)][_0x228929(0x1c1)];_0x188816[_0x228929(0x1c0)]=Cesium[_0x228929(0x1a8)][_0x228929(0x1a0)](_0x59add6['texmodmatrix']);let _0x475caa=_0x32d836[_0x228929(0x1bf)][_0x162708];_0x475caa&&(_0x475caa['wrapS']=_0x549465,_0x475caa['wrapT']=_0x457026,_0x188816['createTexture'](_0x523378,_0x15c271,_0x475caa,_0xfd1763,_0x32d836));}}}function calcBoundingVolumeForNormal(_0x3de107,_0x28c661){const _0x287c6f=_0x5bbc;let _0x4fe1c3=new Cesium[(_0x287c6f(0x1a1))](),_0x2f78ad=new Cesium[(_0x287c6f(0x1c3))](),_0x52b63e=_0x3de107[_0x287c6f(0x1e1)][0x0],_0x54913c=_0x52b63e[_0x287c6f(0x1cb)],_0x54fdf5=Cesium[_0x287c6f(0x1bc)](_0x3de107['compressOptions'])&&(_0x3de107['compressOptions']&_0x3784b8[_0x287c6f(0x1ec)])===_0x3784b8[_0x287c6f(0x1ec)],_0x58227e=0x1,_0x1db39d,_0x39b324;_0x54fdf5?(_0x58227e=_0x3de107[_0x287c6f(0x1e2)],_0x1db39d=new Cesium[(_0x287c6f(0x1c3))](_0x3de107[_0x287c6f(0x1e3)]['x'],_0x3de107[_0x287c6f(0x1e3)]['y'],_0x3de107[_0x287c6f(0x1e3)]['z']),_0x39b324=new Uint16Array(_0x52b63e[_0x287c6f(0x1e4)][_0x287c6f(0x19c)],_0x52b63e['typedArray'][_0x287c6f(0x1ed)],_0x52b63e[_0x287c6f(0x1e4)][_0x287c6f(0x1bb)]/0x2)):_0x39b324=new Float32Array(_0x52b63e['typedArray']['buffer'],_0x52b63e[_0x287c6f(0x1e4)][_0x287c6f(0x1ed)],_0x52b63e[_0x287c6f(0x1e4)][_0x287c6f(0x1bb)]/0x4);let _0x20c607=[];for(let _0xd8d269=0x0;_0xd8d269<_0x3de107[_0x287c6f(0x1aa)];_0xd8d269++){Cesium['Cartesian3'][_0x287c6f(0x1d2)](_0x39b324,_0x54913c*_0xd8d269,_0x2f78ad),_0x54fdf5&&(_0x2f78ad=Cesium['Cartesian3'][_0x287c6f(0x1ea)](_0x2f78ad,_0x58227e,_0x2f78ad),_0x2f78ad=Cesium[_0x287c6f(0x1c3)][_0x287c6f(0x1d8)](_0x2f78ad,_0x1db39d,_0x2f78ad)),_0x20c607[_0x287c6f(0x1d7)](Cesium[_0x287c6f(0x1c3)][_0x287c6f(0x1c6)](_0x2f78ad));}return Cesium[_0x287c6f(0x1a1)]['fromPoints'](_0x20c607,_0x4fe1c3),Cesium[_0x287c6f(0x1a1)][_0x287c6f(0x1c2)](_0x4fe1c3,_0x28c661,_0x4fe1c3),_0x20c607['length']=0x0,_0x4fe1c3;}let scratchCenter=new Cesium[(_0x1535de(0x1c3))]();function calcBoundingVolumeForInstance(_0x1994da){const _0x15ed88=_0x1535de;let _0xd769ed=new Cesium['BoundingSphere'](),_0x331761=_0x1994da['instanceBounds'];if(!Cesium['defined'](_0x331761))return _0xd769ed;let _0x315f1d=new Cesium[(_0x15ed88(0x1c3))](_0x331761[0x0],_0x331761[0x1],_0x331761[0x2]),_0x47d1b6=new Cesium[(_0x15ed88(0x1d1))](_0x331761[0x3],_0x331761[0x4],_0x331761[0x5]),_0x1adbff=new Cesium['Cartesian3'][(_0x15ed88(0x1be))](_0x315f1d,_0x47d1b6,0.5,scratchCenter),_0x235fe4=new Cesium['Cartesian3'][(_0x15ed88(0x1ee))](_0x1adbff,_0x315f1d);return _0xd769ed[_0x15ed88(0x1db)]=_0x1adbff,_0xd769ed[_0x15ed88(0x1df)]=_0x235fe4,_0xd769ed;}function calcBoundingVolume(_0x4dbb7a,_0x2d0dc4){const _0x2a3a4f=_0x1535de;if(_0x4dbb7a[_0x2a3a4f(0x1b9)]>-0x1)return calcBoundingVolumeForInstance(_0x4dbb7a);return calcBoundingVolumeForNormal(_0x4dbb7a,_0x2d0dc4);}function parseGeodes(_0x2398e1,_0x53d6ae,_0x1fe011,_0xee7f5){const _0x37734b=_0x1535de;let _0x26bf08={},_0x562446=_0x1fe011[_0x37734b(0x1dd)];for(let _0x402da0=0x0,_0x54148a=_0x562446[_0x37734b(0x1a4)];_0x402da0<_0x54148a;_0x402da0++){let _0x1caaa9=_0x562446[_0x402da0],_0x3ea627=_0x1caaa9[_0x37734b(0x1b2)],_0x99251e=Cesium[_0x37734b(0x1a8)][_0x37734b(0x1ae)](_0x2398e1['modelMatrix'],_0x3ea627,new Cesium[(_0x37734b(0x1a8))]()),_0x16fb42;Cesium['defined'](_0xee7f5['boundingVolume'])&&(_0x16fb42=new Cesium['BoundingSphere'](_0xee7f5[_0x37734b(0x1a6)][_0x37734b(0x1d5)][_0x37734b(0x1db)],_0xee7f5[_0x37734b(0x1a6)][_0x37734b(0x1d5)][_0x37734b(0x1df)]),Cesium[_0x37734b(0x1a1)][_0x37734b(0x1c2)](_0x16fb42,_0x2398e1[_0x37734b(0x1e8)],_0x16fb42));let _0x3b5974=_0x1caaa9[_0x37734b(0x1d9)];for(let _0x5c3f1c=0x0,_0x264e99=_0x3b5974['length'];_0x5c3f1c<_0x264e99;_0x5c3f1c++){let _0x58f846=_0x3b5974[_0x5c3f1c],_0x1eb9e4=_0x53d6ae[_0x37734b(0x1cd)][_0x58f846],_0x44432b=_0x1eb9e4[_0x37734b(0x1e9)],_0x8fcde9=_0x1eb9e4[_0x37734b(0x1d4)],_0x14108d=_0x1eb9e4[_0x37734b(0x1de)],_0x49bc7c;_0x8fcde9[_0x37734b(0x1a4)]>0x0&&(_0x49bc7c=_0x2398e1[_0x37734b(0x1b1)][_0x37734b(0x1ce)](_0x8fcde9[0x0][_0x37734b(0x1c4)]));let _0x6fd38f=Cesium[_0x37734b(0x1bc)](_0x16fb42)?_0x16fb42:calcBoundingVolume(_0x44432b,_0x99251e);_0x26bf08[_0x58f846]=_0x2ad9a2[_0x2398e1[_0x37734b(0x1e7)]]({'layer':_0x2398e1,'vertexPackage':_0x44432b,'arrIndexPackage':_0x8fcde9,'pickInfo':_0x14108d,'modelMatrix':_0x99251e,'geoMatrix':_0x3ea627,'boundingVolume':_0x6fd38f,'material':_0x49bc7c,'edgeGeometry':_0x1eb9e4[_0x37734b(0x1ac)],'geoName':_0x58f846});}}if(Object[_0x37734b(0x1ba)](_0x26bf08)[_0x37734b(0x1a4)]<0x1)return;if(!Cesium['defined'](_0xee7f5[_0x37734b(0x1a6)])){let _0x51aeed=[];for(let _0x55a2e6 in _0x26bf08){_0x26bf08['hasOwnProperty'](_0x55a2e6)&&_0x51aeed[_0x37734b(0x1d7)](_0x26bf08[_0x55a2e6][_0x37734b(0x1a6)]);}let _0x8b9861=Cesium['BoundingSphere'][_0x37734b(0x1af)](_0x51aeed);_0xee7f5[_0x37734b(0x1a6)]={'sphere':_0x8b9861};}_0xee7f5[_0x37734b(0x1ab)]=_0x26bf08;}function parsePagelods(_0x113ac2,_0xb0643f){const _0x297599=_0x1535de;let _0x4bc4ee=_0xb0643f[_0x297599(0x1eb)],_0x414b6a=[];for(let _0x3a9dea=0x0,_0x7b3b87=_0x4bc4ee['pageLods']['length'];_0x3a9dea<_0x7b3b87;_0x3a9dea++){let _0x418954={},_0x357d18=_0x4bc4ee[_0x297599(0x19b)][_0x3a9dea];_0x418954['rangeMode']=_0x357d18[_0x297599(0x1a3)],_0x418954[_0x297599(0x1ad)]=_0x357d18[_0x297599(0x1e6)],_0x418954['rangeList']=_0x357d18[_0x297599(0x19a)];let _0x32ad06=_0x357d18[_0x297599(0x1dc)][_0x297599(0x1db)],_0x2c5c32=_0x357d18['boundingSphere'][_0x297599(0x1df)];_0x418954['rangeDataList']!==''?_0x418954[_0x297599(0x1a6)]={'sphere':{'center':new Cesium['Cartesian3'](_0x32ad06['x'],_0x32ad06['y'],_0x32ad06['z']),'radius':_0x2c5c32}}:_0x418954[_0x297599(0x1b8)]=!![],parseGeodes(_0x113ac2,_0xb0643f,_0x357d18,_0x418954),Cesium['defined'](_0x418954[_0x297599(0x1ab)])&&_0x414b6a[_0x297599(0x1d7)](_0x418954);}return _0x414b6a;}S3MBlockContentParser[_0x1535de(0x1b0)]=function(_0x3d9df1,_0x318d01,_0x375969){const _0x16f37a=_0x1535de;if(!Cesium[_0x16f37a(0x1bc)](_0x375969))return;parseMaterial(_0x3d9df1,_0x375969,_0x318d01);let _0x3a1bb5=parsePagelods(_0x3d9df1,_0x375969);return _0x3a1bb5;};export default S3MBlockContentParser;