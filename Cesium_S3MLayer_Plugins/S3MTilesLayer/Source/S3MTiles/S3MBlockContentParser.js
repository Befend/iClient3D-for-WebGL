const _0x375f=['specular','482287JdycjB','_materialManager','clone','rangeMode','defined','groupNode','unpack','componentsPerAttribute','instanceBounds','rangeDataList','fromPoints','23835TgsDeK','buffer','CLAMP_TO_EDGE','sphere','REPEAT','add','_subTextureManager','20159yqgjKo','isLeafTile','469381lreAaS','pickInfo','diffuseColor','rangeList','fromArray','push','byteOffset','minVerticesValue','length','create','arrIndexPackage','multiplyByScalar','tile','shininess','5ougAxN','wrapT','diffuse','vertexAttributes','23ssCggE','32122UyHbKI','typedArray','transform','keys','matrix','3zkMZCH','101LWVwFR','Matrix4','getSingleInstance','Color','transparentsorting','bTransparentSorting','TextureWrap','texturePackage','boundingVolume','distance','texMatrix','instanceIndex','center','byteLength','Carteisan3','geoMap','lerp','pageLods','boundingSphere','SVC_Vertex','createTexture','geoPackage','addressmode','modelMatrix','skeletonNames','verticesCount','2267CynuMo','material','hasOwnProperty','textureunitstate','geodes','ambientColor','443224MMRNDQ','specularColor','BoundingSphere','edgeGeometry','vertexPackage','materials','Cartesian3','radius'];const _0x83636f=_0x12e6;(function(_0x578d69,_0x13bc0d){const _0x589769=_0x12e6;while(!![]){try{const _0x2db35a=-parseInt(_0x589769(0x158))*parseInt(_0x589769(0x168))+parseInt(_0x589769(0x15a))+parseInt(_0x589769(0x146))+parseInt(_0x589769(0x137))*-parseInt(_0x589769(0x11d))+parseInt(_0x589769(0x13d))+-parseInt(_0x589769(0x117))*parseInt(_0x589769(0x11c))+-parseInt(_0x589769(0x116))*parseInt(_0x589769(0x151));if(_0x2db35a===_0x13bc0d)break;else _0x578d69['push'](_0x578d69['shift']());}catch(_0x1f0662){_0x578d69['push'](_0x578d69['shift']());}}}(_0x375f,0x66acf));import _0x95f031 from'./DDSTexture.js';import _0x1e13ac from'./MaterialPass.js';import _0x502cc0 from'./Factory/S3MContentFactory.js';import _0x2e7da5 from'./Enum/VertexCompressOption.js';import _0x1c792f from'./MaterialManager.js';import _0x1b50a2 from'./SubTextureManager.js';function S3MBlockContentParser(){}function parseMaterial(_0x23a48a,_0x16a7cf,_0x18de77){const _0x565ee9=_0x12e6;let _0xaa81a6=_0x23a48a['context'],_0xfbbba0=_0x23a48a['_materialManager'];!_0xfbbba0&&(_0xfbbba0=_0x23a48a[_0x565ee9(0x147)]=new _0x1c792f());let _0x2734e3=_0x23a48a[_0x565ee9(0x157)];!_0x23a48a[_0x565ee9(0x157)]&&(_0x23a48a[_0x565ee9(0x157)]=_0x1b50a2[_0x565ee9(0x11f)]());let _0x4a287c=_0x16a7cf[_0x565ee9(0x142)][_0x565ee9(0x138)];for(let _0x7ace62=0x0,_0x3a3120=_0x4a287c[_0x565ee9(0x162)];_0x7ace62<_0x3a3120;_0x7ace62++){let _0x12fb80=_0x4a287c[_0x7ace62][_0x565ee9(0x138)],_0x11212d=_0x12fb80['id'],_0x9b6b7c=_0xfbbba0[_0x565ee9(0x163)](_0x11212d);_0x9b6b7c['layerId']=_0x23a48a['id'],_0x9b6b7c[_0x565ee9(0x166)]=_0x18de77;let _0x552924=_0x12fb80['ambient'];_0x9b6b7c[_0x565ee9(0x13c)]=new Cesium['Color'](_0x552924['r'],_0x552924['g'],_0x552924['b'],_0x552924['a']);let _0x5b637d=_0x12fb80[_0x565ee9(0x16a)];_0x9b6b7c[_0x565ee9(0x15c)]=new Cesium[(_0x565ee9(0x120))](_0x5b637d['r'],_0x5b637d['g'],_0x5b637d['b'],_0x5b637d['a']);let _0x5c6d5b=_0x12fb80[_0x565ee9(0x145)];_0x9b6b7c[_0x565ee9(0x13e)]=new Cesium[(_0x565ee9(0x120))](_0x5c6d5b['r'],_0x5c6d5b['g'],_0x5c6d5b['b'],_0x5c6d5b['a']),_0x9b6b7c[_0x565ee9(0x167)]=_0x12fb80[_0x565ee9(0x167)],_0x9b6b7c[_0x565ee9(0x122)]=_0x12fb80[_0x565ee9(0x121)],_0x9b6b7c['id']=_0x11212d;let _0x37072a=_0x12fb80['textureunitstates'],_0x55a1b2=_0x37072a[_0x565ee9(0x162)];for(let _0x2cfe92=0x0;_0x2cfe92<0x1;_0x2cfe92++){let _0xb05adf=_0x37072a[_0x2cfe92][_0x565ee9(0x13a)],_0x97edab=_0xb05adf['id'],_0xd05e16=_0xb05adf[_0x565ee9(0x133)]['u']===0x0?Cesium['TextureWrap']['REPEAT']:Cesium['TextureWrap'][_0x565ee9(0x153)],_0x3ce5b5=_0xb05adf[_0x565ee9(0x133)]['v']===0x0?Cesium[_0x565ee9(0x123)][_0x565ee9(0x155)]:Cesium[_0x565ee9(0x123)][_0x565ee9(0x153)];_0x9b6b7c[_0x565ee9(0x127)]=Cesium['Matrix4'][_0x565ee9(0x14c)](_0xb05adf['texmodmatrix']);let _0x12de30=_0x16a7cf[_0x565ee9(0x124)][_0x97edab];_0x12de30&&(_0x12de30['wrapS']=_0xd05e16,_0x12de30[_0x565ee9(0x169)]=_0x3ce5b5,_0x9b6b7c[_0x565ee9(0x131)](_0x23a48a,_0x18de77,_0x12de30,_0x2cfe92,_0x16a7cf));}}}function _0x12e6(_0x1a8ad0,_0x2d0ba7){_0x1a8ad0=_0x1a8ad0-0x116;let _0x375fb1=_0x375f[_0x1a8ad0];return _0x375fb1;}function calcBoundingVolumeForNormal(_0x5d4b4b,_0x4c533b){const _0x573529=_0x12e6;let _0x384ba5=new Cesium[(_0x573529(0x13f))](),_0xa57735=new Cesium[(_0x573529(0x143))](),_0x2ec25b=_0x5d4b4b[_0x573529(0x16b)][0x0],_0x3f2940=_0x2ec25b[_0x573529(0x14d)],_0x4e7409=Cesium[_0x573529(0x14a)](_0x5d4b4b['compressOptions'])&&(_0x5d4b4b['compressOptions']&_0x2e7da5[_0x573529(0x130)])===_0x2e7da5[_0x573529(0x130)],_0x2aba41=0x1,_0x9cc4b0,_0x1d6e24;_0x4e7409?(_0x2aba41=_0x5d4b4b['vertCompressConstant'],_0x9cc4b0=new Cesium['Cartesian3'](_0x5d4b4b[_0x573529(0x161)]['x'],_0x5d4b4b['minVerticesValue']['y'],_0x5d4b4b[_0x573529(0x161)]['z']),_0x1d6e24=new Uint16Array(_0x2ec25b['typedArray'][_0x573529(0x152)],_0x2ec25b[_0x573529(0x118)][_0x573529(0x160)],_0x2ec25b[_0x573529(0x118)][_0x573529(0x12a)]/0x2)):_0x1d6e24=new Float32Array(_0x2ec25b[_0x573529(0x118)]['buffer'],_0x2ec25b[_0x573529(0x118)][_0x573529(0x160)],_0x2ec25b[_0x573529(0x118)]['byteLength']/0x4);let _0x44a608=[];for(let _0x3f194f=0x0;_0x3f194f<_0x5d4b4b[_0x573529(0x136)];_0x3f194f++){Cesium[_0x573529(0x143)][_0x573529(0x15e)](_0x1d6e24,_0x3f2940*_0x3f194f,_0xa57735),_0x4e7409&&(_0xa57735=Cesium['Cartesian3'][_0x573529(0x165)](_0xa57735,_0x2aba41,_0xa57735),_0xa57735=Cesium['Cartesian3'][_0x573529(0x156)](_0xa57735,_0x9cc4b0,_0xa57735)),_0x44a608['push'](Cesium[_0x573529(0x143)][_0x573529(0x148)](_0xa57735));}return Cesium[_0x573529(0x13f)][_0x573529(0x150)](_0x44a608,_0x384ba5),Cesium['BoundingSphere'][_0x573529(0x119)](_0x384ba5,_0x4c533b,_0x384ba5),_0x44a608[_0x573529(0x162)]=0x0,_0x384ba5;}let scratchCenter=new Cesium[(_0x83636f(0x143))]();function calcBoundingVolumeForInstance(_0x5ec79c){const _0x1dca68=_0x83636f;let _0x56a1ae=new Cesium[(_0x1dca68(0x13f))](),_0xac4aa1=_0x5ec79c[_0x1dca68(0x14e)];if(!Cesium[_0x1dca68(0x14a)](_0xac4aa1))return _0x56a1ae;let _0x126499=new Cesium[(_0x1dca68(0x143))](_0xac4aa1[0x0],_0xac4aa1[0x1],_0xac4aa1[0x2]),_0x4b58a9=new Cesium[(_0x1dca68(0x12b))](_0xac4aa1[0x3],_0xac4aa1[0x4],_0xac4aa1[0x5]),_0x2a3e38=new Cesium[(_0x1dca68(0x143))][(_0x1dca68(0x12d))](_0x126499,_0x4b58a9,0.5,scratchCenter),_0x21a9ba=new Cesium[(_0x1dca68(0x143))][(_0x1dca68(0x126))](_0x2a3e38,_0x126499);return _0x56a1ae[_0x1dca68(0x129)]=_0x2a3e38,_0x56a1ae[_0x1dca68(0x144)]=_0x21a9ba,_0x56a1ae;}function calcBoundingVolume(_0x38c25c,_0x2a372b){const _0x224eea=_0x83636f;if(_0x38c25c[_0x224eea(0x128)]>-0x1)return calcBoundingVolumeForInstance(_0x38c25c);return calcBoundingVolumeForNormal(_0x38c25c,_0x2a372b);}function parseGeodes(_0x59e58b,_0x18c1fc,_0x43e896,_0x575437){const _0x58377d=_0x83636f;let _0x25ef8d={},_0x1ec090=_0x43e896[_0x58377d(0x13b)];for(let _0x1ea713=0x0,_0x229dc0=_0x1ec090['length'];_0x1ea713<_0x229dc0;_0x1ea713++){let _0x5119ba=_0x1ec090[_0x1ea713],_0x3053cb=_0x5119ba[_0x58377d(0x11b)],_0x2d01ff=Cesium['Matrix4']['multiply'](_0x59e58b['modelMatrix'],_0x3053cb,new Cesium[(_0x58377d(0x11e))]()),_0x1e5724;Cesium[_0x58377d(0x14a)](_0x575437['boundingVolume'])&&(_0x1e5724=new Cesium[(_0x58377d(0x13f))](_0x575437['boundingVolume'][_0x58377d(0x154)][_0x58377d(0x129)],_0x575437[_0x58377d(0x125)][_0x58377d(0x154)][_0x58377d(0x144)]),Cesium[_0x58377d(0x13f)][_0x58377d(0x119)](_0x1e5724,_0x59e58b[_0x58377d(0x134)],_0x1e5724));let _0x59fe8c=_0x5119ba[_0x58377d(0x135)];for(let _0x397fc7=0x0,_0x2f8bc4=_0x59fe8c[_0x58377d(0x162)];_0x397fc7<_0x2f8bc4;_0x397fc7++){let _0x20ccb8=_0x59fe8c[_0x397fc7],_0x20451f=_0x18c1fc[_0x58377d(0x132)][_0x20ccb8],_0x567e12=_0x20451f[_0x58377d(0x141)],_0xbe30e2=_0x20451f[_0x58377d(0x164)],_0x3f315e=_0x20451f[_0x58377d(0x15b)],_0xebeedc;_0xbe30e2[_0x58377d(0x162)]>0x0&&(_0xebeedc=_0x59e58b[_0x58377d(0x147)][_0x58377d(0x163)](_0xbe30e2[0x0]['materialCode']));let _0x276676=Cesium[_0x58377d(0x14a)](_0x1e5724)?_0x1e5724:calcBoundingVolume(_0x567e12,_0x2d01ff);_0x25ef8d[_0x20ccb8]=_0x502cc0[_0x59e58b['fileType']]({'layer':_0x59e58b,'vertexPackage':_0x567e12,'arrIndexPackage':_0xbe30e2,'pickInfo':_0x3f315e,'modelMatrix':_0x2d01ff,'geoMatrix':_0x3053cb,'boundingVolume':_0x276676,'material':_0xebeedc,'edgeGeometry':_0x20451f[_0x58377d(0x140)],'geoName':_0x20ccb8});}}if(Object[_0x58377d(0x11a)](_0x25ef8d)[_0x58377d(0x162)]<0x1)return;if(!Cesium[_0x58377d(0x14a)](_0x575437[_0x58377d(0x125)])){let _0x174bd7=[];for(let _0x4e33ba in _0x25ef8d){_0x25ef8d[_0x58377d(0x139)](_0x4e33ba)&&_0x174bd7['push'](_0x25ef8d[_0x4e33ba]['boundingVolume']);}let _0x552414=Cesium[_0x58377d(0x13f)]['fromBoundingSpheres'](_0x174bd7);_0x575437[_0x58377d(0x125)]={'sphere':_0x552414};}_0x575437[_0x58377d(0x12c)]=_0x25ef8d;}function parsePagelods(_0x4070a0,_0x5cf7a9){const _0x4e89ac=_0x83636f;let _0x1a910f=_0x5cf7a9[_0x4e89ac(0x14b)],_0x570f6a=[];for(let _0x23a9c6=0x0,_0x51a2ae=_0x1a910f['pageLods'][_0x4e89ac(0x162)];_0x23a9c6<_0x51a2ae;_0x23a9c6++){let _0x45e7d0={},_0x182995=_0x1a910f[_0x4e89ac(0x12e)][_0x23a9c6];_0x45e7d0['rangeMode']=_0x182995[_0x4e89ac(0x149)],_0x45e7d0['rangeDataList']=_0x182995['childTile'],_0x45e7d0[_0x4e89ac(0x15d)]=_0x182995['rangeList'];let _0x591831=_0x182995[_0x4e89ac(0x12f)]['center'],_0x32264c=_0x182995['boundingSphere']['radius'];_0x45e7d0[_0x4e89ac(0x14f)]!==''?_0x45e7d0['boundingVolume']={'sphere':{'center':new Cesium['Cartesian3'](_0x591831['x'],_0x591831['y'],_0x591831['z']),'radius':_0x32264c}}:_0x45e7d0[_0x4e89ac(0x159)]=!![],parseGeodes(_0x4070a0,_0x5cf7a9,_0x182995,_0x45e7d0),Cesium['defined'](_0x45e7d0[_0x4e89ac(0x12c)])&&_0x570f6a[_0x4e89ac(0x15f)](_0x45e7d0);}return _0x570f6a;}S3MBlockContentParser['parse']=function(_0x520015,_0x561089,_0x24ea9f){const _0x9c1e0c=_0x83636f;if(!Cesium[_0x9c1e0c(0x14a)](_0x24ea9f))return;parseMaterial(_0x520015,_0x24ea9f,_0x561089);let _0x15234b=parsePagelods(_0x520015,_0x24ea9f);return _0x15234b;};export default S3MBlockContentParser;