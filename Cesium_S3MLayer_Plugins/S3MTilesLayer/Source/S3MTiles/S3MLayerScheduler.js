const _0x292c=['selected','priorityHolder','max','_processTiles','24648bTwJbU','_selectedTiles','94508MzxuIS','_minimumPriority','sort','UNLOADED','3cPOvta','renderable','frameNumber','580377sxrDey','updatePriority','pixel','215962zAWVPx','children','_stack','push','203063PivMGm','requestedFrame','visible','depth','contentState','lodRangeScale','224366alOOkA','distance','distanceToCamera','Pixel','READY','shouldSelect','processFrame','pop','239217EfdcEH','MAX_VALUE','_cache','_maximumPriority','1qsdyil','parent','_rootTiles','length','touchedFrame','min','isRootTile','wasMinPriorityChild','prototype','selectedFrame','schedule','touch','defined','updatedVisibilityFrame','foveatedFactor','13MQIads','refines','centerZDepth'];const _0x1ce172=_0x4f02;(function(_0x3361cb,_0x306ca8){const _0x5f13e9=_0x4f02;while(!![]){try{const _0xc1c59f=-parseInt(_0x5f13e9(0xcc))*parseInt(_0x5f13e9(0xc8))+parseInt(_0x5f13e9(0xa4))+-parseInt(_0x5f13e9(0x9e))+-parseInt(_0x5f13e9(0xc6))*-parseInt(_0x5f13e9(0xbf))+-parseInt(_0x5f13e9(0xd2))*parseInt(_0x5f13e9(0xb0))+-parseInt(_0x5f13e9(0xac))+parseInt(_0x5f13e9(0xcf));if(_0xc1c59f===_0x306ca8)break;else _0x3361cb['push'](_0x3361cb['shift']());}catch(_0x44105d){_0x3361cb['push'](_0x3361cb['shift']());}}}(_0x292c,0x2cc69));import _0x100f71 from'./Enum/ContentState.js';import _0x32095e from'./Enum/RangeMode.js';function S3MLayerScheduler(){const _0x564e49=_0x4f02;this[_0x564e49(0xd4)]=[];}function sortComparator(_0x224aaf,_0xe73b86){const _0x257911=_0x4f02;if(_0xe73b86[_0x257911(0xa6)]===0x0&&_0x224aaf[_0x257911(0xa6)]===0x0)return _0xe73b86['centerZDepth']-_0x224aaf[_0x257911(0xc1)];return _0xe73b86[_0x257911(0xa6)]-_0x224aaf[_0x257911(0xa6)];}function updateChildren(_0x3d0dbc,_0x1e848f,_0x1f9801,_0xce95c8){const _0x257a38=_0x4f02;let _0x56e863,_0x5312eb=_0x1e848f[_0x257a38(0xd3)],_0x45ca53=_0x5312eb[_0x257a38(0xb3)];for(_0x56e863=0x0;_0x56e863<_0x45ca53;++_0x56e863){updateTile(_0xce95c8,_0x3d0dbc,_0x5312eb[_0x56e863]);}_0x5312eb[_0x257a38(0xca)](sortComparator);let _0x10f312=!![],_0x27366c=![],_0x2a0abb=-0x1,_0x166c0e=Number[_0x257a38(0xad)],_0x1e9ca9=!![];for(_0x56e863=0x0;_0x56e863<_0x45ca53;++_0x56e863){let _0x20631d=_0x5312eb[_0x56e863];_0x20631d['foveatedFactor']<_0x166c0e&&(_0x2a0abb=_0x56e863,_0x166c0e=_0x20631d['foveatedFactor']);_0x20631d[_0x257a38(0xa0)]?(_0x1f9801[_0x257a38(0xd5)](_0x20631d),_0x27366c=!![]):(loadTile(_0x3d0dbc,_0x20631d,_0xce95c8),touchTile(_0x3d0dbc,_0x20631d,_0xce95c8));let _0x3aabe6=_0x20631d[_0x257a38(0xcd)];_0x1e9ca9&&(_0x10f312=_0x10f312&&_0x3aabe6);}!_0x27366c&&(_0x10f312=![]);if(_0x2a0abb!==-0x1){let _0x5083a5=_0x5312eb[_0x2a0abb];_0x5083a5[_0x257a38(0xb7)]=!![];let _0x387ec8=(_0x1e848f['wasMinPriorityChild']||_0x1e848f[_0x257a38(0xb6)])&&_0x166c0e<=_0x1e848f[_0x257a38(0xc3)][_0x257a38(0xbe)]?_0x1e848f[_0x257a38(0xc3)]:_0x1e848f;_0x387ec8[_0x257a38(0xbe)]=Math['min'](_0x5083a5[_0x257a38(0xbe)],_0x387ec8[_0x257a38(0xbe)]),_0x387ec8['distanceToCamera']=Math[_0x257a38(0xb5)](_0x5083a5[_0x257a38(0xa6)],_0x387ec8[_0x257a38(0xa6)]);for(_0x56e863=0x0;_0x56e863<_0x45ca53;++_0x56e863){let _0x37b1fb=_0x5312eb[_0x56e863];_0x37b1fb['priorityHolder']=_0x387ec8;}}return _0x10f312;}function selectTile(_0x5b2fb4,_0x1454e3,_0x37695d){const _0x5ca2a6=_0x4f02;if(_0x1454e3[_0x5ca2a6(0xb9)]===_0x37695d[_0x5ca2a6(0xce)]||!_0x1454e3[_0x5ca2a6(0xcd)])return;_0x5b2fb4[_0x5ca2a6(0xc7)]['push'](_0x1454e3),_0x1454e3[_0x5ca2a6(0xb9)]=_0x37695d['frameNumber'];}function loadTile(_0x37f958,_0x3a8561,_0x39b87b){const _0x56617d=_0x4f02;if(_0x3a8561['requestedFrame']===_0x39b87b['frameNumber']||_0x3a8561[_0x56617d(0xa2)]!==_0x100f71[_0x56617d(0xcb)])return;_0x37f958['_requestTiles']['push'](_0x3a8561),_0x3a8561[_0x56617d(0x9f)]=_0x39b87b[_0x56617d(0xce)];}function _0x4f02(_0x88d9aa,_0x466a55){_0x88d9aa=_0x88d9aa-0x9e;let _0x292cd0=_0x292c[_0x88d9aa];return _0x292cd0;}function processTile(_0x5bccfa,_0x234531,_0x45c368){const _0x403386=_0x4f02;if(_0x234531[_0x403386(0xaa)]===_0x45c368[_0x403386(0xce)]||_0x234531[_0x403386(0xa2)]!==_0x100f71[_0x403386(0xa8)]||_0x234531[_0x403386(0xcd)])return;_0x234531[_0x403386(0xaa)]=_0x45c368[_0x403386(0xce)],_0x5bccfa[_0x403386(0xc5)]['push'](_0x234531);}function touchTile(_0x55c1c8,_0x3bc802,_0x14654a){const _0x2ba268=_0x4f02;if(_0x3bc802[_0x2ba268(0xb4)]===_0x14654a['frameNumber'])return;_0x55c1c8[_0x2ba268(0xae)][_0x2ba268(0xbb)](_0x3bc802),_0x3bc802[_0x2ba268(0xb4)]=_0x14654a[_0x2ba268(0xce)];}function updateVisibility(_0x53b3b8,_0xc3513e,_0x1fba78){const _0x4053a9=_0x4f02;if(_0xc3513e[_0x4053a9(0xbd)]===_0x1fba78['frameNumber'])return;_0xc3513e[_0x4053a9(0xbd)]=_0x1fba78['frameNumber'],_0xc3513e['updateVisibility'](_0x1fba78,_0x53b3b8);}function updateTileVisibility(_0x245a29,_0x186b80,_0x3b9634){updateVisibility(_0x186b80,_0x3b9634,_0x245a29);}function updateMinimumMaximumPriority(_0x328451,_0x319fb2){const _0x418c57=_0x4f02;_0x328451[_0x418c57(0xaf)][_0x418c57(0xa5)]=Math[_0x418c57(0xc4)](_0x319fb2['distanceToCamera'],_0x328451[_0x418c57(0xaf)]['distance']),_0x328451[_0x418c57(0xc9)][_0x418c57(0xa5)]=Math['min'](_0x319fb2[_0x418c57(0xa6)],_0x328451[_0x418c57(0xc9)][_0x418c57(0xa5)]),_0x328451[_0x418c57(0xaf)][_0x418c57(0xa1)]=Math['max'](_0x319fb2[_0x418c57(0xa1)],_0x328451[_0x418c57(0xaf)][_0x418c57(0xa1)]),_0x328451[_0x418c57(0xc9)][_0x418c57(0xa1)]=Math[_0x418c57(0xb5)](_0x319fb2[_0x418c57(0xa1)],_0x328451[_0x418c57(0xc9)][_0x418c57(0xa1)]),_0x328451[_0x418c57(0xaf)]['foveatedFactor']=Math['max'](_0x319fb2[_0x418c57(0xbe)],_0x328451['_maximumPriority'][_0x418c57(0xbe)]),_0x328451['_minimumPriority'][_0x418c57(0xbe)]=Math['min'](_0x319fb2[_0x418c57(0xbe)],_0x328451[_0x418c57(0xc9)]['foveatedFactor']),_0x328451[_0x418c57(0xaf)][_0x418c57(0xd1)]=Math[_0x418c57(0xc4)](_0x319fb2[_0x418c57(0xd1)],_0x328451['_maximumPriority'][_0x418c57(0xd1)]),_0x328451[_0x418c57(0xc9)][_0x418c57(0xd1)]=Math[_0x418c57(0xb5)](_0x319fb2['pixel'],_0x328451[_0x418c57(0xc9)]['pixel']);}function updateTile(_0x5a5368,_0x49b6e2,_0x50c3e9){const _0x1a2674=_0x4f02;updateTileVisibility(_0x5a5368,_0x49b6e2,_0x50c3e9),_0x50c3e9['wasMinPriorityChild']=![],_0x50c3e9[_0x1a2674(0xc3)]=_0x50c3e9,updateMinimumMaximumPriority(_0x49b6e2,_0x50c3e9),_0x50c3e9[_0x1a2674(0xa9)]=![],_0x50c3e9[_0x1a2674(0xc2)]=![];}function canTraverse(_0xf42ee0,_0x5b1ce7){const _0x35301d=_0x4f02;if(_0x5b1ce7[_0x35301d(0xd3)][_0x35301d(0xb3)]===0x0)return![];if(_0x5b1ce7['lodRangeMode']===_0x32095e[_0x35301d(0xa7)])return _0x5b1ce7[_0x35301d(0xd1)]/_0xf42ee0[_0x35301d(0xa3)]>_0x5b1ce7['lodRangeData'];return _0x5b1ce7[_0x35301d(0xa6)]*_0xf42ee0[_0x35301d(0xa3)]<_0x5b1ce7['lodRangeData'];}function traversal(_0xb83e87,_0x997942,_0x365e40){const _0x157b2f=_0x4f02;while(_0x997942[_0x157b2f(0xb3)]){let _0x5c9b11=_0x997942[_0x157b2f(0xab)](),_0xfb5efc=_0x5c9b11[_0x157b2f(0xb1)],_0x48d0cd=!Cesium[_0x157b2f(0xbc)](_0xfb5efc)||_0xfb5efc[_0x157b2f(0xc0)],_0xc17dcc=![];canTraverse(_0xb83e87,_0x5c9b11)&&(_0xc17dcc=updateChildren(_0xb83e87,_0x5c9b11,_0x997942,_0x365e40)&&_0x48d0cd);let _0x4dca57=!_0xc17dcc&&_0x48d0cd;loadTile(_0xb83e87,_0x5c9b11,_0x365e40),processTile(_0xb83e87,_0x5c9b11,_0x365e40),_0x4dca57&&selectTile(_0xb83e87,_0x5c9b11,_0x365e40),touchTile(_0xb83e87,_0x5c9b11,_0x365e40),_0x5c9b11[_0x157b2f(0xc0)]=_0xc17dcc;}}function selectRootTiles(_0x1c8290,_0x3cb19a,_0x310ee6){const _0x430c19=_0x4f02;_0x3cb19a[_0x430c19(0xb3)]=0x0;for(let _0x468e58=0x0,_0x2f7d9e=_0x1c8290[_0x430c19(0xb2)][_0x430c19(0xb3)];_0x468e58<_0x2f7d9e;_0x468e58++){let _0x52eabf=_0x1c8290['_rootTiles'][_0x468e58];updateTile(_0x310ee6,_0x1c8290,_0x52eabf);if(!_0x52eabf[_0x430c19(0xa0)])continue;_0x3cb19a[_0x430c19(0xd5)](_0x52eabf);}}function updatePriority(_0x45aaf5,_0x37bb15){const _0x4761d9=_0x4f02;let _0x34c13c=_0x45aaf5['_requestTiles'],_0xe73853=_0x34c13c['length'];for(let _0x24f13b=0x0;_0x24f13b<_0xe73853;++_0x24f13b){_0x34c13c[_0x24f13b][_0x4761d9(0xd0)](_0x45aaf5,_0x37bb15);}}S3MLayerScheduler[_0x1ce172(0xb8)][_0x1ce172(0xba)]=function(_0x51a7a8,_0x42f3ce){const _0x2705cd=_0x1ce172;let _0x381903=this[_0x2705cd(0xd4)];selectRootTiles(_0x51a7a8,_0x381903,_0x42f3ce),traversal(_0x51a7a8,_0x381903,_0x42f3ce),updatePriority(_0x51a7a8,_0x42f3ce);};export default S3MLayerScheduler;