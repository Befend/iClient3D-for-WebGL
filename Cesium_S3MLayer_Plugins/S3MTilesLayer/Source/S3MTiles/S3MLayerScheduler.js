const _0x17c9=['_minimumPriority','length','146351uyiGbg','push','requestedFrame','Pixel','_selectedTiles','min','_stack','lodRangeScale','MAX_VALUE','93038WXEZfB','isRootTile','processFrame','sort','100420TkfEfK','contentState','prototype','refines','shouldSelect','centerZDepth','depth','7yQJOZD','visible','863IupeXk','touchedFrame','lodRangeMode','14kRQKqe','selectedFrame','pixel','updatePriority','50227unLVsG','distance','touch','3uDfEMP','updateVisibility','4ZSBCQZ','_processTiles','_maximumPriority','_requestTiles','max','_rootTiles','8WBNGwN','children','foveatedFactor','selected','30041ZRNCLW','wasMinPriorityChild','renderable','52227LVouDG','priorityHolder','defined','distanceToCamera','frameNumber'];const _0x1ecc81=_0x3b72;(function(_0xca3489,_0x11808e){const _0x3858c5=_0x3b72;while(!![]){try{const _0x2d731a=parseInt(_0x3858c5(0x1f2))*-parseInt(_0x3858c5(0x201))+parseInt(_0x3858c5(0x208))+-parseInt(_0x3858c5(0x1f4))*parseInt(_0x3858c5(0x211))+parseInt(_0x3858c5(0x1e6))*-parseInt(_0x3858c5(0x1fe))+parseInt(_0x3858c5(0x1fa))*parseInt(_0x3858c5(0x1e8))+parseInt(_0x3858c5(0x215))+-parseInt(_0x3858c5(0x1ef))*-parseInt(_0x3858c5(0x1eb));if(_0x2d731a===_0x11808e)break;else _0xca3489['push'](_0xca3489['shift']());}catch(_0x9248cc){_0xca3489['push'](_0xca3489['shift']());}}}(_0x17c9,0x35285));import _0x3c5933 from'./Enum/ContentState.js';import _0x15a836 from'./Enum/RangeMode.js';function S3MLayerScheduler(){const _0x3ecf37=_0x3b72;this[_0x3ecf37(0x20e)]=[];}function sortComparator(_0x419410,_0xf07e2f){const _0x1c6fda=_0x3b72;if(_0xf07e2f[_0x1c6fda(0x204)]===0x0&&_0x419410[_0x1c6fda(0x204)]===0x0)return _0xf07e2f['centerZDepth']-_0x419410[_0x1c6fda(0x21a)];return _0xf07e2f['distanceToCamera']-_0x419410[_0x1c6fda(0x204)];}function updateChildren(_0x2181d4,_0x62aa5f,_0x3793f5,_0x10e4e7){const _0x42da15=_0x3b72;let _0x4b2635,_0x506874=_0x62aa5f[_0x42da15(0x1fb)],_0xfd0bb3=_0x506874[_0x42da15(0x207)];for(_0x4b2635=0x0;_0x4b2635<_0xfd0bb3;++_0x4b2635){updateTile(_0x10e4e7,_0x2181d4,_0x506874[_0x4b2635]);}_0x506874[_0x42da15(0x214)](sortComparator);let _0x560820=!![],_0x2a8a92=![],_0x18ca72=-0x1,_0x4450a4=Number[_0x42da15(0x210)],_0x2f05cf=!![];for(_0x4b2635=0x0;_0x4b2635<_0xfd0bb3;++_0x4b2635){let _0x555a7b=_0x506874[_0x4b2635];_0x555a7b[_0x42da15(0x1fc)]<_0x4450a4&&(_0x18ca72=_0x4b2635,_0x4450a4=_0x555a7b[_0x42da15(0x1fc)]);_0x555a7b[_0x42da15(0x1e7)]?(_0x3793f5[_0x42da15(0x209)](_0x555a7b),_0x2a8a92=!![]):(loadTile(_0x2181d4,_0x555a7b,_0x10e4e7),touchTile(_0x2181d4,_0x555a7b,_0x10e4e7));let _0x1e533c=_0x555a7b['renderable'];_0x2f05cf&&(_0x560820=_0x560820&&_0x1e533c);}!_0x2a8a92&&(_0x560820=![]);if(_0x18ca72!==-0x1){let _0x1e136f=_0x506874[_0x18ca72];_0x1e136f['wasMinPriorityChild']=!![];let _0x50e09b=(_0x62aa5f[_0x42da15(0x1ff)]||_0x62aa5f[_0x42da15(0x212)])&&_0x4450a4<=_0x62aa5f['priorityHolder']['foveatedFactor']?_0x62aa5f[_0x42da15(0x202)]:_0x62aa5f;_0x50e09b[_0x42da15(0x1fc)]=Math[_0x42da15(0x20d)](_0x1e136f[_0x42da15(0x1fc)],_0x50e09b['foveatedFactor']),_0x50e09b['distanceToCamera']=Math['min'](_0x1e136f['distanceToCamera'],_0x50e09b['distanceToCamera']);for(_0x4b2635=0x0;_0x4b2635<_0xfd0bb3;++_0x4b2635){let _0x158892=_0x506874[_0x4b2635];_0x158892[_0x42da15(0x202)]=_0x50e09b;}}return _0x560820;}function selectTile(_0x403525,_0x2a9f10,_0x244218){const _0x35a5eb=_0x3b72;if(_0x2a9f10[_0x35a5eb(0x1ec)]===_0x244218[_0x35a5eb(0x205)]||!_0x2a9f10[_0x35a5eb(0x200)])return;_0x403525[_0x35a5eb(0x20c)][_0x35a5eb(0x209)](_0x2a9f10),_0x2a9f10[_0x35a5eb(0x1ec)]=_0x244218['frameNumber'];}function loadTile(_0x2bc1c0,_0xe7e111,_0x2ac524){const _0x23fdef=_0x3b72;if(_0xe7e111[_0x23fdef(0x20a)]===_0x2ac524['frameNumber']||_0xe7e111[_0x23fdef(0x216)]!==_0x3c5933['UNLOADED'])return;_0x2bc1c0['_requestTiles'][_0x23fdef(0x209)](_0xe7e111),_0xe7e111['requestedFrame']=_0x2ac524[_0x23fdef(0x205)];}function processTile(_0x255daf,_0x322be3,_0xe4feb4){const _0x1450c4=_0x3b72;if(_0x322be3[_0x1450c4(0x213)]===_0xe4feb4[_0x1450c4(0x205)]||_0x322be3[_0x1450c4(0x216)]!==_0x3c5933['READY']||_0x322be3[_0x1450c4(0x200)])return;_0x322be3[_0x1450c4(0x213)]=_0xe4feb4[_0x1450c4(0x205)],_0x255daf[_0x1450c4(0x1f5)][_0x1450c4(0x209)](_0x322be3);}function touchTile(_0x1ec792,_0x39b16c,_0x2fa232){const _0x3d315e=_0x3b72;if(_0x39b16c['touchedFrame']===_0x2fa232['frameNumber'])return;_0x1ec792['_cache'][_0x3d315e(0x1f1)](_0x39b16c),_0x39b16c[_0x3d315e(0x1e9)]=_0x2fa232['frameNumber'];}function updateVisibility(_0xecaac2,_0x30eed6,_0x58a5fd){const _0x4c09e0=_0x3b72;if(_0x30eed6['updatedVisibilityFrame']===_0x58a5fd[_0x4c09e0(0x205)])return;_0x30eed6['updatedVisibilityFrame']=_0x58a5fd[_0x4c09e0(0x205)],_0x30eed6[_0x4c09e0(0x1f3)](_0x58a5fd,_0xecaac2);}function updateTileVisibility(_0x19c017,_0x11dbdc,_0x3fcaf0){updateVisibility(_0x11dbdc,_0x3fcaf0,_0x19c017);}function updateMinimumMaximumPriority(_0x5f148b,_0x5bde21){const _0x53cdce=_0x3b72;_0x5f148b[_0x53cdce(0x1f6)][_0x53cdce(0x1f0)]=Math[_0x53cdce(0x1f8)](_0x5bde21['distanceToCamera'],_0x5f148b[_0x53cdce(0x1f6)]['distance']),_0x5f148b[_0x53cdce(0x206)]['distance']=Math['min'](_0x5bde21['distanceToCamera'],_0x5f148b[_0x53cdce(0x206)][_0x53cdce(0x1f0)]),_0x5f148b[_0x53cdce(0x1f6)]['depth']=Math[_0x53cdce(0x1f8)](_0x5bde21['depth'],_0x5f148b[_0x53cdce(0x1f6)][_0x53cdce(0x21b)]),_0x5f148b[_0x53cdce(0x206)][_0x53cdce(0x21b)]=Math['min'](_0x5bde21[_0x53cdce(0x21b)],_0x5f148b['_minimumPriority']['depth']),_0x5f148b['_maximumPriority'][_0x53cdce(0x1fc)]=Math[_0x53cdce(0x1f8)](_0x5bde21[_0x53cdce(0x1fc)],_0x5f148b[_0x53cdce(0x1f6)]['foveatedFactor']),_0x5f148b[_0x53cdce(0x206)][_0x53cdce(0x1fc)]=Math[_0x53cdce(0x20d)](_0x5bde21[_0x53cdce(0x1fc)],_0x5f148b[_0x53cdce(0x206)][_0x53cdce(0x1fc)]),_0x5f148b[_0x53cdce(0x1f6)][_0x53cdce(0x1ed)]=Math[_0x53cdce(0x1f8)](_0x5bde21[_0x53cdce(0x1ed)],_0x5f148b[_0x53cdce(0x1f6)][_0x53cdce(0x1ed)]),_0x5f148b[_0x53cdce(0x206)][_0x53cdce(0x1ed)]=Math[_0x53cdce(0x20d)](_0x5bde21[_0x53cdce(0x1ed)],_0x5f148b['_minimumPriority'][_0x53cdce(0x1ed)]);}function updateTile(_0x247136,_0x1215a6,_0x3557a8){const _0x2c5e6d=_0x3b72;updateTileVisibility(_0x247136,_0x1215a6,_0x3557a8),_0x3557a8[_0x2c5e6d(0x1ff)]=![],_0x3557a8[_0x2c5e6d(0x202)]=_0x3557a8,updateMinimumMaximumPriority(_0x1215a6,_0x3557a8),_0x3557a8[_0x2c5e6d(0x219)]=![],_0x3557a8[_0x2c5e6d(0x1fd)]=![];}function canTraverse(_0x94b303,_0x3b9883){const _0x3b7757=_0x3b72;if(_0x3b9883['children'][_0x3b7757(0x207)]===0x0)return![];if(_0x3b9883[_0x3b7757(0x1ea)]===_0x15a836[_0x3b7757(0x20b)])return _0x3b9883[_0x3b7757(0x1ed)]/_0x94b303[_0x3b7757(0x20f)]>_0x3b9883['lodRangeData'];return _0x3b9883[_0x3b7757(0x204)]*_0x94b303[_0x3b7757(0x20f)]<_0x3b9883['lodRangeData'];}function _0x3b72(_0x336501,_0x4afc3f){_0x336501=_0x336501-0x1e6;let _0x17c9ba=_0x17c9[_0x336501];return _0x17c9ba;}function traversal(_0x2fa992,_0x1d52d4,_0x5a1462){const _0x4a74e2=_0x3b72;while(_0x1d52d4[_0x4a74e2(0x207)]){let _0x1123de=_0x1d52d4['pop'](),_0x465f3a=_0x1123de['parent'],_0x567038=!Cesium[_0x4a74e2(0x203)](_0x465f3a)||_0x465f3a[_0x4a74e2(0x218)],_0x32b674=![];canTraverse(_0x2fa992,_0x1123de)&&(_0x32b674=updateChildren(_0x2fa992,_0x1123de,_0x1d52d4,_0x5a1462)&&_0x567038);let _0x344239=!_0x32b674&&_0x567038;loadTile(_0x2fa992,_0x1123de,_0x5a1462),processTile(_0x2fa992,_0x1123de,_0x5a1462),_0x344239&&selectTile(_0x2fa992,_0x1123de,_0x5a1462),touchTile(_0x2fa992,_0x1123de,_0x5a1462),_0x1123de[_0x4a74e2(0x218)]=_0x32b674;}}function selectRootTiles(_0xee451e,_0x5a59c0,_0x2533c1){const _0xf77af4=_0x3b72;_0x5a59c0[_0xf77af4(0x207)]=0x0;for(let _0x7015d5=0x0,_0x3cdde6=_0xee451e['_rootTiles']['length'];_0x7015d5<_0x3cdde6;_0x7015d5++){let _0x3b3105=_0xee451e[_0xf77af4(0x1f9)][_0x7015d5];updateTile(_0x2533c1,_0xee451e,_0x3b3105);if(!_0x3b3105[_0xf77af4(0x1e7)])continue;_0x5a59c0[_0xf77af4(0x209)](_0x3b3105);}}function updatePriority(_0x5ad08b,_0x391ccb){const _0x2186f2=_0x3b72;let _0x546aad=_0x5ad08b[_0x2186f2(0x1f7)],_0x442822=_0x546aad['length'];for(let _0xdac80f=0x0;_0xdac80f<_0x442822;++_0xdac80f){_0x546aad[_0xdac80f][_0x2186f2(0x1ee)](_0x5ad08b,_0x391ccb);}}S3MLayerScheduler[_0x1ecc81(0x217)]['schedule']=function(_0x4d9247,_0xd0b57a){const _0x527c65=_0x1ecc81;let _0x430e20=this[_0x527c65(0x20e)];selectRootTiles(_0x4d9247,_0x430e20,_0xd0b57a),traversal(_0x4d9247,_0x430e20,_0xd0b57a),updatePriority(_0x4d9247,_0xd0b57a);};export default S3MLayerScheduler;