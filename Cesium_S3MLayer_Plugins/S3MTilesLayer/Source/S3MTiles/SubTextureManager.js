const _0x19fc=['byteLength','198834IJXQIR','quadKeyIndex','31997RhYfQZ','Request','prototype','quadKey','getSingleInstance','join','get','Loaded','pendingRequests','name','Resource','cache','priority','UnLoad','defer','fetchArrayBuffer','providerName','reject','8ExfqVl','next','Ready','174506KXwzgL','then','promisePack','length','state','keyWord','DoublyLinkedList','BYTES_PER_ELEMENT','tile','inflate','otherwise','222307OAAIUx','resolve','remove','17224bkeWRL','list','processRequests','request','getStringFromTypedArray','50467VrfVji','slice','tail','quadKeyIndexPack','92076NxFKVj','getUint32','defined','cancelled','_singleInstance','splice','url','when','buffer','item','prepareRequest','add','push','requestHeapPack','del','3KLPcXN','Failed'];const _0xf40f4e=_0x1c04;function _0x1c04(_0x50d74c,_0x2382a6){_0x50d74c=_0x50d74c-0x17c;let _0x19fc24=_0x19fc[_0x50d74c];return _0x19fc24;}(function(_0x46dfdb,_0x2f0af4){const _0x170a98=_0x1c04;while(!![]){try{const _0x23aba7=parseInt(_0x170a98(0x188))+parseInt(_0x170a98(0x1ad))+-parseInt(_0x170a98(0x185))*parseInt(_0x170a98(0x1b2))+parseInt(_0x170a98(0x1aa))+parseInt(_0x170a98(0x19f))+-parseInt(_0x170a98(0x1b6))+parseInt(_0x170a98(0x19c))*-parseInt(_0x170a98(0x18a));if(_0x23aba7===_0x2f0af4)break;else _0x46dfdb['push'](_0x46dfdb['shift']());}catch(_0x187c8b){_0x46dfdb['push'](_0x46dfdb['shift']());}}}(_0x19fc,0x1bb0a));import _0x37c14d from'../ThirdParty/pako_inflate.js';function SubTextureManager(){const _0x6a557f=_0x1c04;this[_0x6a557f(0x1a3)]={},this[_0x6a557f(0x195)]={},this[_0x6a557f(0x1ae)]=new Cesium[(_0x6a557f(0x1a5))](),this[_0x6a557f(0x192)]=[],this[_0x6a557f(0x1a1)]={},this['quadKeyPack']={},this[_0x6a557f(0x1b5)]={},this[_0x6a557f(0x183)]={};}const _State={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _cacheSize=0x0;const _throttleSize=0xc8*0x400*0x400,_PacketCount=0x14;SubTextureManager['prototype'][_0xf40f4e(0x180)]=function(_0x191c17,_0xb073b9,_0x254c23,_0x11b88c,_0x535cb2){const _0x38ea9c=_0xf40f4e;let _0x1dca15=_0x191c17+'_'+_0x254c23,_0x57069c=_0xb073b9+_0x254c23+'.texblock',_0x1c4fe1=new Cesium[(_0x38ea9c(0x18b))]({'url':_0x57069c,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){return _0x11b88c['distanceToCamera'];}});_0x1c4fe1['quadKey']=_0x254c23,_0x1c4fe1[_0x38ea9c(0x19a)]=_0x535cb2[_0x38ea9c(0x1a7)]['layer'][_0x38ea9c(0x193)],_0x1c4fe1[_0x38ea9c(0x1a4)]=_0x1dca15,this[_0x38ea9c(0x192)][_0x38ea9c(0x182)](_0x1c4fe1);};let comparator=function(_0x5efe01,_0x4977a5){const _0x5546a0=_0xf40f4e;return _0x5efe01['priority']-_0x4977a5[_0x5546a0(0x196)];};SubTextureManager[_0xf40f4e(0x18c)][_0xf40f4e(0x1af)]=function(){const _0x48aa4a=_0xf40f4e;if(this[_0x48aa4a(0x192)][_0x48aa4a(0x1a2)]<0x1)return;this['pendingRequests']['sort'](comparator),this['startPackRequest']();for(let _0x4121b5=0x0,_0x1d58ef=this['pendingRequests'][_0x48aa4a(0x1a2)];_0x4121b5<_0x1d58ef;_0x4121b5++){let _0x1c330d=this[_0x48aa4a(0x192)][_0x4121b5];this['request'](_0x1c330d);}this[_0x48aa4a(0x192)][_0x48aa4a(0x1a2)]=0x0;};function combineQuadkey(_0x31725f){const _0x3454e0=_0xf40f4e;let _0x339708=[],_0x19150e={},_0x309ca5=0x0;for(let _0x5ccc75=0x0,_0x30f56e=_0x31725f['length'];_0x5ccc75<_0x30f56e;_0x5ccc75++){let _0x3ff7db=_0x31725f[_0x5ccc75];if(_0x3ff7db[_0x3454e0(0x1b9)])continue;let _0x54d1b2=_0x3ff7db[_0x3454e0(0x18d)];if(_0x19150e[_0x54d1b2])continue;_0x19150e[_0x54d1b2]=!![],_0x339708['push'](_0x54d1b2),_0x3ff7db['quadKeyIndex']=_0x309ca5++;}return _0x339708;}SubTextureManager[_0xf40f4e(0x18c)]['startPackRequest']=function(){const _0x1e3738=_0xf40f4e;let _0x308b2b=combineQuadkey(this[_0x1e3738(0x192)]),_0x349553=_0x308b2b[_0x1e3738(0x18f)](';'),_0xc9beca=this[_0x1e3738(0x192)][0x0][_0x1e3738(0x17c)],_0x42103b=new Cesium[(_0x1e3738(0x194))]({'url':_0xc9beca,'queryParameters':{'extratiles':_0x349553}}),_0x30aa62=Cesium[_0x1e3738(0x17d)][_0x1e3738(0x198)](),_0x1fe791=_0x42103b[_0x1e3738(0x199)]();if(!_0x1fe791)return;for(let _0x55666a=0x0,_0x2ad854=this[_0x1e3738(0x192)][_0x1e3738(0x1a2)];_0x55666a<_0x2ad854;_0x55666a++){let _0x417f9b=this[_0x1e3738(0x192)][_0x55666a];_0x417f9b['deferred']=_0x30aa62;}_0x1fe791[_0x1e3738(0x1a0)](function(_0x4080a9){const _0x982618=_0x1e3738;_0x30aa62[_0x982618(0x1ab)](_0x4080a9);})[_0x1e3738(0x1a9)](function(_0x54e3f9){const _0x3d7eb7=_0x1e3738;_0x30aa62[_0x3d7eb7(0x19b)](_0x54e3f9);});};function decodePackedBuffer(_0x765293,_0x8579ca){const _0x3e3a94=_0xf40f4e;let _0x3e18c5=new DataView(_0x765293),_0x4290be=0x0,_0x26f12e=_0x3e18c5[_0x3e3a94(0x1b7)](_0x4290be,!![]);if(_0x8579ca>_0x26f12e-0x1||_0x26f12e>0x100)return undefined;_0x4290be+=0x4;let _0x49a1ef=[],_0x5bf8d8,_0x4b6a17;for(_0x5bf8d8=0x0;_0x5bf8d8<_0x26f12e;_0x5bf8d8++){_0x4b6a17=_0x3e18c5[_0x3e3a94(0x1b7)](_0x4290be,!![]),_0x49a1ef[_0x3e3a94(0x182)](_0x4b6a17),_0x4290be+=0x4;}for(_0x5bf8d8=0x0;_0x5bf8d8<_0x26f12e;_0x5bf8d8++){_0x4b6a17=_0x49a1ef[_0x5bf8d8];if(_0x5bf8d8===_0x8579ca){if(_0x4b6a17===0x0)return;return new Uint8Array(_0x765293)[_0x3e3a94(0x1b3)](_0x4290be,_0x4290be+_0x4b6a17)[_0x3e3a94(0x17e)];}_0x4290be+=_0x4b6a17;}return undefined;}SubTextureManager[_0xf40f4e(0x18c)][_0xf40f4e(0x1b0)]=function(_0x9c785c){const _0x3b890b=_0xf40f4e;let _0x44ea3a=_0x9c785c[_0x3b890b(0x1a4)],_0xa6a64b=_0x9c785c['deferred']['promise'];this['state'][_0x44ea3a]=_State['Loading'];let _0x5bfb70=this;_0xa6a64b[_0x3b890b(0x1a0)](function(_0xa88ba4){const _0x353e83=_0x3b890b;if(!Cesium['defined'](_0x5bfb70[_0x353e83(0x1a3)][_0x44ea3a]))return;_0x5bfb70[_0x353e83(0x1a3)][_0x44ea3a]=_State[_0x353e83(0x191)];let _0x393f61=decodePackedBuffer(_0xa88ba4,_0x9c785c[_0x353e83(0x189)]);if(!_0x393f61){_0x5bfb70[_0x353e83(0x1a3)][_0x44ea3a]=_State[_0x353e83(0x186)];return;}let _0x593696=new Uint8Array(_0x393f61),_0x22400a=new DataView(_0x393f61),_0x4357a5=0x0,_0x45af09=_0x22400a['getUint32'](_0x4357a5,!![]);_0x4357a5+=Uint32Array[_0x353e83(0x1a6)];let _0x11ff01={};for(let _0xf34be8=0x0;_0xf34be8<_0x45af09;_0xf34be8++){let _0xb71122=_0x22400a[_0x353e83(0x1b7)](_0x4357a5,!![]);_0x4357a5+=Uint32Array[_0x353e83(0x1a6)];let _0x5e2415=Cesium[_0x353e83(0x1b1)](_0x593696,_0x4357a5,_0xb71122);_0x4357a5+=_0xb71122;let _0x5ad285=_0x22400a[_0x353e83(0x1b7)](_0x4357a5,!![]);_0x4357a5+=Uint32Array['BYTES_PER_ELEMENT'];let _0x23fe24=_0x22400a[_0x353e83(0x1b7)](_0x4357a5,!![]);_0x4357a5+=Uint32Array[_0x353e83(0x1a6)];let _0x21e3d5=new Uint8Array(_0x393f61,_0x4357a5,_0x23fe24),_0x5d11fb=_0x37c14d[_0x353e83(0x1a8)](_0x21e3d5)[_0x353e83(0x17e)];_0x4357a5+=_0x23fe24;let _0x381b25=new DataView(_0x5d11fb),_0x16d347=0x0,_0xd819c0=_0x381b25[_0x353e83(0x1b7)](_0x16d347,!![]);_0x16d347+=Uint32Array[_0x353e83(0x1a6)];let _0x1c6780=_0x381b25['getUint32'](_0x16d347,!![]);_0x16d347+=Uint32Array[_0x353e83(0x1a6)];let _0x50deab=_0x381b25[_0x353e83(0x1b7)](_0x16d347,!![]);_0x16d347+=Uint32Array[_0x353e83(0x1a6)];let _0x1e5b50=_0x381b25[_0x353e83(0x1b7)](_0x16d347,!![]);_0x16d347+=Uint32Array[_0x353e83(0x1a6)];let _0x29a3aa=_0x381b25[_0x353e83(0x1b7)](_0x16d347,!![]);_0x16d347+=Uint32Array[_0x353e83(0x1a6)];let _0x96f003=new Uint8Array(_0x5d11fb,_0x16d347,_0x29a3aa);_0x11ff01[_0x5e2415]={'width':_0x1c6780,'height':_0x50deab,'arrayBufferView':_0x96f003};}let _0x3dd665={'keyWord':_0x44ea3a,'result':_0x11ff01,'byteLength':_0x393f61[_0x353e83(0x187)]},_0x2c1658=_0x5bfb70['list'][_0x353e83(0x181)](_0x3dd665);_0x5bfb70['cache'][_0x44ea3a]=_0x2c1658,_0x5bfb70['state'][_0x44ea3a]=_State[_0x353e83(0x19e)],delete _0x5bfb70[_0x353e83(0x1a3)][_0x44ea3a],_cacheSize+=_0x393f61[_0x353e83(0x187)];let _0x1e5005=_0x5bfb70[_0x353e83(0x1ae)]['head'];while(_cacheSize>_throttleSize){let _0x49d1cc=_0x1e5005[_0x353e83(0x17f)],_0x45223d=_0x1e5005,_0x2ff505=_0x49d1cc['keyWord'],_0x332722=_0x5bfb70[_0x353e83(0x195)][_0x2ff505],_0x378bec=_0x332722[_0x353e83(0x17f)];_cacheSize-=_0x378bec[_0x353e83(0x187)],delete _0x5bfb70[_0x353e83(0x195)][_0x2ff505],_0x1e5005=_0x1e5005[_0x353e83(0x19d)],_0x5bfb70['list'][_0x353e83(0x1ac)](_0x45223d);}},function(_0x216a30){const _0x2276e1=_0x3b890b;_0x5bfb70['state'][_0x44ea3a]=_0x216a30?_State[_0x2276e1(0x186)]:_State[_0x2276e1(0x197)];});},SubTextureManager[_0xf40f4e(0x18c)][_0xf40f4e(0x190)]=function(_0x852633,_0x300306,_0x97397b,_0x2edf6f){const _0x56f91a=_0xf40f4e;let _0x3e231e=_0x852633+'_'+_0x97397b,_0xca33f6=this[_0x56f91a(0x195)][_0x3e231e];if(_0xca33f6)return this[_0x56f91a(0x1ae)][_0x56f91a(0x1bb)](this[_0x56f91a(0x1ae)][_0x56f91a(0x1b4)],_0xca33f6),_0xca33f6[_0x56f91a(0x17f)];let _0x17f354=this[_0x56f91a(0x1a3)][_0x3e231e];return!Cesium[_0x56f91a(0x1b8)](_0x17f354)&&(_0x17f354=this[_0x56f91a(0x1a3)][_0x3e231e]=_State[_0x56f91a(0x197)]),_0x17f354===_State['UnLoad']&&this[_0x56f91a(0x180)](_0x852633,_0x300306,_0x97397b,_0x2edf6f[_0x56f91a(0x1a7)],_0x2edf6f),undefined;},SubTextureManager['prototype'][_0xf40f4e(0x184)]=function(_0xa397aa,_0x452635){let _0xa265cf=_0xa397aa+'_'+_0x452635;delete this['state'][_0xa265cf];},SubTextureManager[_0xf40f4e(0x1ba)]=undefined,SubTextureManager[_0xf40f4e(0x18e)]=function(){const _0x364147=_0xf40f4e;return!SubTextureManager[_0x364147(0x1ba)]&&(SubTextureManager[_0x364147(0x1ba)]=new SubTextureManager()),SubTextureManager[_0x364147(0x1ba)];};export default SubTextureManager;