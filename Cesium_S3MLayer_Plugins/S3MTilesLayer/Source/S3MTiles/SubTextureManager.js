const _0x113a=['resolve','buffer','quadKeyPack','1nAnXMm','tail','reject','1444557BRgCGR','Loaded','prototype','quadKey','Failed','880363IqYPBA','20985zwnbRK','length','BYTES_PER_ELEMENT','splice','_singleInstance','item','inflate','466227QjWnIE','defer','slice','push','UnLoad','getStringFromTypedArray','head','980977iRbVVk','then','defined','Request','deferred','url','getUint32','providerName','quadKeyIndex','get','keyWord','pendingRequests','add','getSingleInstance','fetchArrayBuffer','promisePack','distanceToCamera','processRequests','join','cache','requestHeapPack','layer','DoublyLinkedList','quadKeyIndexPack','Loading','24sZNdvB','prepareRequest','otherwise','name','remove','41467lzdWwp','1855004OXnSgV','next','35GVfIKZ','state','tile','del','cancelled','priority','list'];const _0x3d16cc=_0x723a;(function(_0x2865fc,_0x57d9c3){const _0x1c2888=_0x723a;while(!![]){try{const _0x367954=-parseInt(_0x1c2888(0x152))+parseInt(_0x1c2888(0x167))*parseInt(_0x1c2888(0x14c))+-parseInt(_0x1c2888(0x161))*-parseInt(_0x1c2888(0x15e))+-parseInt(_0x1c2888(0x133))+parseInt(_0x1c2888(0x166))+-parseInt(_0x1c2888(0x151))*-parseInt(_0x1c2888(0x154))+-parseInt(_0x1c2888(0x12c));if(_0x367954===_0x57d9c3)break;else _0x2865fc['push'](_0x2865fc['shift']());}catch(_0x18ff65){_0x2865fc['push'](_0x2865fc['shift']());}}}(_0x113a,0xeeb21));function _0x723a(_0x5f5353,_0x36e10a){_0x5f5353=_0x5f5353-0x12b;let _0x113a51=_0x113a[_0x5f5353];return _0x113a51;}import _0x43c641 from'../ThirdParty/pako_inflate.js';function SubTextureManager(){const _0x354fa0=_0x723a;this['state']={},this['cache']={},this[_0x354fa0(0x15a)]=new Cesium[(_0x354fa0(0x149))](),this[_0x354fa0(0x13e)]=[],this[_0x354fa0(0x142)]={},this[_0x354fa0(0x15d)]={},this[_0x354fa0(0x14a)]={},this[_0x354fa0(0x147)]={};}const _State={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};let _cacheSize=0x0;const _throttleSize=0xc8*0x400*0x400,_PacketCount=0x14;SubTextureManager['prototype'][_0x3d16cc(0x14d)]=function(_0x4020d7,_0x2872b9,_0x31da6c,_0x16dcd,_0x2ed958){const _0x42e4cb=_0x3d16cc;let _0x5dcf83=_0x4020d7+'_'+_0x31da6c,_0x266dd7=_0x2872b9+_0x31da6c+'.texblock',_0x236035=new Cesium[(_0x42e4cb(0x136))]({'url':_0x266dd7,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){const _0x124e04=_0x42e4cb;return _0x16dcd[_0x124e04(0x143)];}});_0x236035['quadKey']=_0x31da6c,_0x236035[_0x42e4cb(0x13a)]=_0x2ed958[_0x42e4cb(0x156)][_0x42e4cb(0x148)][_0x42e4cb(0x14f)],_0x236035[_0x42e4cb(0x13d)]=_0x5dcf83,this['pendingRequests'][_0x42e4cb(0x12f)](_0x236035);};let comparator=function(_0x26234d,_0x13699d){const _0x1f6cfc=_0x3d16cc;return _0x26234d[_0x1f6cfc(0x159)]-_0x13699d['priority'];};SubTextureManager[_0x3d16cc(0x163)][_0x3d16cc(0x144)]=function(){const _0x41447b=_0x3d16cc;if(this['pendingRequests'][_0x41447b(0x168)]<0x1)return;this[_0x41447b(0x13e)]['sort'](comparator),this['startPackRequest']();for(let _0x34ad03=0x0,_0x32ddcd=this['pendingRequests'][_0x41447b(0x168)];_0x34ad03<_0x32ddcd;_0x34ad03++){let _0x585362=this[_0x41447b(0x13e)][_0x34ad03];this['request'](_0x585362);}this['pendingRequests'][_0x41447b(0x168)]=0x0;};function combineQuadkey(_0xad0b91){const _0x381ca1=_0x3d16cc;let _0x278ba9=[],_0x4f92f5={},_0x5b3bca=0x0;for(let _0x2bb53e=0x0,_0x1c60bb=_0xad0b91[_0x381ca1(0x168)];_0x2bb53e<_0x1c60bb;_0x2bb53e++){let _0x4a0c4f=_0xad0b91[_0x2bb53e];if(_0x4a0c4f[_0x381ca1(0x158)])continue;let _0x2a5d80=_0x4a0c4f[_0x381ca1(0x164)];if(_0x4f92f5[_0x2a5d80])continue;_0x4f92f5[_0x2a5d80]=!![],_0x278ba9[_0x381ca1(0x12f)](_0x2a5d80),_0x4a0c4f[_0x381ca1(0x13b)]=_0x5b3bca++;}return _0x278ba9;}SubTextureManager['prototype']['startPackRequest']=function(){const _0x296eda=_0x3d16cc;let _0x2449dc=combineQuadkey(this[_0x296eda(0x13e)]),_0x5ce7da=_0x2449dc[_0x296eda(0x145)](';'),_0x3f47db=this[_0x296eda(0x13e)][0x0][_0x296eda(0x138)],_0x580e9e=new Cesium['Resource']({'url':_0x3f47db,'queryParameters':{'extratiles':_0x5ce7da}}),_0x16d5a7=Cesium['when'][_0x296eda(0x12d)](),_0x33ab43=_0x580e9e[_0x296eda(0x141)]();if(!_0x33ab43)return;for(let _0x48b2cf=0x0,_0x325540=this[_0x296eda(0x13e)][_0x296eda(0x168)];_0x48b2cf<_0x325540;_0x48b2cf++){let _0x30bd56=this[_0x296eda(0x13e)][_0x48b2cf];_0x30bd56[_0x296eda(0x137)]=_0x16d5a7;}_0x33ab43[_0x296eda(0x134)](function(_0x43fed7){const _0x5a4390=_0x296eda;_0x16d5a7[_0x5a4390(0x15b)](_0x43fed7);})[_0x296eda(0x14e)](function(_0x314b3a){const _0x29d56f=_0x296eda;_0x16d5a7[_0x29d56f(0x160)](_0x314b3a);});};function decodePackedBuffer(_0x103da5,_0x18b007){const _0xda726a=_0x3d16cc;let _0x1689db=new DataView(_0x103da5),_0x109eb6=0x0,_0x5f0631=_0x1689db[_0xda726a(0x139)](_0x109eb6,!![]);if(_0x18b007>_0x5f0631-0x1||_0x5f0631>0x100)return undefined;_0x109eb6+=0x4;let _0xa7a052=[],_0x381dc6,_0x23a8da;for(_0x381dc6=0x0;_0x381dc6<_0x5f0631;_0x381dc6++){_0x23a8da=_0x1689db[_0xda726a(0x139)](_0x109eb6,!![]),_0xa7a052[_0xda726a(0x12f)](_0x23a8da),_0x109eb6+=0x4;}for(_0x381dc6=0x0;_0x381dc6<_0x5f0631;_0x381dc6++){_0x23a8da=_0xa7a052[_0x381dc6];if(_0x381dc6===_0x18b007){if(_0x23a8da===0x0)return;return new Uint8Array(_0x103da5)[_0xda726a(0x12e)](_0x109eb6,_0x109eb6+_0x23a8da)[_0xda726a(0x15c)];}_0x109eb6+=_0x23a8da;}return undefined;}SubTextureManager[_0x3d16cc(0x163)]['request']=function(_0x473031){const _0x96e873=_0x3d16cc;let _0x1d48a4=_0x473031[_0x96e873(0x13d)],_0x1afb89=_0x473031['deferred']['promise'];this[_0x96e873(0x155)][_0x1d48a4]=_State[_0x96e873(0x14b)];let _0x1c6e64=this;_0x1afb89[_0x96e873(0x134)](function(_0x8e8959){const _0x2806dd=_0x96e873;if(!Cesium[_0x2806dd(0x135)](_0x1c6e64[_0x2806dd(0x155)][_0x1d48a4]))return;_0x1c6e64[_0x2806dd(0x155)][_0x1d48a4]=_State[_0x2806dd(0x162)];let _0xbd0206=decodePackedBuffer(_0x8e8959,_0x473031['quadKeyIndex']);if(!_0xbd0206){_0x1c6e64[_0x2806dd(0x155)][_0x1d48a4]=_State[_0x2806dd(0x165)];return;}let _0x597b01=new Uint8Array(_0xbd0206),_0x3421f3=new DataView(_0xbd0206),_0x4be64b=0x0,_0xe7fdd6=_0x3421f3[_0x2806dd(0x139)](_0x4be64b,!![]);_0x4be64b+=Uint32Array['BYTES_PER_ELEMENT'];let _0x42e68d={};for(let _0x443c51=0x0;_0x443c51<_0xe7fdd6;_0x443c51++){let _0x482928=_0x3421f3['getUint32'](_0x4be64b,!![]);_0x4be64b+=Uint32Array[_0x2806dd(0x169)];let _0x1477d1=Cesium[_0x2806dd(0x131)](_0x597b01,_0x4be64b,_0x482928);_0x4be64b+=_0x482928;let _0x328af4=_0x3421f3['getUint32'](_0x4be64b,!![]);_0x4be64b+=Uint32Array[_0x2806dd(0x169)];let _0x647ee8=_0x3421f3['getUint32'](_0x4be64b,!![]);_0x4be64b+=Uint32Array['BYTES_PER_ELEMENT'];let _0x323613=new Uint8Array(_0xbd0206,_0x4be64b,_0x647ee8),_0x5475ec=_0x43c641[_0x2806dd(0x12b)](_0x323613)[_0x2806dd(0x15c)];_0x4be64b+=_0x647ee8;let _0x3a7a29=new DataView(_0x5475ec),_0x5786f5=0x0,_0x1b9619=_0x3a7a29['getUint32'](_0x5786f5,!![]);_0x5786f5+=Uint32Array[_0x2806dd(0x169)];let _0x20a9b0=_0x3a7a29[_0x2806dd(0x139)](_0x5786f5,!![]);_0x5786f5+=Uint32Array['BYTES_PER_ELEMENT'];let _0x49a2cd=_0x3a7a29[_0x2806dd(0x139)](_0x5786f5,!![]);_0x5786f5+=Uint32Array[_0x2806dd(0x169)];let _0x30513f=_0x3a7a29['getUint32'](_0x5786f5,!![]);_0x5786f5+=Uint32Array['BYTES_PER_ELEMENT'];let _0x26f7a0=_0x3a7a29[_0x2806dd(0x139)](_0x5786f5,!![]);_0x5786f5+=Uint32Array['BYTES_PER_ELEMENT'];let _0x3a2f49=new Uint8Array(_0x5475ec,_0x5786f5,_0x26f7a0);_0x42e68d[_0x1477d1]={'width':_0x20a9b0,'height':_0x49a2cd,'arrayBufferView':_0x3a2f49};}let _0x215897={'keyWord':_0x1d48a4,'result':_0x42e68d,'byteLength':_0xbd0206['byteLength']},_0x135e23=_0x1c6e64[_0x2806dd(0x15a)][_0x2806dd(0x13f)](_0x215897);_0x1c6e64[_0x2806dd(0x146)][_0x1d48a4]=_0x135e23,_0x1c6e64[_0x2806dd(0x155)][_0x1d48a4]=_State['Ready'],delete _0x1c6e64[_0x2806dd(0x155)][_0x1d48a4],_cacheSize+=_0xbd0206['byteLength'];let _0x1ccc36=_0x1c6e64[_0x2806dd(0x15a)][_0x2806dd(0x132)];while(_cacheSize>_throttleSize){let _0x5b4047=_0x1ccc36[_0x2806dd(0x16c)],_0x3e4d37=_0x1ccc36,_0x14ac80=_0x5b4047[_0x2806dd(0x13d)],_0x7ae860=_0x1c6e64[_0x2806dd(0x146)][_0x14ac80],_0x3735b6=_0x7ae860['item'];_cacheSize-=_0x3735b6['byteLength'],delete _0x1c6e64[_0x2806dd(0x146)][_0x14ac80],_0x1ccc36=_0x1ccc36[_0x2806dd(0x153)],_0x1c6e64['list'][_0x2806dd(0x150)](_0x3e4d37);}},function(_0x4c4679){const _0x35768e=_0x96e873;_0x1c6e64[_0x35768e(0x155)][_0x1d48a4]=_0x4c4679?_State[_0x35768e(0x165)]:_State['UnLoad'];});},SubTextureManager[_0x3d16cc(0x163)][_0x3d16cc(0x13c)]=function(_0x3555e4,_0xb378c5,_0x548f9a,_0x4fc127){const _0x49f9e1=_0x3d16cc;let _0x18cd6a=_0x3555e4+'_'+_0x548f9a,_0x252cfe=this['cache'][_0x18cd6a];if(_0x252cfe)return this[_0x49f9e1(0x15a)][_0x49f9e1(0x16a)](this[_0x49f9e1(0x15a)][_0x49f9e1(0x15f)],_0x252cfe),_0x252cfe[_0x49f9e1(0x16c)];let _0x2be0f4=this[_0x49f9e1(0x155)][_0x18cd6a];return!Cesium['defined'](_0x2be0f4)&&(_0x2be0f4=this[_0x49f9e1(0x155)][_0x18cd6a]=_State[_0x49f9e1(0x130)]),_0x2be0f4===_State['UnLoad']&&this[_0x49f9e1(0x14d)](_0x3555e4,_0xb378c5,_0x548f9a,_0x4fc127[_0x49f9e1(0x156)],_0x4fc127),undefined;},SubTextureManager[_0x3d16cc(0x163)][_0x3d16cc(0x157)]=function(_0xfbf9ad,_0x2f1fad){const _0x31ab2f=_0x3d16cc;let _0x5b46dd=_0xfbf9ad+'_'+_0x2f1fad;delete this[_0x31ab2f(0x155)][_0x5b46dd];},SubTextureManager['_singleInstance']=undefined,SubTextureManager[_0x3d16cc(0x140)]=function(){const _0x4d59fa=_0x3d16cc;return!SubTextureManager[_0x4d59fa(0x16b)]&&(SubTextureManager[_0x4d59fa(0x16b)]=new SubTextureManager()),SubTextureManager[_0x4d59fa(0x16b)];};export default SubTextureManager;