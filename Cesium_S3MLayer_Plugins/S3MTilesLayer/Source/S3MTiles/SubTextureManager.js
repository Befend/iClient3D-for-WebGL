const _0x1c7d=['sort','layer','promise','request','url','defined','.texblock','push','125246uJtEna','list','otherwise','defer','get','item','priority','join','400319ksNhFf','13iVmWhx','promisePack','143378UQjHCt','getUint32','Ready','providerName','Loaded','byteLength','10DnMXFY','tile','cancelled','Loading','length','deferred','next','quadKey','remove','then','buffer','when','processRequests','state','requestHeapPack','DoublyLinkedList','225661VbgjXQ','keyWord','quadKeyIndex','name','slice','Request','cache','701dLMRxP','fetchArrayBuffer','add','inflate','3nzijFJ','getStringFromTypedArray','BYTES_PER_ELEMENT','prototype','Resource','224nGEXVC','getSingleInstance','_singleInstance','UnLoad','Failed','startPackRequest','reject','quadKeyIndexPack','20497thAYaA','722610mkLQts','splice','pendingRequests'];const _0x1e0c25=_0x4f6f;(function(_0x49642e,_0xa475e7){const _0x3363eb=_0x4f6f;while(!![]){try{const _0x58608c=-parseInt(_0x3363eb(0xc1))+-parseInt(_0x3363eb(0xc9))+-parseInt(_0x3363eb(0xb6))+-parseInt(_0x3363eb(0xb5))*parseInt(_0x3363eb(0xca))+-parseInt(_0x3363eb(0xa8))*-parseInt(_0x3363eb(0x9d))+-parseInt(_0x3363eb(0xa4))*parseInt(_0x3363eb(0xad))+parseInt(_0x3363eb(0x8d))*parseInt(_0x3363eb(0xcc));if(_0x58608c===_0xa475e7)break;else _0x49642e['push'](_0x49642e['shift']());}catch(_0x10bca7){_0x49642e['push'](_0x49642e['shift']());}}}(_0x1c7d,0x6b33f));import _0x40281d from'../ThirdParty/pako_inflate.js';function SubTextureManager(){const _0x41f913=_0x4f6f;this['state']={},this[_0x41f913(0xa3)]={},this[_0x41f913(0xc2)]=new Cesium[(_0x41f913(0x9c))](),this[_0x41f913(0xb8)]=[],this[_0x41f913(0xcb)]={},this['quadKeyPack']={},this[_0x41f913(0xb4)]={},this[_0x41f913(0x9b)]={};}const _State={'UnLoad':0x0,'Loading':0x1,'Loaded':0x2,'Parsing':0x3,'Ready':0x4,'Failed':0x5};function _0x4f6f(_0x4d84b1,_0x45e82f){_0x4d84b1=_0x4d84b1-0x89;let _0x1c7db3=_0x1c7d[_0x4d84b1];return _0x1c7db3;}let _cacheSize=0x0;const _throttleSize=0xc8*0x400*0x400,_PacketCount=0x14;SubTextureManager['prototype']['prepareRequest']=function(_0xa0acf5,_0x2e8756,_0x39fc9c,_0x58d625,_0x3c6b46){const _0x438ee8=_0x4f6f;let _0x51c92b=_0xa0acf5+'_'+_0x39fc9c,_0x4e3106=_0x2e8756+_0x39fc9c+_0x438ee8(0xbf),_0x1a9c50=new Cesium[(_0x438ee8(0xa2))]({'url':_0x4e3106,'throttle':!![],'throttleByServer':!![],'priorityFunction':function(){return _0x58d625['distanceToCamera'];}});_0x1a9c50[_0x438ee8(0x94)]=_0x39fc9c,_0x1a9c50[_0x438ee8(0x8a)]=_0x3c6b46[_0x438ee8(0x8e)][_0x438ee8(0xba)][_0x438ee8(0xa0)],_0x1a9c50[_0x438ee8(0x9e)]=_0x51c92b,this[_0x438ee8(0xb8)]['push'](_0x1a9c50);};let comparator=function(_0x4d060e,_0x37efec){const _0x44c6ce=_0x4f6f;return _0x4d060e['priority']-_0x37efec[_0x44c6ce(0xc7)];};SubTextureManager['prototype'][_0x1e0c25(0x99)]=function(){const _0xdaee50=_0x1e0c25;if(this['pendingRequests'][_0xdaee50(0x91)]<0x1)return;this[_0xdaee50(0xb8)][_0xdaee50(0xb9)](comparator),this[_0xdaee50(0xb2)]();for(let _0x3c5866=0x0,_0x5884be=this[_0xdaee50(0xb8)][_0xdaee50(0x91)];_0x3c5866<_0x5884be;_0x3c5866++){let _0x5970c9=this[_0xdaee50(0xb8)][_0x3c5866];this[_0xdaee50(0xbc)](_0x5970c9);}this[_0xdaee50(0xb8)][_0xdaee50(0x91)]=0x0;};function combineQuadkey(_0x206231){const _0xd047da=_0x1e0c25;let _0x3a2566=[],_0xe104a0={},_0x365022=0x0;for(let _0x365b32=0x0,_0x237566=_0x206231[_0xd047da(0x91)];_0x365b32<_0x237566;_0x365b32++){let _0x31fa91=_0x206231[_0x365b32];if(_0x31fa91[_0xd047da(0x8f)])continue;let _0x3c3373=_0x31fa91[_0xd047da(0x94)];if(_0xe104a0[_0x3c3373])continue;_0xe104a0[_0x3c3373]=!![],_0x3a2566[_0xd047da(0xc0)](_0x3c3373),_0x31fa91[_0xd047da(0x9f)]=_0x365022++;}return _0x3a2566;}SubTextureManager['prototype']['startPackRequest']=function(){const _0x1d17d5=_0x1e0c25;let _0x313d1e=combineQuadkey(this[_0x1d17d5(0xb8)]),_0x4e1f74=_0x313d1e[_0x1d17d5(0xc8)](';'),_0x1d8d8c=this['pendingRequests'][0x0][_0x1d17d5(0xbd)],_0x178ed8=new Cesium[(_0x1d17d5(0xac))]({'url':_0x1d8d8c,'queryParameters':{'extratiles':_0x4e1f74}}),_0x393d6f=Cesium[_0x1d17d5(0x98)][_0x1d17d5(0xc4)](),_0x26439d=_0x178ed8[_0x1d17d5(0xa5)]();if(!_0x26439d)return;for(let _0xddc648=0x0,_0xc527de=this[_0x1d17d5(0xb8)][_0x1d17d5(0x91)];_0xddc648<_0xc527de;_0xddc648++){let _0x4a871e=this['pendingRequests'][_0xddc648];_0x4a871e[_0x1d17d5(0x92)]=_0x393d6f;}_0x26439d['then'](function(_0x37c083){_0x393d6f['resolve'](_0x37c083);})[_0x1d17d5(0xc3)](function(_0x64e8b7){const _0x47233d=_0x1d17d5;_0x393d6f[_0x47233d(0xb3)](_0x64e8b7);});};function decodePackedBuffer(_0x4d9cf4,_0x5c51c0){const _0x415499=_0x1e0c25;let _0xf6577f=new DataView(_0x4d9cf4),_0x4709c8=0x0,_0x4bd869=_0xf6577f[_0x415499(0xcd)](_0x4709c8,!![]);if(_0x5c51c0>_0x4bd869-0x1||_0x4bd869>0x100)return undefined;_0x4709c8+=0x4;let _0x3ecd09=[],_0x7ff491,_0x454376;for(_0x7ff491=0x0;_0x7ff491<_0x4bd869;_0x7ff491++){_0x454376=_0xf6577f[_0x415499(0xcd)](_0x4709c8,!![]),_0x3ecd09['push'](_0x454376),_0x4709c8+=0x4;}for(_0x7ff491=0x0;_0x7ff491<_0x4bd869;_0x7ff491++){_0x454376=_0x3ecd09[_0x7ff491];if(_0x7ff491===_0x5c51c0){if(_0x454376===0x0)return;return new Uint8Array(_0x4d9cf4)[_0x415499(0xa1)](_0x4709c8,_0x4709c8+_0x454376)[_0x415499(0x97)];}_0x4709c8+=_0x454376;}return undefined;}SubTextureManager[_0x1e0c25(0xab)][_0x1e0c25(0xbc)]=function(_0x262d7e){const _0x3fe556=_0x1e0c25;let _0x538dac=_0x262d7e['keyWord'],_0x46c8ab=_0x262d7e[_0x3fe556(0x92)][_0x3fe556(0xbb)];this['state'][_0x538dac]=_State[_0x3fe556(0x90)];let _0x3613a1=this;_0x46c8ab[_0x3fe556(0x96)](function(_0x4ebf99){const _0x431ba3=_0x3fe556;if(!Cesium['defined'](_0x3613a1[_0x431ba3(0x9a)][_0x538dac]))return;_0x3613a1[_0x431ba3(0x9a)][_0x538dac]=_State[_0x431ba3(0x8b)];let _0x468e90=decodePackedBuffer(_0x4ebf99,_0x262d7e['quadKeyIndex']);if(!_0x468e90){_0x3613a1['state'][_0x538dac]=_State[_0x431ba3(0xb1)];return;}let _0x383d69=new Uint8Array(_0x468e90),_0x327330=new DataView(_0x468e90),_0x3939a5=0x0,_0x5db3a2=_0x327330[_0x431ba3(0xcd)](_0x3939a5,!![]);_0x3939a5+=Uint32Array[_0x431ba3(0xaa)];let _0x3b05fe={};for(let _0x36fa48=0x0;_0x36fa48<_0x5db3a2;_0x36fa48++){let _0x20a4c8=_0x327330[_0x431ba3(0xcd)](_0x3939a5,!![]);_0x3939a5+=Uint32Array[_0x431ba3(0xaa)];let _0x1d2a05=Cesium[_0x431ba3(0xa9)](_0x383d69,_0x3939a5,_0x20a4c8);_0x3939a5+=_0x20a4c8;let _0x4c1abd=_0x327330[_0x431ba3(0xcd)](_0x3939a5,!![]);_0x3939a5+=Uint32Array[_0x431ba3(0xaa)];let _0x582ab9=_0x327330['getUint32'](_0x3939a5,!![]);_0x3939a5+=Uint32Array[_0x431ba3(0xaa)];let _0x3b64ad=new Uint8Array(_0x468e90,_0x3939a5,_0x582ab9),_0x451f8e=_0x40281d[_0x431ba3(0xa7)](_0x3b64ad)[_0x431ba3(0x97)];_0x3939a5+=_0x582ab9;let _0x4d6d91=new DataView(_0x451f8e),_0x54675a=0x0,_0x100113=_0x4d6d91[_0x431ba3(0xcd)](_0x54675a,!![]);_0x54675a+=Uint32Array[_0x431ba3(0xaa)];let _0x485969=_0x4d6d91[_0x431ba3(0xcd)](_0x54675a,!![]);_0x54675a+=Uint32Array[_0x431ba3(0xaa)];let _0x235545=_0x4d6d91[_0x431ba3(0xcd)](_0x54675a,!![]);_0x54675a+=Uint32Array['BYTES_PER_ELEMENT'];let _0x4d1dd3=_0x4d6d91[_0x431ba3(0xcd)](_0x54675a,!![]);_0x54675a+=Uint32Array[_0x431ba3(0xaa)];let _0x1b9411=_0x4d6d91[_0x431ba3(0xcd)](_0x54675a,!![]);_0x54675a+=Uint32Array[_0x431ba3(0xaa)];let _0x3d98b2=new Uint8Array(_0x451f8e,_0x54675a,_0x1b9411);_0x3b05fe[_0x1d2a05]={'width':_0x485969,'height':_0x235545,'arrayBufferView':_0x3d98b2};}let _0x267ce0={'keyWord':_0x538dac,'result':_0x3b05fe,'byteLength':_0x468e90['byteLength']},_0x352c06=_0x3613a1['list'][_0x431ba3(0xa6)](_0x267ce0);_0x3613a1[_0x431ba3(0xa3)][_0x538dac]=_0x352c06,_0x3613a1[_0x431ba3(0x9a)][_0x538dac]=_State[_0x431ba3(0x89)],delete _0x3613a1['state'][_0x538dac],_cacheSize+=_0x468e90[_0x431ba3(0x8c)];let _0x2345e2=_0x3613a1['list']['head'];while(_cacheSize>_throttleSize){let _0xd93412=_0x2345e2[_0x431ba3(0xc6)],_0x453488=_0x2345e2,_0x38265a=_0xd93412[_0x431ba3(0x9e)],_0x5bff44=_0x3613a1[_0x431ba3(0xa3)][_0x38265a],_0x1e3ea4=_0x5bff44['item'];_cacheSize-=_0x1e3ea4['byteLength'],delete _0x3613a1['cache'][_0x38265a],_0x2345e2=_0x2345e2[_0x431ba3(0x93)],_0x3613a1[_0x431ba3(0xc2)][_0x431ba3(0x95)](_0x453488);}},function(_0x45f2cd){const _0x507dee=_0x3fe556;_0x3613a1['state'][_0x538dac]=_0x45f2cd?_State[_0x507dee(0xb1)]:_State['UnLoad'];});},SubTextureManager[_0x1e0c25(0xab)][_0x1e0c25(0xc5)]=function(_0x42cc53,_0x258a4b,_0x53188e,_0x551a8c){const _0x280761=_0x1e0c25;let _0x162d31=_0x42cc53+'_'+_0x53188e,_0x42dc98=this[_0x280761(0xa3)][_0x162d31];if(_0x42dc98)return this[_0x280761(0xc2)][_0x280761(0xb7)](this[_0x280761(0xc2)]['tail'],_0x42dc98),_0x42dc98['item'];let _0x29cc86=this[_0x280761(0x9a)][_0x162d31];return!Cesium[_0x280761(0xbe)](_0x29cc86)&&(_0x29cc86=this[_0x280761(0x9a)][_0x162d31]=_State[_0x280761(0xb0)]),_0x29cc86===_State[_0x280761(0xb0)]&&this['prepareRequest'](_0x42cc53,_0x258a4b,_0x53188e,_0x551a8c[_0x280761(0x8e)],_0x551a8c),undefined;},SubTextureManager[_0x1e0c25(0xab)]['del']=function(_0x2f029e,_0x20a11c){const _0x22ef30=_0x1e0c25;let _0x58969e=_0x2f029e+'_'+_0x20a11c;delete this[_0x22ef30(0x9a)][_0x58969e];},SubTextureManager[_0x1e0c25(0xaf)]=undefined,SubTextureManager[_0x1e0c25(0xae)]=function(){const _0x5c1133=_0x1e0c25;return!SubTextureManager[_0x5c1133(0xaf)]&&(SubTextureManager['_singleInstance']=new SubTextureManager()),SubTextureManager['_singleInstance'];};export default SubTextureManager;