const _0x8b8d=['uniformMap','19wWsjmD','105018SSQIIJ','defaultTexture','minFresnel','instanceCount','destroy','waterBrightness','clone','context','vertexArray','isDestroyed','TRANSLUCENT','vertexPackage','DrawCommand','batchTableDirty','modelMatrix','destroyObject','update','scale','indexBufferToCreate','prototype','createCommand','scroll','10160REtApe','drawingBufferHeight','VertexArray','drawingBufferWidth','Pass','fromCache','primitiveType','length','_clipMode','20RwzUuQ','getUniformMapCallback','Cartesian4','RenderState','initLayerSetting','layer','noiseScale','arrIndexPackage','boundingVolume','34691FhYvNF','13627aUCEGa','tintColour','DepthFunction','vertexAttributes','waterColour','pickInfo','push','sceneFramebuffer','fillForeColor','colorCommand','maxFresnel','9924qtagfF','commandList','7cccVcl','camera','waterIndex','shaderProgram','_clipPlane','BoundingSphere','geoMatrix','vertexBufferToCreate','createBatchTable','LESS_OR_EQUAL','material','140946VqnIkg','shaderProgramToCreate','ready','244150UftCiz','createBuffers','addWaterPlane','create','bumpSpeed','25fAZvBO','createShaderProgram','timeVal','noise','2syFJxl','averageHeight','style3D','removeWaterPlane','batchTable','fresnelPower','_swipeRegion','updateBatchTableAttributes','_waterParameters','call','selectionInfoMap','waterTime','1UqhjNw'];const _0xe289cf=_0x2358;(function(_0x29b275,_0x33a71d){const _0x4f7014=_0x2358;while(!![]){try{const _0x4296e5=-parseInt(_0x4f7014(0x14b))+parseInt(_0x4f7014(0x11d))*-parseInt(_0x4f7014(0x126))+-parseInt(_0x4f7014(0x130))*-parseInt(_0x4f7014(0x13d))+parseInt(_0x4f7014(0x107))*parseInt(_0x4f7014(0xf8))+parseInt(_0x4f7014(0x13b))*-parseInt(_0x4f7014(0xf4))+-parseInt(_0x4f7014(0x104))*parseInt(_0x4f7014(0x148))+parseInt(_0x4f7014(0x106))*parseInt(_0x4f7014(0x12f));if(_0x4296e5===_0x33a71d)break;else _0x29b275['push'](_0x29b275['shift']());}catch(_0x47650b){_0x29b275['push'](_0x29b275['shift']());}}}(_0x8b8d,0x1f49e));import _0x4714dd from'../Shaders/FresnelVp.js';import _0x2db5fa from'../Shaders/FresnelFp.js';import _0x5f13cc from'./RenderEntity.js';function _0x2358(_0xe54240,_0x338b00){_0xe54240=_0xe54240-0xf3;let _0x8b8df0=_0x8b8d[_0xe54240];return _0x8b8df0;}function S3MWaterRenderEntity(_0xddc7ca){const _0xe6a44a=_0x2358;_0x5f13cc[_0xe6a44a(0x101)](this,_0xddc7ca),this['vs']=_0x4714dd,this['fs']=_0x2db5fa,this[_0xe6a44a(0x13f)]=-0x1,this['waterTime']=0x0;}S3MWaterRenderEntity[_0xe289cf(0x11a)]=Object[_0xe289cf(0x14e)](_0x5f13cc['prototype']),S3MWaterRenderEntity['prototype']['constructor']=_0x5f13cc;function getOpaqueRenderState(){const _0x394c7c=_0xe289cf;return Cesium[_0x394c7c(0x129)][_0x394c7c(0x122)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium[_0x394c7c(0x132)][_0x394c7c(0x146)]},'blending':Cesium['BlendingState']['ALPHA_BLEND']});}let swipRegionScratch=new Cesium[(_0xe289cf(0x128))]();function getUniformMap(_0x5e0d85,_0x40605d,_0x3114e6){return{'uGeoMatrix':function(){const _0x5b05af=_0x2358;return _0x3114e6[_0x5b05af(0x143)];},'uFillForeColor':function(){const _0x1c8bcb=_0x2358;return _0x40605d[_0x1c8bcb(0xfa)][_0x1c8bcb(0x138)];},'uSelectedColor':function(){return _0x40605d['selectedColor'];},'uClipMode':function(){const _0x3e8d86=_0x2358;return _0x40605d[_0x3e8d86(0x125)];},'uClipPlanes':function(){const _0x33e910=_0x2358;return _0x40605d[_0x33e910(0x141)];},'uSwipeRegion':function(){const _0x2788ad=_0x2358,_0x32d55d=_0x40605d[_0x2788ad(0x10e)];return swipRegionScratch['x']=_0x40605d[_0x2788ad(0xfe)]['x']*_0x32d55d[_0x2788ad(0x120)],swipRegionScratch['y']=(0x1-_0x40605d['_swipeRegion']['y'])*_0x32d55d['drawingBufferHeight'],swipRegionScratch['z']=_0x40605d[_0x2788ad(0xfe)]['z']*_0x32d55d[_0x2788ad(0x120)],swipRegionScratch['w']=(0x1-_0x40605d[_0x2788ad(0xfe)]['w'])*_0x32d55d[_0x2788ad(0x11e)],swipRegionScratch;},'uReflectMap':function(){const _0x9f0b75=_0x2358;let _0x5c3f15=_0x40605d[_0x9f0b75(0x10e)]['reflectFramebuffer'][_0x9f0b75(0x137)]['getFramebuffer']();if(!_0x5c3f15)return _0x40605d['context'][_0x9f0b75(0x108)];return _0x5c3f15['getColorTexture'](0x0);},'uNoiseMap':function(){const _0x5cc982=_0x2358;return _0x40605d[_0x5cc982(0x10e)][_0x5cc982(0x108)];},'uTimeVal':function(){const _0x513925=_0x2358;let _0x237975=_0x40605d[_0x513925(0x100)][_0x513925(0xf6)]*0.01;return _0x3114e6[_0x513925(0x103)]=_0x3114e6[_0x513925(0x103)]>0x1?_0x237975:_0x3114e6[_0x513925(0x103)]+_0x237975,_0x3114e6[_0x513925(0x103)];},'uScale':function(){const _0x51837b=_0x2358;return _0x40605d[_0x51837b(0x100)][_0x51837b(0x118)];},'uScroll':function(){const _0x284a46=_0x2358;return _0x40605d['_waterParameters'][_0x284a46(0x11c)];},'uNoise':function(){const _0x1a4058=_0x2358;return _0x40605d[_0x1a4058(0x100)][_0x1a4058(0xf7)];},'uBumpSpeed':function(){const _0x28cbdc=_0x2358;return _0x40605d['_waterParameters'][_0x28cbdc(0xf3)];},'uFresnelPower':function(){const _0x57384b=_0x2358;return _0x40605d[_0x57384b(0x100)][_0x57384b(0xfd)];},'uMinFresnel':function(){const _0x42492c=_0x2358;return _0x40605d['_waterParameters'][_0x42492c(0x109)];},'uMaxFresnel':function(){const _0x481378=_0x2358;return _0x40605d['_waterParameters'][_0x481378(0x13a)];},'uTintColour':function(){const _0x3385bf=_0x2358;return _0x40605d[_0x3385bf(0x100)][_0x3385bf(0x131)];},'uNoiseScale':function(){const _0x56c229=_0x2358;return _0x40605d[_0x56c229(0x100)][_0x56c229(0x12c)];},'uWaterColour':function(){const _0x1c9d49=_0x2358;return _0x40605d[_0x1c9d49(0x100)][_0x1c9d49(0x134)];},'uWaterBrightness':function(){const _0x58fbd0=_0x2358;return _0x40605d[_0x58fbd0(0x100)][_0x58fbd0(0x10c)];}};}S3MWaterRenderEntity[_0xe289cf(0x11a)][_0xe289cf(0x11b)]=function(){const _0x108ef7=_0xe289cf;if(Cesium['defined'](this['colorCommand'])||this[_0x108ef7(0x144)][_0x108ef7(0x124)]!==0x0||this[_0x108ef7(0x119)]['length']!==0x0||this[_0x108ef7(0x149)]['length']!==0x0)return;let _0x37948f=this[_0x108ef7(0x12b)],_0x103180=_0x37948f[_0x108ef7(0x10e)],_0x443839=this['vertexPackage'],_0x2fea5d=this[_0x108ef7(0x12d)],_0xdd2819=_0x443839[_0x108ef7(0x133)];if(_0x2fea5d['length']<0x1)return;let _0x5b9dff=_0x2fea5d[0x0],_0x44fe79=this[_0x108ef7(0x147)];this[_0x108ef7(0x10f)]=new Cesium[(_0x108ef7(0x11f))]({'context':_0x103180,'attributes':_0xdd2819,'indexBuffer':_0x5b9dff['indexBuffer']}),this[_0x108ef7(0x139)]=new Cesium[(_0x108ef7(0x113))]({'primitiveType':_0x5b9dff[_0x108ef7(0x123)],'modelMatrix':this[_0x108ef7(0x115)],'boundingVolume':Cesium[_0x108ef7(0x142)][_0x108ef7(0x10d)](this[_0x108ef7(0x12e)]),'vertexArray':this[_0x108ef7(0x10f)],'shaderProgram':this['shaderProgram'],'pass':_0x44fe79['bTransparentSorting']?Cesium[_0x108ef7(0x121)][_0x108ef7(0x111)]:Cesium['Pass']['OPAQUE'],'renderState':_0x44fe79['bTransparentSorting']?getTransparentRenderState():getOpaqueRenderState(),'instanceCount':_0x443839[_0x108ef7(0x10a)]});let _0x5256a1=getUniformMap(_0x44fe79,_0x37948f,this);this[_0x108ef7(0x139)][_0x108ef7(0x105)]=this['batchTable'][_0x108ef7(0x127)]()(_0x5256a1),this[_0x108ef7(0x112)]=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this[_0x108ef7(0x14a)]=!![];};function addWaterPlane(_0x5291a1,_0x10fe94){const _0x5185a2=_0xe289cf;let _0x5958b6={'boundingVolume':_0x5291a1[_0x5185a2(0x12e)],'distance':_0x10fe94['style3D']['bottomAltitude']+_0x10fe94[_0x5185a2(0x100)][_0x5185a2(0xf9)]};_0x5291a1[_0x5185a2(0x13f)]=_0x10fe94[_0x5185a2(0x14d)](_0x5958b6);}S3MWaterRenderEntity[_0xe289cf(0x11a)][_0xe289cf(0x117)]=function(_0x542819,_0x42b773){const _0x66f108=_0xe289cf;if(_0x542819[_0x66f108(0x13e)]['bReflect'])return;if(!this[_0x66f108(0x14a)]){this[_0x66f108(0x145)](_0x542819),this['createPickIds'](),this[_0x66f108(0x14c)](_0x542819),this[_0x66f108(0xf5)](_0x542819),this[_0x66f108(0x11b)](_0x542819),this[_0x66f108(0x12a)](_0x42b773),addWaterPlane(this,_0x42b773);return;}this[_0x66f108(0x114)]&&(this[_0x66f108(0xff)](),this[_0x66f108(0x114)]=![]),this[_0x66f108(0xfc)][_0x66f108(0x117)](_0x542819),_0x542819[_0x66f108(0x13c)][_0x66f108(0x136)](this['colorCommand']);},S3MWaterRenderEntity['prototype']['isDestroyed']=function(){return![];},S3MWaterRenderEntity[_0xe289cf(0x11a)][_0xe289cf(0x10b)]=function(){const _0x279446=_0xe289cf;return this[_0x279446(0x140)]=this[_0x279446(0x140)]&&!this['shaderProgram']['isDestroyed']()&&this[_0x279446(0x140)][_0x279446(0x10b)](),this['vertexArray']=this[_0x279446(0x10f)]&&!this[_0x279446(0x10f)]['isDestroyed']()&&this[_0x279446(0x10f)][_0x279446(0x10b)](),this['material']=this[_0x279446(0x147)]&&!this[_0x279446(0x147)][_0x279446(0x110)]()&&this[_0x279446(0x147)][_0x279446(0x10b)](),this[_0x279446(0xfc)]=this[_0x279446(0xfc)]&&!this[_0x279446(0xfc)][_0x279446(0x110)]()&&this['batchTable'][_0x279446(0x10b)](),this[_0x279446(0x13f)]>-0x1&&this[_0x279446(0x12b)][_0x279446(0xfb)](this[_0x279446(0x13f)]),this['colorCommand']=undefined,this[_0x279446(0x112)]=null,this[_0x279446(0x12d)]=null,this['modelMatrix']=undefined,this[_0x279446(0x135)]=undefined,this[_0x279446(0x102)]=undefined,this['vs']=undefined,this['fs']=undefined,Cesium[_0x279446(0x116)](this);};export default S3MWaterRenderEntity;