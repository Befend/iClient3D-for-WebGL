const _0x5749=['createBuffers','isDestroyed','getFramebuffer','_waterParameters','destroyObject','Pass','minFresnel','update','uniformMap','4207JBvQug','waterTime','177995iSxtfY','destroy','indexBufferToCreate','bumpSpeed','fresnelPower','drawingBufferWidth','VertexArray','context','modelMatrix','noise','_swipeRegion','shaderProgramToCreate','constructor','waterBrightness','arrIndexPackage','_clipMode','bReflect','ready','1kZHUwo','style3D','create','noiseScale','61HaprFt','createBatchTable','layer','batchTableDirty','BlendingState','1rclRmi','colorCommand','defined','_clipPlane','sceneFramebuffer','geoMatrix','vertexArray','tintColour','LESS_OR_EQUAL','removeWaterPlane','837398NypHhQ','Cartesian4','vertexBufferToCreate','material','averageHeight','drawingBufferHeight','length','shaderProgram','getColorTexture','defaultTexture','bTransparentSorting','primitiveType','indexBuffer','initLayerSetting','push','TRANSLUCENT','612307AKgrUZ','boundingVolume','ALPHA_BLEND','waterIndex','instanceCount','reflectFramebuffer','maxFresnel','prototype','DepthFunction','getUniformMapCallback','commandList','batchTable','vertexAttributes','createCommand','vertexPackage','469087PlGFQK','createShaderProgram','scale','updateBatchTableAttributes','camera','452047JVKPQC','843074UopzIq','DrawCommand'];const _0x3de67e=_0x3b0a;(function(_0x3bd81b,_0x46f21f){const _0x42813d=_0x3b0a;while(!![]){try{const _0x5f0bd2=parseInt(_0x42813d(0x1df))+parseInt(_0x42813d(0x1ca))+-parseInt(_0x42813d(0x202))*parseInt(_0x42813d(0x1ea))+-parseInt(_0x42813d(0x1ec))*-parseInt(_0x42813d(0x1fe))+parseInt(_0x42813d(0x207))*-parseInt(_0x42813d(0x1d9))+-parseInt(_0x42813d(0x1ba))+parseInt(_0x42813d(0x1de));if(_0x5f0bd2===_0x46f21f)break;else _0x3bd81b['push'](_0x3bd81b['shift']());}catch(_0x277613){_0x3bd81b['push'](_0x3bd81b['shift']());}}}(_0x5749,0x7f847));import _0x41efbc from'../Shaders/FresnelVp.js';import _0x331bd4 from'../Shaders/FresnelFp.js';import _0x178727 from'./RenderEntity.js';function S3MWaterRenderEntity(_0x5546ee){const _0x4942d4=_0x3b0a;_0x178727['call'](this,_0x5546ee),this['vs']=_0x41efbc,this['fs']=_0x331bd4,this[_0x4942d4(0x1cd)]=-0x1,this[_0x4942d4(0x1eb)]=0x0;}S3MWaterRenderEntity[_0x3de67e(0x1d1)]=Object[_0x3de67e(0x200)](_0x178727['prototype']),S3MWaterRenderEntity['prototype'][_0x3de67e(0x1f8)]=_0x178727;function getOpaqueRenderState(){const _0x25cbbb=_0x3de67e;return Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium[_0x25cbbb(0x1d2)][_0x25cbbb(0x1b8)]},'blending':Cesium[_0x25cbbb(0x206)][_0x25cbbb(0x1cc)]});}let swipRegionScratch=new Cesium[(_0x3de67e(0x1bb))]();function getUniformMap(_0x466d74,_0x4857c5,_0xb22741){return{'uGeoMatrix':function(){const _0x50a7d2=_0x3b0a;return _0xb22741[_0x50a7d2(0x1b5)];},'uFillForeColor':function(){return _0x4857c5['style3D']['fillForeColor'];},'uSelectedColor':function(){return _0x4857c5['selectedColor'];},'uClipMode':function(){const _0x249724=_0x3b0a;return _0x4857c5[_0x249724(0x1fb)];},'uClipPlanes':function(){const _0x5c2a3f=_0x3b0a;return _0x4857c5[_0x5c2a3f(0x20a)];},'uSwipeRegion':function(){const _0x2b1461=_0x3b0a,_0x5741ea=_0x4857c5['context'];return swipRegionScratch['x']=_0x4857c5[_0x2b1461(0x1f6)]['x']*_0x5741ea[_0x2b1461(0x1f1)],swipRegionScratch['y']=(0x1-_0x4857c5[_0x2b1461(0x1f6)]['y'])*_0x5741ea[_0x2b1461(0x1bf)],swipRegionScratch['z']=_0x4857c5[_0x2b1461(0x1f6)]['z']*_0x5741ea['drawingBufferWidth'],swipRegionScratch['w']=(0x1-_0x4857c5[_0x2b1461(0x1f6)]['w'])*_0x5741ea['drawingBufferHeight'],swipRegionScratch;},'uReflectMap':function(){const _0x499b52=_0x3b0a;let _0x41f64f=_0x4857c5['context'][_0x499b52(0x1cf)][_0x499b52(0x20b)][_0x499b52(0x1e3)]();if(!_0x41f64f)return _0x4857c5[_0x499b52(0x1f3)][_0x499b52(0x1c3)];return _0x41f64f[_0x499b52(0x1c2)](0x0);},'uNoiseMap':function(){const _0x4512d6=_0x3b0a;return _0x4857c5['context'][_0x4512d6(0x1c3)];},'uTimeVal':function(){const _0x17288f=_0x3b0a;let _0x795083=_0x4857c5[_0x17288f(0x1e4)]['timeVal']*0.01;return _0xb22741[_0x17288f(0x1eb)]=_0xb22741['waterTime']>0x1?_0x795083:_0xb22741[_0x17288f(0x1eb)]+_0x795083,_0xb22741[_0x17288f(0x1eb)];},'uScale':function(){const _0x529fff=_0x3b0a;return _0x4857c5[_0x529fff(0x1e4)][_0x529fff(0x1db)];},'uScroll':function(){const _0x59b914=_0x3b0a;return _0x4857c5[_0x59b914(0x1e4)]['scroll'];},'uNoise':function(){const _0x2a1c8e=_0x3b0a;return _0x4857c5[_0x2a1c8e(0x1e4)][_0x2a1c8e(0x1f5)];},'uBumpSpeed':function(){const _0x26c797=_0x3b0a;return _0x4857c5[_0x26c797(0x1e4)][_0x26c797(0x1ef)];},'uFresnelPower':function(){const _0x1109fd=_0x3b0a;return _0x4857c5['_waterParameters'][_0x1109fd(0x1f0)];},'uMinFresnel':function(){const _0x8428e2=_0x3b0a;return _0x4857c5['_waterParameters'][_0x8428e2(0x1e7)];},'uMaxFresnel':function(){const _0x596596=_0x3b0a;return _0x4857c5[_0x596596(0x1e4)][_0x596596(0x1d0)];},'uTintColour':function(){const _0x434108=_0x3b0a;return _0x4857c5[_0x434108(0x1e4)][_0x434108(0x1b7)];},'uNoiseScale':function(){const _0x53b3e3=_0x3b0a;return _0x4857c5[_0x53b3e3(0x1e4)][_0x53b3e3(0x201)];},'uWaterColour':function(){const _0x9c7462=_0x3b0a;return _0x4857c5[_0x9c7462(0x1e4)]['waterColour'];},'uWaterBrightness':function(){const _0x3cdff7=_0x3b0a;return _0x4857c5[_0x3cdff7(0x1e4)][_0x3cdff7(0x1f9)];}};}function _0x3b0a(_0x3543c6,_0x4e5808){_0x3543c6=_0x3543c6-0x1b5;let _0x5749a0=_0x5749[_0x3543c6];return _0x5749a0;}S3MWaterRenderEntity[_0x3de67e(0x1d1)][_0x3de67e(0x1d7)]=function(){const _0x2eef2d=_0x3de67e;if(Cesium[_0x2eef2d(0x209)](this['colorCommand'])||this[_0x2eef2d(0x1bc)]['length']!==0x0||this[_0x2eef2d(0x1ee)][_0x2eef2d(0x1c0)]!==0x0||this[_0x2eef2d(0x1f7)][_0x2eef2d(0x1c0)]!==0x0)return;let _0x455bcd=this['layer'],_0x6dfda1=_0x455bcd['context'],_0x5070e5=this[_0x2eef2d(0x1d8)],_0x54a79a=this[_0x2eef2d(0x1fa)],_0x5dbeb2=_0x5070e5[_0x2eef2d(0x1d6)];if(_0x54a79a[_0x2eef2d(0x1c0)]<0x1)return;let _0x20e352=_0x54a79a[0x0],_0x58d173=this[_0x2eef2d(0x1bd)];this[_0x2eef2d(0x1b6)]=new Cesium[(_0x2eef2d(0x1f2))]({'context':_0x6dfda1,'attributes':_0x5dbeb2,'indexBuffer':_0x20e352[_0x2eef2d(0x1c6)]}),this[_0x2eef2d(0x208)]=new Cesium[(_0x2eef2d(0x1e0))]({'primitiveType':_0x20e352[_0x2eef2d(0x1c5)],'modelMatrix':this[_0x2eef2d(0x1f4)],'boundingVolume':Cesium['BoundingSphere']['clone'](this[_0x2eef2d(0x1cb)]),'vertexArray':this['vertexArray'],'shaderProgram':this[_0x2eef2d(0x1c1)],'pass':_0x58d173[_0x2eef2d(0x1c4)]?Cesium[_0x2eef2d(0x1e6)][_0x2eef2d(0x1c9)]:Cesium[_0x2eef2d(0x1e6)]['OPAQUE'],'renderState':_0x58d173[_0x2eef2d(0x1c4)]?getTransparentRenderState():getOpaqueRenderState(),'instanceCount':_0x5070e5[_0x2eef2d(0x1ce)]});let _0x379010=getUniformMap(_0x58d173,_0x455bcd,this);this['colorCommand'][_0x2eef2d(0x1e9)]=this[_0x2eef2d(0x1d5)][_0x2eef2d(0x1d3)]()(_0x379010),this[_0x2eef2d(0x1d8)]=undefined,this['arrIndexPackage']=undefined,this['vs']=undefined,this['fs']=undefined,this[_0x2eef2d(0x1fd)]=!![];};function addWaterPlane(_0x14fa8f,_0x475630){const _0x25e2af=_0x3de67e;let _0xf9d60f={'boundingVolume':_0x14fa8f[_0x25e2af(0x1cb)],'distance':_0x475630[_0x25e2af(0x1ff)]['bottomAltitude']+_0x475630['_waterParameters'][_0x25e2af(0x1be)]};_0x14fa8f[_0x25e2af(0x1cd)]=_0x475630['addWaterPlane'](_0xf9d60f);}S3MWaterRenderEntity[_0x3de67e(0x1d1)][_0x3de67e(0x1e8)]=function(_0x107293,_0x7b199){const _0x5ab14d=_0x3de67e;if(_0x107293[_0x5ab14d(0x1dd)][_0x5ab14d(0x1fc)])return;if(!this[_0x5ab14d(0x1fd)]){this[_0x5ab14d(0x203)](_0x107293),this['createPickIds'](),this[_0x5ab14d(0x1e1)](_0x107293),this[_0x5ab14d(0x1da)](_0x107293),this[_0x5ab14d(0x1d7)](_0x107293),this[_0x5ab14d(0x1c7)](_0x7b199),addWaterPlane(this,_0x7b199);return;}this[_0x5ab14d(0x205)]&&(this[_0x5ab14d(0x1dc)](),this[_0x5ab14d(0x205)]=![]),this[_0x5ab14d(0x1d5)]['update'](_0x107293),_0x107293[_0x5ab14d(0x1d4)][_0x5ab14d(0x1c8)](this[_0x5ab14d(0x208)]);},S3MWaterRenderEntity[_0x3de67e(0x1d1)][_0x3de67e(0x1e2)]=function(){return![];},S3MWaterRenderEntity[_0x3de67e(0x1d1)][_0x3de67e(0x1ed)]=function(){const _0xa17b14=_0x3de67e;return this[_0xa17b14(0x1c1)]=this['shaderProgram']&&!this[_0xa17b14(0x1c1)][_0xa17b14(0x1e2)]()&&this['shaderProgram'][_0xa17b14(0x1ed)](),this[_0xa17b14(0x1b6)]=this[_0xa17b14(0x1b6)]&&!this[_0xa17b14(0x1b6)][_0xa17b14(0x1e2)]()&&this[_0xa17b14(0x1b6)]['destroy'](),this[_0xa17b14(0x1bd)]=this[_0xa17b14(0x1bd)]&&!this[_0xa17b14(0x1bd)][_0xa17b14(0x1e2)]()&&this['material'][_0xa17b14(0x1ed)](),this[_0xa17b14(0x1d5)]=this[_0xa17b14(0x1d5)]&&!this[_0xa17b14(0x1d5)]['isDestroyed']()&&this[_0xa17b14(0x1d5)][_0xa17b14(0x1ed)](),this[_0xa17b14(0x1cd)]>-0x1&&this[_0xa17b14(0x204)][_0xa17b14(0x1b9)](this['waterIndex']),this[_0xa17b14(0x208)]=undefined,this['vertexPackage']=null,this[_0xa17b14(0x1fa)]=null,this[_0xa17b14(0x1f4)]=undefined,this['pickInfo']=undefined,this['selectionInfoMap']=undefined,this['vs']=undefined,this['fs']=undefined,Cesium[_0xa17b14(0x1e5)](this);};export default S3MWaterRenderEntity;