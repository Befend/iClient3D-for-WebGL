const _0x2d82=['uniformMap','scale','getFramebuffer','waterColour','fresnelPower','selectionInfoMap','arrIndexPackage','vertexBufferToCreate','shaderProgramToCreate','noise','instanceCount','vertexArray','52842XzEsUm','DrawCommand','25514VPjbbS','bTransparentSorting','destroy','create','minFresnel','defined','commandList','ready','_waterParameters','call','_swipeRegion','context','1GzZyoc','BoundingSphere','createBuffers','vertexPackage','Pass','clone','prototype','destroyObject','scroll','Cartesian4','indexBuffer','updateBatchTableAttributes','bottomAltitude','37DknXJB','131243HhFxNr','196897ajOxOG','_clipMode','OPAQUE','6025QDTGCd','RenderState','update','1iqKDjg','createCommand','36326ahZvZH','ALPHA_BLEND','length','geoMatrix','createBatchTable','layer','batchTable','vertexAttributes','material','fromCache','drawingBufferHeight','waterIndex','sceneFramebuffer','style3D','shaderProgram','maxFresnel','indexBufferToCreate','drawingBufferWidth','TRANSLUCENT','boundingVolume','DepthFunction','initLayerSetting','modelMatrix','reflectFramebuffer','getColorTexture','colorCommand','244226GYfIAC','waterBrightness','averageHeight','noiseScale','BlendingState','waterTime','removeWaterPlane','_clipPlane','primitiveType'];const _0x3fd14a=_0x3d07;(function(_0x49a2d8,_0x5ac3cd){const _0x29cf63=_0x3d07;while(!![]){try{const _0x3f1176=-parseInt(_0x29cf63(0x104))+-parseInt(_0x29cf63(0x103))+-parseInt(_0x29cf63(0x107))*-parseInt(_0x29cf63(0x102))+-parseInt(_0x29cf63(0xe9))+-parseInt(_0x29cf63(0x10a))*parseInt(_0x29cf63(0x10c))+parseInt(_0x29cf63(0xe7))+parseInt(_0x29cf63(0x126))*parseInt(_0x29cf63(0xf5));if(_0x3f1176===_0x5ac3cd)break;else _0x49a2d8['push'](_0x49a2d8['shift']());}catch(_0x183d50){_0x49a2d8['push'](_0x49a2d8['shift']());}}}(_0x2d82,0x1fbdd));import _0x304c50 from'../Shaders/FresnelVp.js';import _0x57c774 from'../Shaders/FresnelFp.js';import _0x1d00bc from'./RenderEntity.js';function S3MWaterRenderEntity(_0xca810b){const _0x24df46=_0x3d07;_0x1d00bc[_0x24df46(0xf2)](this,_0xca810b),this['vs']=_0x304c50,this['fs']=_0x57c774,this['waterIndex']=-0x1,this[_0x24df46(0xd7)]=0x0;}S3MWaterRenderEntity[_0x3fd14a(0xfb)]=Object[_0x3fd14a(0xec)](_0x1d00bc[_0x3fd14a(0xfb)]),S3MWaterRenderEntity['prototype']['constructor']=_0x1d00bc;function getOpaqueRenderState(){const _0x556ab3=_0x3fd14a;return Cesium[_0x556ab3(0x108)][_0x556ab3(0x115)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![],'func':Cesium[_0x556ab3(0x120)]['LESS_OR_EQUAL']},'blending':Cesium[_0x556ab3(0xd6)][_0x556ab3(0x10d)]});}let swipRegionScratch=new Cesium[(_0x3fd14a(0xfe))]();function _0x3d07(_0x4a7396,_0x4d12a5){_0x4a7396=_0x4a7396-0xd6;let _0x2d8226=_0x2d82[_0x4a7396];return _0x2d8226;}function getUniformMap(_0x3f6688,_0x565cfc,_0x2242b2){return{'uGeoMatrix':function(){const _0x35f5ad=_0x3d07;return _0x2242b2[_0x35f5ad(0x10f)];},'uFillForeColor':function(){const _0x3651b0=_0x3d07;return _0x565cfc[_0x3651b0(0x119)]['fillForeColor'];},'uSelectedColor':function(){return _0x565cfc['selectedColor'];},'uClipMode':function(){const _0x335b69=_0x3d07;return _0x565cfc[_0x335b69(0x105)];},'uClipPlanes':function(){const _0x3657a3=_0x3d07;return _0x565cfc[_0x3657a3(0xd9)];},'uSwipeRegion':function(){const _0x404240=_0x3d07,_0x3a1537=_0x565cfc[_0x404240(0xf4)];return swipRegionScratch['x']=_0x565cfc[_0x404240(0xf3)]['x']*_0x3a1537[_0x404240(0x11d)],swipRegionScratch['y']=(0x1-_0x565cfc[_0x404240(0xf3)]['y'])*_0x3a1537[_0x404240(0x116)],swipRegionScratch['z']=_0x565cfc[_0x404240(0xf3)]['z']*_0x3a1537[_0x404240(0x11d)],swipRegionScratch['w']=(0x1-_0x565cfc[_0x404240(0xf3)]['w'])*_0x3a1537[_0x404240(0x116)],swipRegionScratch;},'uReflectMap':function(){const _0xa9881=_0x3d07;let _0xb56258=_0x565cfc['context'][_0xa9881(0x123)][_0xa9881(0x118)][_0xa9881(0xdd)]();if(!_0xb56258)return _0x565cfc[_0xa9881(0xf4)]['defaultTexture'];return _0xb56258[_0xa9881(0x124)](0x0);},'uNoiseMap':function(){const _0x5c2645=_0x3d07;return _0x565cfc[_0x5c2645(0xf4)]['defaultTexture'];},'uTimeVal':function(){const _0x459ee8=_0x3d07;let _0x477225=_0x565cfc[_0x459ee8(0xf1)]['timeVal']*0.01;return _0x2242b2[_0x459ee8(0xd7)]=_0x2242b2[_0x459ee8(0xd7)]>0x1?_0x477225:_0x2242b2[_0x459ee8(0xd7)]+_0x477225,_0x2242b2['waterTime'];},'uScale':function(){const _0x422f15=_0x3d07;return _0x565cfc[_0x422f15(0xf1)][_0x422f15(0xdc)];},'uScroll':function(){const _0x4397bb=_0x3d07;return _0x565cfc[_0x4397bb(0xf1)][_0x4397bb(0xfd)];},'uNoise':function(){const _0x3e92f8=_0x3d07;return _0x565cfc['_waterParameters'][_0x3e92f8(0xe4)];},'uBumpSpeed':function(){return _0x565cfc['_waterParameters']['bumpSpeed'];},'uFresnelPower':function(){const _0x88b1f7=_0x3d07;return _0x565cfc['_waterParameters'][_0x88b1f7(0xdf)];},'uMinFresnel':function(){const _0x557c8a=_0x3d07;return _0x565cfc[_0x557c8a(0xf1)][_0x557c8a(0xed)];},'uMaxFresnel':function(){const _0x23fdba=_0x3d07;return _0x565cfc['_waterParameters'][_0x23fdba(0x11b)];},'uTintColour':function(){const _0x451a77=_0x3d07;return _0x565cfc[_0x451a77(0xf1)]['tintColour'];},'uNoiseScale':function(){const _0x4d0e5e=_0x3d07;return _0x565cfc[_0x4d0e5e(0xf1)][_0x4d0e5e(0x129)];},'uWaterColour':function(){const _0xa0df8e=_0x3d07;return _0x565cfc[_0xa0df8e(0xf1)][_0xa0df8e(0xde)];},'uWaterBrightness':function(){const _0x141bb8=_0x3d07;return _0x565cfc[_0x141bb8(0xf1)][_0x141bb8(0x127)];}};}S3MWaterRenderEntity['prototype'][_0x3fd14a(0x10b)]=function(){const _0x2a9714=_0x3fd14a;if(Cesium[_0x2a9714(0xee)](this[_0x2a9714(0x125)])||this[_0x2a9714(0xe2)][_0x2a9714(0x10e)]!==0x0||this[_0x2a9714(0x11c)][_0x2a9714(0x10e)]!==0x0||this[_0x2a9714(0xe3)]['length']!==0x0)return;let _0x43fb75=this[_0x2a9714(0x111)],_0xf52c40=_0x43fb75[_0x2a9714(0xf4)],_0x513fa2=this[_0x2a9714(0xf8)],_0xfbd5e1=this['arrIndexPackage'],_0x4470f2=_0x513fa2[_0x2a9714(0x113)];if(_0xfbd5e1[_0x2a9714(0x10e)]<0x1)return;let _0x55bef2=_0xfbd5e1[0x0],_0x48a79d=this[_0x2a9714(0x114)];this['vertexArray']=new Cesium['VertexArray']({'context':_0xf52c40,'attributes':_0x4470f2,'indexBuffer':_0x55bef2[_0x2a9714(0xff)]}),this[_0x2a9714(0x125)]=new Cesium[(_0x2a9714(0xe8))]({'primitiveType':_0x55bef2[_0x2a9714(0xda)],'modelMatrix':this['modelMatrix'],'boundingVolume':Cesium[_0x2a9714(0xf6)][_0x2a9714(0xfa)](this[_0x2a9714(0x11f)]),'vertexArray':this['vertexArray'],'shaderProgram':this['shaderProgram'],'pass':_0x48a79d[_0x2a9714(0xea)]?Cesium[_0x2a9714(0xf9)][_0x2a9714(0x11e)]:Cesium['Pass'][_0x2a9714(0x106)],'renderState':_0x48a79d[_0x2a9714(0xea)]?getTransparentRenderState():getOpaqueRenderState(),'instanceCount':_0x513fa2[_0x2a9714(0xe5)]});let _0x40e10a=getUniformMap(_0x48a79d,_0x43fb75,this);this[_0x2a9714(0x125)][_0x2a9714(0xdb)]=this[_0x2a9714(0x112)]['getUniformMapCallback']()(_0x40e10a),this[_0x2a9714(0xf8)]=undefined,this[_0x2a9714(0xe1)]=undefined,this['vs']=undefined,this['fs']=undefined,this[_0x2a9714(0xf0)]=!![];};function addWaterPlane(_0xc730ed,_0xcbf856){const _0x404e31=_0x3fd14a;let _0x2831f5={'boundingVolume':_0xc730ed[_0x404e31(0x11f)],'distance':_0xcbf856[_0x404e31(0x119)][_0x404e31(0x101)]+_0xcbf856['_waterParameters'][_0x404e31(0x128)]};_0xc730ed[_0x404e31(0x117)]=_0xcbf856['addWaterPlane'](_0x2831f5);}S3MWaterRenderEntity[_0x3fd14a(0xfb)][_0x3fd14a(0x109)]=function(_0x3e58e6,_0x1e7e03){const _0x5f3059=_0x3fd14a;if(_0x3e58e6['camera']['bReflect'])return;if(!this[_0x5f3059(0xf0)]){this[_0x5f3059(0x110)](_0x3e58e6),this['createPickIds'](),this[_0x5f3059(0xf7)](_0x3e58e6),this['createShaderProgram'](_0x3e58e6),this[_0x5f3059(0x10b)](_0x3e58e6),this[_0x5f3059(0x121)](_0x1e7e03),addWaterPlane(this,_0x1e7e03);return;}this['batchTableDirty']&&(this[_0x5f3059(0x100)](),this['batchTableDirty']=![]),this['batchTable']['update'](_0x3e58e6),_0x3e58e6[_0x5f3059(0xef)]['push'](this[_0x5f3059(0x125)]);},S3MWaterRenderEntity[_0x3fd14a(0xfb)]['isDestroyed']=function(){return![];},S3MWaterRenderEntity['prototype'][_0x3fd14a(0xeb)]=function(){const _0x40c65e=_0x3fd14a;return this[_0x40c65e(0x11a)]=this[_0x40c65e(0x11a)]&&!this[_0x40c65e(0x11a)]['isDestroyed']()&&this[_0x40c65e(0x11a)][_0x40c65e(0xeb)](),this[_0x40c65e(0xe6)]=this[_0x40c65e(0xe6)]&&!this[_0x40c65e(0xe6)]['isDestroyed']()&&this[_0x40c65e(0xe6)][_0x40c65e(0xeb)](),this[_0x40c65e(0x114)]=this[_0x40c65e(0x114)]&&!this[_0x40c65e(0x114)]['isDestroyed']()&&this[_0x40c65e(0x114)]['destroy'](),this[_0x40c65e(0x112)]=this[_0x40c65e(0x112)]&&!this[_0x40c65e(0x112)]['isDestroyed']()&&this['batchTable'][_0x40c65e(0xeb)](),this[_0x40c65e(0x117)]>-0x1&&this[_0x40c65e(0x111)][_0x40c65e(0xd8)](this['waterIndex']),this[_0x40c65e(0x125)]=undefined,this[_0x40c65e(0xf8)]=null,this[_0x40c65e(0xe1)]=null,this[_0x40c65e(0x122)]=undefined,this['pickInfo']=undefined,this[_0x40c65e(0xe0)]=undefined,this['vs']=undefined,this['fs']=undefined,Cesium[_0x40c65e(0xfc)](this);};export default S3MWaterRenderEntity;