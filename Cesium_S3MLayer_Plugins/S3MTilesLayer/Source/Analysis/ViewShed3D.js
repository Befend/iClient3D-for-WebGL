const _0x5671=['ZERO','push','fromCache','DrawCommand','UNIT_Y','uniformMap','788MMkbYQ','_projection','inverse','lineCommand','_removeRenderTarget','KEEP','UNIT_Z','aspectRatio','706385hygsTp','BlendingState','isDestroyed','_visibleAreaColor','direction','viewMatrix','inverseViewMatrix','height','533715yoBpTI','context','farToNearRatio','_hintLineColor','_context','normalize','frustumCommandsList','Matrix4','DECREMENT_WRAP','fov','IndexDatatype','_hiddenAreaColor','28083SPQely','max','cos','position','createVertexBuffer','viewProjectionMatrix','116198HDxzoR','frustum','boundingSphere','OPAQUE','_verticalFov','714FrHjEM','995wspfAd','260gVPDSJ','stencilCommand','VertexArray','fromDegreesArrayHeights','_distance','viewshed3d','DEGREES_PER_RADIAN','_createCommand','STATIC_DRAW','LINES','_viewPosition','_horizontalFov','Cartesian3','RADIANS_PER_DEGREE','view','segmentCount','UNSIGNED_SHORT','multiply','dot','tan','invViewMatrix','Math','transform','magnitude','projectionMatrix','Pass','subtract','shallowClone','name','beginFunc','scene','Buffer','roll','BoundingSphere','destroy','BufferUsage','cameraDepthBuffer','_setRenderTarget','_pitch','far','commandList','ShaderSource','isUpdate','abs','NOT_EQUAL','width','Cartesian2','clone','_global','near','globalDepthBuffer','StencilOperation','vertexArray','center','heading','createTypedArray','renderState','clear','globalName','FLOAT','createIndexBuffer','camera','useLogDepth','ALPHA_BLEND','INCREMENT_WRAP','ComponentDatatype','ALWAYS','1ehWTpD','1AESIYR','pitch','remove','cross','Color','endFunc','prototype','RenderState','build','StencilFunction','depthTexture','5LVEMuk','ShaderProgram','_direction','logarithmicDepthFarToNearRatio','shaderProgram','DepthFunction','update','dirty','sin','319045LMKQZV','_updateCamera','atan','setView','passes','colorCommand','renderTextureMatrix','add'];const _0x9c2325=_0x4ca3;(function(_0x44ca14,_0x5cd947){const _0xa95b21=_0x4ca3;while(!![]){try{const _0x338e80=parseInt(_0xa95b21(0x227))*parseInt(_0xa95b21(0x1d1))+parseInt(_0xa95b21(0x1cb))+-parseInt(_0xa95b21(0x246))*-parseInt(_0xa95b21(0x21c))+-parseInt(_0xa95b21(0x230))*-parseInt(_0xa95b21(0x21b))+-parseInt(_0xa95b21(0x1bf))+parseInt(_0xa95b21(0x1d6))*parseInt(_0xa95b21(0x1d8))+parseInt(_0xa95b21(0x23e))*-parseInt(_0xa95b21(0x1d7));if(_0x338e80===_0x5cd947)break;else _0x44ca14['push'](_0x44ca14['shift']());}catch(_0xf58222){_0x44ca14['push'](_0x44ca14['shift']());}}}(_0x5671,0x7aa60));import _0x422cc9 from'../RenderTarget/DepthFramebuffer.js';import _0x16d431 from'./Shaders/ViewShedAnalysisVS.js';import _0x5db735 from'./Shaders/ViewShedAnalysisFS.js';function _0x4ca3(_0x3e8623,_0x29eafc){_0x3e8623=_0x3e8623-0x1bc;let _0x567151=_0x5671[_0x3e8623];return _0x567151;}import _0x23ed7e from'./Shaders/NoLightNoTextureVS.js';import _0x3451b6 from'./Shaders/NoLightNoTextureFS.js';function ViewShed3D(_0x2cf33d){const _0x5eecae=_0x4ca3;this[_0x5eecae(0x1f6)]=_0x2cf33d,this[_0x5eecae(0x1fc)]=new _0x422cc9(_0x2cf33d[_0x5eecae(0x1c3)]),this['globalDepthBuffer']=new _0x422cc9(_0x2cf33d[_0x5eecae(0x1c3)]),this[_0x5eecae(0x1f4)]='',this[_0x5eecae(0x212)]='',this[_0x5eecae(0x1e7)]=0x14,this[_0x5eecae(0x1e2)]=[0x0,0x0,0x0],this['_direction']=0x0,this[_0x5eecae(0x1fe)]=0x0,this[_0x5eecae(0x1e3)]=0x5a,this[_0x5eecae(0x1d5)]=0x3c,this[_0x5eecae(0x1dc)]=0x64,this[_0x5eecae(0x249)]=new Cesium[(_0x5eecae(0x220))](0x0,0x1,0x0,0.5),this['_hiddenAreaColor']=new Cesium[(_0x5eecae(0x220))](0x1,0x0,0x0,0.5),this[_0x5eecae(0x1c2)]=new Cesium['Color'](0x1,0x1,0x1,0x1),this[_0x5eecae(0x1d3)]=new Cesium[(_0x5eecae(0x1f9))](),this[_0x5eecae(0x1d0)]=new Cesium[(_0x5eecae(0x1c6))](),this[_0x5eecae(0x1ec)]=new Cesium[(_0x5eecae(0x1c6))](),this[_0x5eecae(0x236)]=new Cesium[(_0x5eecae(0x1c6))](),this['colorCommand']=undefined,this[_0x5eecae(0x1d9)]=undefined,this[_0x5eecae(0x241)]=undefined,this[_0x5eecae(0x22e)]=![];}Object['defineProperties'](ViewShed3D[_0x9c2325(0x222)],{'viewPosition':{'get':function(){return this['_viewPosition'];},'set':function(_0x4a6767){this['_viewPosition']=_0x4a6767;}},'direction':{'get':function(){const _0xf6a50=_0x9c2325;return this[_0xf6a50(0x229)];},'set':function(_0x986c49){const _0x465e7a=_0x9c2325;this[_0x465e7a(0x229)]=_0x986c49,this[_0x465e7a(0x22e)]=!![];}},'pitch':{'get':function(){const _0x50825d=_0x9c2325;return this[_0x50825d(0x1fe)];},'set':function(_0x50e9dc){const _0x1fe0e3=_0x9c2325;this[_0x1fe0e3(0x1fe)]=_0x50e9dc,this[_0x1fe0e3(0x22e)]=!![];}},'horizontalFov':{'get':function(){const _0x31de11=_0x9c2325;return this[_0x31de11(0x1e3)];},'set':function(_0x1799d4){const _0x261006=_0x9c2325;this[_0x261006(0x1e3)]=_0x1799d4,this[_0x261006(0x22e)]=!![];}},'verticalFov':{'get':function(){return this['_verticalFov'];},'set':function(_0x385aff){const _0x4bb005=_0x9c2325;this[_0x4bb005(0x1d5)]=_0x385aff,this[_0x4bb005(0x22e)]=!![];}},'distance':{'get':function(){const _0x4f0dc5=_0x9c2325;return this[_0x4f0dc5(0x1dc)];},'set':function(_0x20ee7e){const _0x245c97=_0x9c2325;this[_0x245c97(0x1dc)]=Math[_0x245c97(0x1cc)](_0x20ee7e,0x0),this[_0x245c97(0x22e)]=!![];}}}),ViewShed3D['prototype'][_0x9c2325(0x231)]=function(_0xeb6160){const _0x331fc3=_0x9c2325;let _0x1025c6=_0xeb6160[_0x331fc3(0x215)],_0x20c9a4=this[_0x331fc3(0x1e3)]*Cesium[_0x331fc3(0x1ed)][_0x331fc3(0x1e5)],_0x3d154d=this[_0x331fc3(0x1d5)]*Cesium[_0x331fc3(0x1ed)][_0x331fc3(0x1e5)],_0x2b8e3b=Math[_0x331fc3(0x1eb)](_0x20c9a4*0.5),_0x8596d2=Math['tan'](_0x3d154d*0.5),_0x2a993f=_0x2b8e3b/_0x8596d2,_0x52288c=this[_0x331fc3(0x1dc)]*0.001,_0x595160=Math[_0x331fc3(0x1cc)](this[_0x331fc3(0x1dc)],0xa),_0x4b6f2f=this[_0x331fc3(0x229)]*Cesium[_0x331fc3(0x1ed)][_0x331fc3(0x1e5)],_0x5041f0=this[_0x331fc3(0x1fe)]*Cesium[_0x331fc3(0x1ed)][_0x331fc3(0x1e5)],_0x5a51b1=Cesium['Cartesian3'][_0x331fc3(0x1db)](this[_0x331fc3(0x1e2)])[0x0],_0x317b15=_0x1025c6['frustum'][_0x331fc3(0x245)],_0x5c1133=_0x1025c6[_0x331fc3(0x1d2)][_0x331fc3(0x1c8)],_0x1374cf=_0x1025c6['frustum'][_0x331fc3(0x209)],_0xb89e0f=_0x1025c6[_0x331fc3(0x1d2)][_0x331fc3(0x1ff)],_0xf173d1=new Cesium[(_0x331fc3(0x1e4))](),_0x366514=_0x1025c6[_0x331fc3(0x20e)],_0x3cdb96=_0x1025c6[_0x331fc3(0x21d)];Cesium[_0x331fc3(0x1e4)]['clone'](_0x1025c6[_0x331fc3(0x1ce)],_0xf173d1);let _0x5e7f8f=_0xeb6160['useLogDepth'],_0x5de6d0=this['scene'][_0x331fc3(0x1c1)];this['cameraDepthBuffer'][_0x331fc3(0x202)]=!![],this[_0x331fc3(0x1fc)][_0x331fc3(0x1f5)]=_0xe0b4ae=>{const _0x4d19dc=_0x331fc3;_0xe0b4ae['useLogDepth']=![],_0x317b15=_0x1025c6['frustum'][_0x4d19dc(0x245)],_0x5c1133=_0x1025c6[_0x4d19dc(0x1d2)][_0x4d19dc(0x1c8)],_0x1374cf=_0x1025c6[_0x4d19dc(0x1d2)][_0x4d19dc(0x209)],_0xb89e0f=_0x1025c6[_0x4d19dc(0x1d2)]['far'],_0x366514=_0x1025c6['heading'],_0x3cdb96=_0x1025c6[_0x4d19dc(0x21d)],Cesium[_0x4d19dc(0x1e4)][_0x4d19dc(0x207)](_0x1025c6[_0x4d19dc(0x1ce)],_0xf173d1),_0x1025c6[_0x4d19dc(0x1d2)][_0x4d19dc(0x245)]=_0x2a993f,_0x1025c6[_0x4d19dc(0x1d2)]['fov']=_0x20c9a4,_0x1025c6[_0x4d19dc(0x1d2)]['near']=0x1,_0x1025c6[_0x4d19dc(0x1d2)][_0x4d19dc(0x1ff)]=_0x595160+0x1,_0x1025c6[_0x4d19dc(0x233)]({'destination':_0x5a51b1,'orientation':{'heading':_0x4b6f2f,'pitch':_0x5041f0,'roll':_0x1025c6[_0x4d19dc(0x1f8)]}}),Cesium[_0x4d19dc(0x1c6)][_0x4d19dc(0x1e9)](_0x1025c6[_0x4d19dc(0x1d2)][_0x4d19dc(0x1f0)],_0x1025c6[_0x4d19dc(0x1bc)],this[_0x4d19dc(0x1d0)]),Cesium[_0x4d19dc(0x1c6)][_0x4d19dc(0x207)](_0x1025c6[_0x4d19dc(0x1bd)],this[_0x4d19dc(0x1ec)]),Cesium[_0x4d19dc(0x1e4)]['clone'](Cesium[_0x4d19dc(0x1e4)][_0x4d19dc(0x238)],this['boundingSphere'][_0x4d19dc(0x20d)]),this[_0x4d19dc(0x1d3)]['radius']=this['_distance'],Cesium[_0x4d19dc(0x1f9)][_0x4d19dc(0x1ee)](this['boundingSphere'],this[_0x4d19dc(0x1ec)],this[_0x4d19dc(0x1d3)]);},this['cameraDepthBuffer'][_0x331fc3(0x221)]=_0x43c8b1=>{const _0x684867=_0x331fc3;_0x1025c6[_0x684867(0x233)]({'destination':_0xf173d1,'orientation':{'heading':_0x366514,'pitch':_0x3cdb96,'roll':_0x1025c6[_0x684867(0x1f8)]},'convert':![]}),_0x1025c6[_0x684867(0x1d2)]['aspectRatio']=_0x317b15,_0x1025c6['frustum'][_0x684867(0x1c8)]=_0x5c1133,_0x1025c6[_0x684867(0x1d2)][_0x684867(0x209)]=_0x1374cf,_0x1025c6['frustum'][_0x684867(0x1ff)]=_0xb89e0f,this['cameraDepthBuffer'][_0x684867(0x202)]=![],_0x43c8b1[_0x684867(0x216)]=_0x5e7f8f;},this[_0x331fc3(0x20a)][_0x331fc3(0x202)]=!![],this[_0x331fc3(0x20a)][_0x331fc3(0x1f5)]=_0x175465=>{const _0x470d00=_0x331fc3;_0x175465['useLogDepth']=![],_0x1025c6['frustum'][_0x470d00(0x209)]=0xa,this['scene'][_0x470d00(0x1c1)]=this[_0x470d00(0x1f6)][_0x470d00(0x22a)];},this[_0x331fc3(0x20a)][_0x331fc3(0x221)]=_0x1ebf90=>{const _0x4c636f=_0x331fc3;if(this[_0x4c636f(0x1f6)][_0x4c636f(0x1e6)][_0x4c636f(0x1c5)]['length']>0x0){let _0x3b21ad=this[_0x4c636f(0x1f6)][_0x4c636f(0x1e6)][_0x4c636f(0x1c5)][0x0];_0x1025c6['frustum'][_0x4c636f(0x209)]=_0x3b21ad['near'],_0x1025c6[_0x4c636f(0x1d2)][_0x4c636f(0x1ff)]=_0x3b21ad['far'];}let _0x5ad23a=Cesium[_0x4c636f(0x1c6)][_0x4c636f(0x240)](_0x1025c6[_0x4c636f(0x1d2)][_0x4c636f(0x1f0)],new Cesium[(_0x4c636f(0x1c6))]()),_0x1d2032=Cesium['Matrix4']['multiply'](_0x1025c6[_0x4c636f(0x1bd)],_0x5ad23a,new Cesium[(_0x4c636f(0x1c6))]());Cesium[_0x4c636f(0x1c6)][_0x4c636f(0x1e9)](this[_0x4c636f(0x1d0)],_0x1d2032,this[_0x4c636f(0x236)]),_0x1ebf90[_0x4c636f(0x216)]=_0x5e7f8f,this[_0x4c636f(0x1f6)][_0x4c636f(0x1c1)]=_0x5de6d0,_0x1025c6[_0x4c636f(0x1d2)]['near']=_0x1374cf,_0x1025c6[_0x4c636f(0x1d2)]['far']=_0xb89e0f;};};function createVertices(_0x200455){const _0xdb630=_0x9c2325,_0x331b54=_0x200455[_0xdb630(0x1e7)],_0x484e23=_0x200455[_0xdb630(0x1e7)]+0x1,_0x32282a=_0x200455['_distance'];let _0x1eb372=_0x484e23*_0x484e23+0x1,_0x3dc617=Cesium['ComponentDatatype']['createTypedArray'](Cesium[_0xdb630(0x219)][_0xdb630(0x213)],_0x1eb372*0x3),_0xdd55a8=_0x200455[_0xdb630(0x1e3)]*Cesium[_0xdb630(0x1ed)][_0xdb630(0x1e5)],_0x35266d=_0x200455[_0xdb630(0x1d5)]*Cesium[_0xdb630(0x1ed)]['RADIANS_PER_DEGREE'],_0x15b42e=Math[_0xdb630(0x1eb)](_0xdd55a8*0.5),_0x5b248f=Math[_0xdb630(0x1eb)](_0x35266d*0.5),_0x5a036f=Math['PI']-_0xdd55a8*0.5,_0x17fd6b=_0x32282a*_0x15b42e,_0x4edc78=_0x32282a*_0x5b248f,_0x20ca58=0x0,_0x3012dc=0x0,_0x3b6ce3=_0xdd55a8/_0x331b54,_0x1695ba=0x3;for(let _0xc934bf=0x0;_0xc934bf<_0x484e23;_0xc934bf++){_0x20ca58=_0x5a036f+_0xc934bf*_0x3b6ce3;let _0xc41c32=_0x4edc78/(_0x32282a/Math[_0xdb630(0x1cd)](_0x20ca58)),_0x75627a=Math[_0xdb630(0x232)](_0xc41c32),_0x36e9e5=-_0x75627a,_0x58a04f=_0x75627a*0x2/_0x331b54;for(let _0x5138a5=0x0;_0x5138a5<_0x484e23;_0x5138a5++){_0x3012dc=_0x36e9e5+_0x5138a5*_0x58a04f;let _0x21e1ff=_0x32282a*Math['cos'](_0x3012dc)*Math[_0xdb630(0x22f)](_0x20ca58),_0x5836ad=_0x32282a*Math['sin'](_0x3012dc),_0x3c10f5=_0x32282a*Math[_0xdb630(0x1cd)](_0x3012dc)*Math[_0xdb630(0x1cd)](_0x20ca58);_0x3dc617[_0x1695ba++]=_0x21e1ff,_0x3dc617[_0x1695ba++]=_0x5836ad,_0x3dc617[_0x1695ba++]=_0x3c10f5;}}return _0x3dc617;}function createFaceIndices(_0x369e73){const _0x100f70=_0x9c2325,_0x369b75=_0x369e73[_0x100f70(0x1e7)],_0x48e7c2=_0x369b75+0x1;let _0x359c8d=_0x369b75*_0x369b75*0x3*0x2+_0x369b75*0x3*0x4,_0x5a87a4=Cesium[_0x100f70(0x219)][_0x100f70(0x20f)](Cesium[_0x100f70(0x219)]['UNSIGNED_SHORT'],_0x359c8d),_0x1ac115=0x0,_0x48c059=0x1;for(let _0x20b2c6=0x0;_0x20b2c6<_0x369b75;_0x20b2c6++){for(let _0x598b4b=0x0;_0x598b4b<_0x369b75;_0x598b4b++){_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+_0x598b4b*_0x48e7c2,_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+0x1+_0x598b4b*_0x48e7c2,_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+(_0x598b4b+0x1)*_0x48e7c2,_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+0x1+_0x598b4b*_0x48e7c2,_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+0x1+(_0x598b4b+0x1)*_0x48e7c2,_0x5a87a4[_0x1ac115++]=_0x48c059+_0x20b2c6+(_0x598b4b+0x1)*_0x48e7c2;}}for(let _0xe68949=0x0;_0xe68949<_0x369b75;_0xe68949++){_0x5a87a4[_0x1ac115++]=_0xe68949+0x1+_0x48c059,_0x5a87a4[_0x1ac115++]=_0xe68949+_0x48c059,_0x5a87a4[_0x1ac115++]=0x0,_0x5a87a4[_0x1ac115++]=0x0,_0x5a87a4[_0x1ac115++]=_0xe68949+_0x369b75*_0x48e7c2+_0x48c059,_0x5a87a4[_0x1ac115++]=_0xe68949+0x1+_0x369b75*_0x48e7c2+_0x48c059;}for(let _0x206404=0x0;_0x206404<_0x369b75;_0x206404++){_0x5a87a4[_0x1ac115++]=0x0,_0x5a87a4[_0x1ac115++]=_0x206404*_0x48e7c2+_0x48c059,_0x5a87a4[_0x1ac115++]=(_0x206404+0x1)*_0x48e7c2+_0x48c059,_0x5a87a4[_0x1ac115++]=_0x369b75+(_0x206404+0x1)*_0x48e7c2+_0x48c059,_0x5a87a4[_0x1ac115++]=_0x369b75+_0x206404*_0x48e7c2+_0x48c059,_0x5a87a4[_0x1ac115++]=0x0;}return _0x5a87a4;}function createLineIndices(_0x4919d6){const _0x2a8c94=_0x9c2325,_0xfa7c1b=_0x4919d6[_0x2a8c94(0x1e7)],_0x20a429=_0xfa7c1b+0x1,_0x1f3999=(0x4+_0xfa7c1b*0x5+_0xfa7c1b*0x2*0x3)*0x2;let _0x5c68c8=Cesium[_0x2a8c94(0x219)][_0x2a8c94(0x20f)](Cesium[_0x2a8c94(0x219)][_0x2a8c94(0x1e8)],_0x1f3999),_0x16cc9b=0x0;_0x5c68c8[_0x16cc9b++]=0x0,_0x5c68c8[_0x16cc9b++]=0x1,_0x5c68c8[_0x16cc9b++]=0x0,_0x5c68c8[_0x16cc9b++]=_0x20a429,_0x5c68c8[_0x16cc9b++]=0x0,_0x5c68c8[_0x16cc9b++]=_0xfa7c1b*_0x20a429+0x1,_0x5c68c8[_0x16cc9b++]=0x0,_0x5c68c8[_0x16cc9b++]=_0x20a429*_0x20a429;for(let _0x1ab69f=0x0;_0x1ab69f<0x5;_0x1ab69f++){for(let _0x3fcff8=0x0;_0x3fcff8<_0xfa7c1b;_0x3fcff8++){_0x5c68c8[_0x16cc9b++]=0x1+_0x3fcff8+_0x20a429*0x5*_0x1ab69f,_0x5c68c8[_0x16cc9b++]=0x1+(_0x3fcff8+0x1)+_0x20a429*0x5*_0x1ab69f;}}for(let _0x37baf1=0x0;_0x37baf1<0x5;_0x37baf1++){for(let _0x337faf=0x0;_0x337faf<_0xfa7c1b;_0x337faf++){_0x5c68c8[_0x16cc9b++]=0x1+_0x20a429*_0x337faf+_0x37baf1*0x5,_0x5c68c8[_0x16cc9b++]=0x1+_0x20a429*(_0x337faf+0x1)+_0x37baf1*0x5;}}return _0x5c68c8;}ViewShed3D[_0x9c2325(0x222)]['_createCommand']=function(_0x35e55b){const _0x3adaaf=_0x9c2325;let _0xee3daf=createVertices(this),_0x13f47e=createFaceIndices(this),_0x18ac7f=createLineIndices(this),_0x5e6398=_0x35e55b[_0x3adaaf(0x1c0)],_0x5c1e1=Cesium['Buffer'][_0x3adaaf(0x1cf)]({'context':_0x5e6398,'typedArray':_0xee3daf,'usage':Cesium[_0x3adaaf(0x1fb)][_0x3adaaf(0x1e0)]}),_0xa3673d=Cesium[_0x3adaaf(0x1f7)][_0x3adaaf(0x214)]({'context':_0x5e6398,'typedArray':_0x13f47e,'usage':Cesium['BufferUsage']['STATIC_DRAW'],'indexDatatype':Cesium[_0x3adaaf(0x1c9)][_0x3adaaf(0x1e8)]}),_0x4d3373=[{'index':0x0,'vertexBuffer':_0x5c1e1,'componentsPerAttribute':0x3,'componentDatatype':Cesium[_0x3adaaf(0x219)][_0x3adaaf(0x213)],'offsetInBytes':0x0,'strideInBytes':0x3*0x4,'normalize':![]}],_0x371450={'aPosition':0x0},_0x85ec0f=new Cesium[(_0x3adaaf(0x1da))]({'context':_0x5e6398,'attributes':_0x4d3373,'indexBuffer':_0xa3673d}),_0x5b9dbb=new Cesium['ShaderSource']({'sources':[_0x16d431]}),_0x552a46=new Cesium[(_0x3adaaf(0x201))]({'sources':[_0x5db735]}),_0x499c32=Cesium[_0x3adaaf(0x228)][_0x3adaaf(0x23a)]({'context':_0x5e6398,'vertexShaderSource':_0x5b9dbb,'fragmentShaderSource':_0x552a46,'attributeLocations':_0x371450}),_0x50b121=Cesium[_0x3adaaf(0x223)]['fromCache']({'cull':{'enabled':![]},'depthTest':{'enabled':![]},'depthMask':![],'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x3adaaf(0x225)][_0x3adaaf(0x204)],'frontOperation':{'fail':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x243)],'zFail':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x243)],'zPass':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x1c7)]},'backFunction':Cesium[_0x3adaaf(0x225)][_0x3adaaf(0x204)],'backOperation':{'fail':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x243)],'zFail':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x243)],'zPass':Cesium['StencilOperation']['DECREMENT_WRAP']},'reference':0x0,'mask':~0x0},'blending':Cesium[_0x3adaaf(0x247)][_0x3adaaf(0x217)]});this[_0x3adaaf(0x235)]=new Cesium[(_0x3adaaf(0x23b))]({'primitiveType':Cesium['PrimitiveType']['TRIANGLES'],'modelMatrix':this[_0x3adaaf(0x1ec)],'boundingVolume':this[_0x3adaaf(0x1d3)],'pass':Cesium[_0x3adaaf(0x1f1)][_0x3adaaf(0x1d4)],'shaderProgram':_0x499c32,'vertexArray':_0x85ec0f,'renderState':_0x50b121,'owner':this,'cull':!![]}),this[_0x3adaaf(0x235)]['uniformMap']={'uVisibleAreaColor':()=>{const _0x419f1f=_0x3adaaf;return this[_0x419f1f(0x249)];},'uHiddenAreaColor':()=>{const _0xc3e2b5=_0x3adaaf;return this[_0xc3e2b5(0x1ca)];},'uRenderTextureMatrix':()=>{const _0x220b36=_0x3adaaf;return this[_0x220b36(0x236)];},'uTextureSize':()=>{const _0x2508b9=_0x3adaaf;let _0x118f9c=this[_0x2508b9(0x1fc)][_0x2508b9(0x226)];return new Cesium[(_0x2508b9(0x206))](_0x118f9c[_0x2508b9(0x205)],_0x118f9c[_0x2508b9(0x1be)]);},'uTexture':()=>{const _0xbadbce=_0x3adaaf;return this[_0xbadbce(0x1fc)][_0xbadbce(0x226)];},'uGlobalDepthTexture':()=>{const _0x25bc27=_0x3adaaf;return this[_0x25bc27(0x20a)]['depthTexture'];}};let _0x3187fc=Cesium[_0x3adaaf(0x23b)][_0x3adaaf(0x1f3)](this[_0x3adaaf(0x235)]);_0x3187fc[_0x3adaaf(0x210)]=Cesium[_0x3adaaf(0x223)][_0x3adaaf(0x23a)]({'depthMask':![],'colorMask':{'red':![],'green':![],'blue':![],'alpha':![]},'depthTest':{'enabled':!![],'func':Cesium[_0x3adaaf(0x22c)]['GREATER']},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction'][_0x3adaaf(0x21a)],'frontOperation':{'fail':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x243)],'zFail':Cesium[_0x3adaaf(0x20b)]['KEEP'],'zPass':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x218)]},'backFunction':Cesium[_0x3adaaf(0x225)][_0x3adaaf(0x21a)],'backOperation':{'fail':Cesium['StencilOperation'][_0x3adaaf(0x243)],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium[_0x3adaaf(0x20b)][_0x3adaaf(0x1c7)]},'reference':0x0,'mask':~0x0}}),this[_0x3adaaf(0x1d9)]=_0x3187fc;let _0x19863e=Cesium[_0x3adaaf(0x1f7)][_0x3adaaf(0x214)]({'context':_0x5e6398,'typedArray':_0x18ac7f,'usage':Cesium[_0x3adaaf(0x1fb)][_0x3adaaf(0x1e0)],'indexDatatype':Cesium['IndexDatatype'][_0x3adaaf(0x1e8)]});this[_0x3adaaf(0x241)]=new Cesium[(_0x3adaaf(0x23b))]({'primitiveType':Cesium['PrimitiveType'][_0x3adaaf(0x1e1)],'modelMatrix':this[_0x3adaaf(0x1ec)],'boundingVolume':this[_0x3adaaf(0x1d3)],'pass':Cesium[_0x3adaaf(0x1f1)][_0x3adaaf(0x1d4)],'owner':this,'cull':!![]}),this[_0x3adaaf(0x241)]['vertexArray']=new Cesium[(_0x3adaaf(0x1da))]({'context':_0x5e6398,'attributes':_0x4d3373,'indexBuffer':_0x19863e}),this['lineCommand']['shaderProgram']=Cesium[_0x3adaaf(0x228)][_0x3adaaf(0x23a)]({'context':_0x5e6398,'vertexShaderSource':_0x23ed7e,'fragmentShaderSource':_0x3451b6,'attributeLocations':_0x371450}),this[_0x3adaaf(0x241)]['renderState']=Cesium['RenderState'][_0x3adaaf(0x23a)]({'cull':{'enabled':![]},'depthTest':{'enabled':!![]},'blending':Cesium[_0x3adaaf(0x247)][_0x3adaaf(0x217)]}),this[_0x3adaaf(0x241)][_0x3adaaf(0x23d)]={'uColor':()=>{const _0x7da8a8=_0x3adaaf;return this[_0x7da8a8(0x1c2)];}};},ViewShed3D[_0x9c2325(0x222)]['setDistDirByPoint']=function(_0x586b0f){const _0x350dcb=_0x9c2325;let _0x3bf5c5=this[_0x350dcb(0x1f6)][_0x350dcb(0x215)],_0x1c31b3=_0x3bf5c5[_0x350dcb(0x23f)],_0x186bce=Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1db)](_0x586b0f)[0x0],_0x25846c=Cesium[_0x350dcb(0x1e4)]['fromDegreesArrayHeights'](this[_0x350dcb(0x1e2)])[0x0],_0x3b6715=new Cesium['Cartesian3']();Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1f2)](_0x186bce,_0x25846c,_0x3b6715);let _0x4a8aaf=Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1ef)](_0x3b6715);Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1c4)](_0x3b6715,_0x3b6715),this['distance']=_0x4a8aaf;let _0x135ad6=_0x3bf5c5[_0x350dcb(0x20e)],_0x2e06a9=_0x3bf5c5[_0x350dcb(0x21d)],_0x2681f7=_0x3bf5c5[_0x350dcb(0x1f8)],_0x122ca9=new Cesium[(_0x350dcb(0x1e4))]();Cesium['Cartesian3'][_0x350dcb(0x207)](_0x3bf5c5[_0x350dcb(0x1ce)],_0x122ca9);let _0x31bb53=_0x3b6715[_0x350dcb(0x207)](),_0x11d1f8=_0x25846c[_0x350dcb(0x207)]();_0x11d1f8=Cesium['Cartesian3']['normalize'](_0x11d1f8,_0x11d1f8);Math[_0x350dcb(0x203)](Cesium['Cartesian3']['dot'](_0x11d1f8,_0x31bb53))>=0x1&&(Math[_0x350dcb(0x203)](Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1ea)](_0x31bb53,Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x23c)]))<0x1?_0x11d1f8=Cesium['Cartesian3'][_0x350dcb(0x207)](Cartesian3['UNIT_Y'],_0x11d1f8):_0x11d1f8=Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x207)](Cartesian3[_0x350dcb(0x244)],_0x11d1f8));let _0x5d9d30=new Cesium[(_0x350dcb(0x1e4))]();Cesium['Cartesian3'][_0x350dcb(0x21f)](_0x11d1f8,_0x31bb53,_0x5d9d30),_0x5d9d30=Cesium[_0x350dcb(0x1e4)][_0x350dcb(0x1c4)](_0x5d9d30,_0x5d9d30),Cesium['Cartesian3'][_0x350dcb(0x21f)](_0x31bb53,_0x5d9d30,_0x11d1f8),_0x11d1f8=Cesium['Cartesian3']['normalize'](_0x11d1f8,_0x11d1f8),_0x3bf5c5[_0x350dcb(0x233)]({'destination':_0x25846c,'orientation':{'direction':_0x31bb53,'up':_0x11d1f8},'convert':![]}),this[_0x350dcb(0x24a)]=_0x3bf5c5[_0x350dcb(0x20e)]*Cesium['Math']['DEGREES_PER_RADIAN'],this[_0x350dcb(0x21d)]=_0x3bf5c5[_0x350dcb(0x21d)]*Cesium[_0x350dcb(0x1ed)][_0x350dcb(0x1de)],_0x3bf5c5['setView']({'destination':_0x122ca9,'orientation':{'heading':_0x135ad6,'pitch':_0x2e06a9,'roll':_0x2681f7},'convert':![]});},ViewShed3D[_0x9c2325(0x222)]['_destroyCommand']=function(){const _0x287767=_0x9c2325;this[_0x287767(0x235)]&&(this[_0x287767(0x235)]['vertexArray']=this[_0x287767(0x235)][_0x287767(0x20c)]&&!this['colorCommand']['vertexArray'][_0x287767(0x248)]()&&this['colorCommand']['vertexArray'][_0x287767(0x1fa)](),this[_0x287767(0x235)][_0x287767(0x22b)]=this[_0x287767(0x235)][_0x287767(0x22b)]&&!this[_0x287767(0x235)]['shaderProgram'][_0x287767(0x248)]()&&this[_0x287767(0x235)][_0x287767(0x22b)][_0x287767(0x1fa)](),this[_0x287767(0x235)]=undefined),this['stencilCommand']&&(this[_0x287767(0x1d9)][_0x287767(0x20c)]=this[_0x287767(0x1d9)][_0x287767(0x20c)]&&!this['stencilCommand'][_0x287767(0x20c)][_0x287767(0x248)]()&&this[_0x287767(0x1d9)][_0x287767(0x20c)][_0x287767(0x1fa)](),this[_0x287767(0x1d9)][_0x287767(0x22b)]=this[_0x287767(0x1d9)][_0x287767(0x22b)]&&!this[_0x287767(0x1d9)][_0x287767(0x22b)][_0x287767(0x248)]()&&this['stencilCommand']['shaderProgram'][_0x287767(0x1fa)](),this[_0x287767(0x1d9)]=undefined),this['lineCommand']&&(this[_0x287767(0x241)][_0x287767(0x20c)]=this['lineCommand'][_0x287767(0x20c)]&&!this['lineCommand'][_0x287767(0x20c)][_0x287767(0x248)]()&&this[_0x287767(0x241)][_0x287767(0x20c)]['destroy'](),this['lineCommand'][_0x287767(0x22b)]=this[_0x287767(0x241)][_0x287767(0x22b)]&&!this[_0x287767(0x241)][_0x287767(0x22b)][_0x287767(0x248)]()&&this[_0x287767(0x241)][_0x287767(0x22b)]['destroy'](),this[_0x287767(0x241)]=undefined);},ViewShed3D['prototype'][_0x9c2325(0x22d)]=function(_0x37fe6a){const _0x23909e=_0x9c2325;if(_0x37fe6a['fbo']||_0x37fe6a[_0x23909e(0x234)]['pick']||_0x37fe6a[_0x23909e(0x234)]['depth'])return;this[_0x23909e(0x22e)]&&(this[_0x23909e(0x22e)]=![],this['_destroyCommand'](),this[_0x23909e(0x231)](_0x37fe6a),this[_0x23909e(0x1df)](_0x37fe6a)),this[_0x23909e(0x1d9)]&&_0x37fe6a[_0x23909e(0x200)]['push'](this['stencilCommand']),this['colorCommand']&&_0x37fe6a[_0x23909e(0x200)]['push'](this['colorCommand']),this[_0x23909e(0x241)]&&_0x37fe6a[_0x23909e(0x200)][_0x23909e(0x239)](this[_0x23909e(0x241)]);},ViewShed3D[_0x9c2325(0x222)][_0x9c2325(0x224)]=function(){const _0x59708c=_0x9c2325;this[_0x59708c(0x1f4)]=_0x59708c(0x1dd)+this['scene']['_renderTargets']['length'],this['globalName']=this[_0x59708c(0x1f4)]+_0x59708c(0x208),this[_0x59708c(0x1f6)]['_setRenderTarget'](this['name'],this[_0x59708c(0x1fc)]),this['scene'][_0x59708c(0x1fd)](this[_0x59708c(0x212)],this['globalDepthBuffer']),this['scene']['primitives'][_0x59708c(0x237)](this);},ViewShed3D[_0x9c2325(0x222)][_0x9c2325(0x211)]=function(){const _0xc6bdb5=_0x9c2325;this['scene'][_0xc6bdb5(0x242)](this[_0xc6bdb5(0x1f4)]),this[_0xc6bdb5(0x1f6)][_0xc6bdb5(0x242)](this[_0xc6bdb5(0x212)]),this[_0xc6bdb5(0x1f6)]['primitives'][_0xc6bdb5(0x21e)](this);},ViewShed3D[_0x9c2325(0x222)][_0x9c2325(0x248)]=function(){return![];},ViewShed3D[_0x9c2325(0x222)]['destroy']=function(){const _0x49619b=_0x9c2325;this[_0x49619b(0x1fc)]=this[_0x49619b(0x1fc)][_0x49619b(0x1fa)](),this[_0x49619b(0x20a)]=this['globalDepthBuffer'][_0x49619b(0x1fa)]();if(this[_0x49619b(0x235)]){let _0x373a8c=this[_0x49619b(0x235)]['vertexArray'],_0x210dce=this['colorCommand']['shaderProgram'];_0x373a8c=_0x373a8c&&!_0x373a8c['isDestroyed']()&&_0x373a8c[_0x49619b(0x1fa)](),_0x210dce=_0x210dce&&!_0x210dce['isDestroyed']()&&_0x210dce[_0x49619b(0x1fa)](),this[_0x49619b(0x235)]=undefined;}if(this[_0x49619b(0x1d9)]){let _0x2104ec=this[_0x49619b(0x1d9)][_0x49619b(0x20c)],_0x4bfcc7=this[_0x49619b(0x1d9)][_0x49619b(0x22b)];_0x2104ec=_0x2104ec&&!_0x2104ec[_0x49619b(0x248)]()&&_0x2104ec[_0x49619b(0x1fa)](),_0x4bfcc7=_0x4bfcc7&&!_0x4bfcc7['isDestroyed']()&&_0x4bfcc7[_0x49619b(0x1fa)](),this['stencilCommand']=undefined;}if(this[_0x49619b(0x241)]){let _0x1ac45=this['lineCommand'][_0x49619b(0x20c)],_0x16adc8=this[_0x49619b(0x241)][_0x49619b(0x22b)];_0x1ac45=_0x1ac45&&!_0x1ac45[_0x49619b(0x248)]()&&_0x1ac45[_0x49619b(0x1fa)](),_0x16adc8=_0x16adc8&&!_0x16adc8['isDestroyed']()&&_0x16adc8[_0x49619b(0x1fa)](),this[_0x49619b(0x241)]=undefined;}};export default ViewShed3D;