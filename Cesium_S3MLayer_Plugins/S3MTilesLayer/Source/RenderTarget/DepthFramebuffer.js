const _0x2500=['367943PhBbMw','framebuffer','ClearCommand','_hdr','renderState','Framebuffer','endFunc','fromCache','_updateCopyCommand','1543418OUxvaK','depthTextureToCopy','114889oguVYJ','passes','create','Texture','depth','context','1TIEYSy','SceneFramebuffer','execute','clearCommand','drawingBufferWidth','_updateFramebuffer','depthTexture','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20sampler2D\x20u_depthTexture;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec2\x20v_textureCoordinates;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20czm_packDepth(texture2D(u_depthTexture,\x20v_textureCoordinates).r);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','view','height','11rJqNPy','pick','isUpdate','NEAREST','update','environmentVisible','passState','TextureMinificationFilter','1037291uctast','getFramebuffer','createViewportQuadCommand','Color','sceneFramebuffer','isDestroyed','TextureMagnificationFilter','viewport','vertexArray','54SuNjmM','width','frameState','17398CflVpI','CLAMP_TO_EDGE','390869HNXliH','TextureWrap','destroy','RenderState','BoundingRectangle','drawingBufferHeight','depthStencilTexture','beginFunc','begin','2478nQBPrc','constructor','copyDepthCommand'];function _0x2560(_0x39dd8e,_0xebbdfa){_0x39dd8e=_0x39dd8e-0xda;let _0x2500f4=_0x2500[_0x39dd8e];return _0x2500f4;}const _0x18bb0e=_0x2560;(function(_0x142e10,_0x293843){const _0x1af97a=_0x2560;while(!![]){try{const _0x5a0a80=-parseInt(_0x1af97a(0xff))+-parseInt(_0x1af97a(0xe5))*parseInt(_0x1af97a(0xe8))+-parseInt(_0x1af97a(0xdc))+-parseInt(_0x1af97a(0x107))*-parseInt(_0x1af97a(0xf3))+-parseInt(_0x1af97a(0x101))+parseInt(_0x1af97a(0xea))+parseInt(_0x1af97a(0x112))*parseInt(_0x1af97a(0xf6));if(_0x5a0a80===_0x293843)break;else _0x142e10['push'](_0x142e10['shift']());}catch(_0x98857f){_0x142e10['push'](_0x142e10['shift']());}}}(_0x2500,0xc4afe));import _0x563c08 from'./RenderTarget.js';function DepthFramebuffer(_0x326394){const _0x5626ed=_0x2560;this[_0x5626ed(0x106)]=_0x326394,this[_0x5626ed(0xe0)]=new Cesium[(_0x5626ed(0x108))](),this[_0x5626ed(0xda)]=new Cesium['PassState'](_0x326394),this[_0x5626ed(0xda)][_0x5626ed(0xe3)]=new Cesium[(_0x5626ed(0xee))](),this[_0x5626ed(0x117)]={'isSunVisible':![],'isMoonVisible':![],'isSkyAtmosphereVisible':![],'isSkyBoxVisible':![],'isGlobalVisible':!![],'isObjectVisible':!![]},this['width']=0x0,this[_0x5626ed(0x111)]=0x0,this[_0x5626ed(0xf5)]=undefined,this[_0x5626ed(0x10a)]=undefined,this[_0x5626ed(0xf7)]=undefined,this[_0x5626ed(0x100)]=undefined,this['rs']=undefined,this[_0x5626ed(0x10d)]=undefined,this[_0x5626ed(0xf7)]=undefined,this[_0x5626ed(0x114)]=![];}DepthFramebuffer[_0x18bb0e(0x10e)]=Object[_0x18bb0e(0x103)](_0x563c08[_0x18bb0e(0x10e)]),DepthFramebuffer['prototype'][_0x18bb0e(0xf4)]=_0x563c08,DepthFramebuffer[_0x18bb0e(0x10e)][_0x18bb0e(0x10c)]=function(_0x2cce1a){const _0x1c125d=_0x18bb0e;let _0x66807c=_0x2cce1a[_0x1c125d(0x10b)],_0x4755c2=_0x2cce1a[_0x1c125d(0xef)];(!this[_0x1c125d(0xf7)]||this[_0x1c125d(0xe6)]!==_0x66807c||this['height']!==_0x4755c2)&&(this[_0x1c125d(0xe6)]=_0x66807c,this[_0x1c125d(0x111)]=_0x4755c2,this['depthTexture']=this[_0x1c125d(0x10d)]&&!this[_0x1c125d(0x10d)][_0x1c125d(0xe1)]()&&this[_0x1c125d(0x10d)][_0x1c125d(0xec)](),this[_0x1c125d(0x10d)]=new Cesium[(_0x1c125d(0x104))]({'context':_0x2cce1a,'width':_0x66807c,'height':_0x4755c2,'pixelFormat':Cesium['PixelFormat']['RGBA'],'pixelDatatype':Cesium['PixelDatatype']['UNSIGNED_BYTE'],'sampler':new Cesium['Sampler']({'wrapS':Cesium[_0x1c125d(0xeb)][_0x1c125d(0xe9)],'wrapT':Cesium['TextureWrap'][_0x1c125d(0xe9)],'minificationFilter':Cesium[_0x1c125d(0xdb)][_0x1c125d(0x115)],'magnificationFilter':Cesium[_0x1c125d(0xe2)]['NEAREST']})}),this[_0x1c125d(0xf7)]=this[_0x1c125d(0xf7)]&&!this[_0x1c125d(0xf7)][_0x1c125d(0xe1)]()&&this[_0x1c125d(0xf7)][_0x1c125d(0xec)](),this[_0x1c125d(0xf7)]=new Cesium[(_0x1c125d(0xfb))]({'context':_0x2cce1a,'colorTextures':[this[_0x1c125d(0x10d)]],'destroyAttachments':![]}));},DepthFramebuffer[_0x18bb0e(0x10e)][_0x18bb0e(0xfe)]=function(_0x3eec36){const _0x46fc5e=_0x18bb0e;(!this['rs']||!Cesium[_0x46fc5e(0xee)]['equals'](this[_0x46fc5e(0xda)]['viewport'],this['rs'][_0x46fc5e(0xe3)]))&&(this['rs']=Cesium[_0x46fc5e(0xed)][_0x46fc5e(0xfd)]({'viewport':this[_0x46fc5e(0xda)][_0x46fc5e(0xe3)]}));if(!this[_0x46fc5e(0xf5)]){let _0xac43e4=_0x46fc5e(0x10f);this[_0x46fc5e(0xf5)]=_0x3eec36[_0x46fc5e(0xde)](_0xac43e4,{'uniformMap':{'u_depthTexture':()=>{return this['depthTextureToCopy'];}},'owner':this});}!this[_0x46fc5e(0x10a)]&&(this[_0x46fc5e(0x10a)]=new Cesium[(_0x46fc5e(0xf8))]({'color':new Cesium[(_0x46fc5e(0xdf))](0x0,0x0,0x0,0x0),'stencil':0x0,'depth':0x1,'owner':this})),this['copyDepthCommand'][_0x46fc5e(0xfa)]=this['rs'],this[_0x46fc5e(0xf5)][_0x46fc5e(0xf7)]=this[_0x46fc5e(0xf7)],this[_0x46fc5e(0x10a)][_0x46fc5e(0xf7)]=this[_0x46fc5e(0xf7)];},DepthFramebuffer[_0x18bb0e(0x10e)][_0x18bb0e(0xf2)]=function(_0x5096f4){const _0x59eec3=_0x18bb0e;this[_0x59eec3(0xe0)][_0x59eec3(0x116)](_0x5096f4[_0x59eec3(0x106)],_0x5096f4[_0x59eec3(0x110)]['viewport'],_0x5096f4[_0x59eec3(0xf9)]),this[_0x59eec3(0xda)][_0x59eec3(0xf7)]=this[_0x59eec3(0xe0)][_0x59eec3(0xdd)](),Cesium[_0x59eec3(0xee)]['clone'](_0x5096f4[_0x59eec3(0x110)][_0x59eec3(0xe3)],this['passState']['viewport']);let _0x4e65c5=_0x5096f4[_0x59eec3(0x106)];return this[_0x59eec3(0x10c)](_0x4e65c5),this['_updateCopyCommand'](_0x4e65c5),this['clearCommand'][_0x59eec3(0x109)](_0x4e65c5,this[_0x59eec3(0xda)]),_0x5096f4[_0x59eec3(0xe7)]['passes'][_0x59eec3(0x105)]=!![],this[_0x59eec3(0xf1)]&&this['beginFunc'](_0x5096f4[_0x59eec3(0xe7)]),this['passState'];},DepthFramebuffer['prototype']['end']=function(_0x7055f6,_0x2d3613){const _0x5e3ba7=_0x18bb0e;_0x7055f6['passes'][_0x5e3ba7(0x113)]=![],_0x7055f6[_0x5e3ba7(0x102)][_0x5e3ba7(0x105)]=![],this[_0x5e3ba7(0xfc)]&&this[_0x5e3ba7(0xfc)](_0x7055f6),this[_0x5e3ba7(0x100)]=_0x2d3613[_0x5e3ba7(0xf7)][_0x5e3ba7(0xf0)],this[_0x5e3ba7(0xf5)]&&this[_0x5e3ba7(0xf5)]['execute'](_0x7055f6['context'],_0x2d3613);},DepthFramebuffer[_0x18bb0e(0x10e)][_0x18bb0e(0xe1)]=function(){return![];},DepthFramebuffer[_0x18bb0e(0x10e)][_0x18bb0e(0xec)]=function(){const _0x110521=_0x18bb0e;this['depthTexture']=this[_0x110521(0x10d)]&&!this[_0x110521(0x10d)][_0x110521(0xe1)]()&&this[_0x110521(0x10d)]['destroy'](),this['framebuffer']=this[_0x110521(0xf7)]&&!this[_0x110521(0xf7)][_0x110521(0xe1)]()&&this['framebuffer'][_0x110521(0xec)]();if(this[_0x110521(0xf5)]){let _0x3e031e=this[_0x110521(0xf5)]['sp'];_0x3e031e=_0x3e031e&&!_0x3e031e[_0x110521(0xe1)]()&&_0x3e031e['destroy']();let _0x32920e=this['copyDepthCommand'][_0x110521(0xe4)];_0x32920e=_0x32920e&&!_0x32920e['isDestroyed']()&&_0x32920e['destroy'](),this[_0x110521(0xf5)]=undefined;}return this[_0x110521(0x10a)]=undefined,this[_0x110521(0x100)]=undefined,this[_0x110521(0x114)]=![],Cesium['destroyObject'](this);};export default DepthFramebuffer;